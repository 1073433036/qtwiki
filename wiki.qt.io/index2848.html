<!DOCTYPE html>
<html lang="en" dir="ltr" class="client-nojs">

<!-- Mirrored from wiki.qt.io/index.php?title=Transition_from_Qt_4.x_to_Qt5&oldid=19502 by HTTrack Website Copier/3.x [XR&CO'2013], Thu, 05 Nov 2015 08:42:18 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<meta charset="UTF-8" />
<title>Transition from Qt 4.x to Qt5 - Qt Wiki</title>
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />
<meta name="generator" content="MediaWiki 1.23.3" />
<meta name="robots" content="noindex,nofollow" />
<link rel="shortcut icon" href="http://wiki.qt.io/favicon.ico" />
<link rel="search" type="application/opensearchdescription+xml" href="http://wiki.qt.io/opensearch_desc.php" title="Qt Wiki (en)" />
<link rel="EditURI" type="application/rsd+xml" href="http://wiki.qt.io/api.php?action=rsd" />
<link rel="alternate" type="application/atom+xml" title="Qt Wiki Atom feed" href="http://wiki.qt.io/index.php?title=Special:RecentChanges&amp;feed=atom" />
<link rel="stylesheet" href="http://wiki.qt.io/load.php?debug=false&amp;lang=en&amp;modules=mediawiki.legacy.commonPrint%2Cshared%7Cmediawiki.skinning.interface%7Cmediawiki.ui.button%7Cskins.vector.styles&amp;only=styles&amp;skin=vector&amp;*" />
<meta name="ResourceLoaderDynamicStyles" content="" />
<link rel="stylesheet" href="http://wiki.qt.io/load.php?debug=false&amp;lang=en&amp;modules=site&amp;only=styles&amp;skin=vector&amp;*" />
<style>a:lang(ar),a:lang(kk-arab),a:lang(mzn),a:lang(ps),a:lang(ur){text-decoration:none}
/* cache key: qtio_wiki:resourceloader:filter:minify-css:7:e91d7bc946738c8892a88ad5616a59ba */</style>
<script src="http://wiki.qt.io/load.php?debug=false&amp;lang=en&amp;modules=startup&amp;only=scripts&amp;skin=vector&amp;*"></script>
<script>if(window.mw){
mw.config.set({"wgCanonicalNamespace":"","wgCanonicalSpecialPageName":false,"wgNamespaceNumber":0,"wgPageName":"Transition_from_Qt_4.x_to_Qt5","wgTitle":"Transition from Qt 4.x to Qt5","wgCurRevisionId":19502,"wgRevisionId":19502,"wgArticleId":2072,"wgIsArticle":true,"wgIsRedirect":false,"wgAction":"view","wgUserName":null,"wgUserGroups":["*"],"wgCategories":["Developing with Qt","Developing Qt"],"wgBreakFrames":false,"wgPageContentLanguage":"en","wgPageContentModel":"wikitext","wgSeparatorTransformTable":["",""],"wgDigitTransformTable":["",""],"wgDefaultDateFormat":"dmy","wgMonthNames":["","January","February","March","April","May","June","July","August","September","October","November","December"],"wgMonthNamesShort":["","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"wgRelevantPageName":"Transition_from_Qt_4.x_to_Qt5","wgIsProbablyEditable":false,"wgRestrictionEdit":[],"wgRestrictionMove":[],"wgWikiEditorEnabledModules":{"toolbar":true,"dialogs":true,"hidesig":true,"preview":true,"previewDialog":false,"publish":true}});
}</script><script>if(window.mw){
mw.loader.implement("user.options",function($,jQuery){mw.user.options.set({"ccmeonemails":0,"cols":80,"date":"default","diffonly":0,"disablemail":0,"editfont":"default","editondblclick":0,"editsectiononrightclick":0,"enotifminoredits":0,"enotifrevealaddr":0,"enotifusertalkpages":1,"enotifwatchlistpages":1,"extendwatchlist":0,"fancysig":0,"forceeditsummary":0,"gender":"unknown","hideminor":0,"hidepatrolled":0,"imagesize":2,"math":1,"minordefault":0,"newpageshidepatrolled":0,"nickname":"","norollbackdiff":0,"numberheadings":0,"previewonfirst":0,"previewontop":1,"rcdays":7,"rclimit":50,"rows":25,"showhiddencats":0,"shownumberswatching":1,"showtoolbar":1,"skin":"vector","stubthreshold":0,"thumbsize":2,"underline":2,"uselivepreview":0,"usenewrc":0,"watchcreations":1,"watchdefault":1,"watchdeletion":0,"watchlistdays":3,"watchlisthideanons":0,"watchlisthidebots":0,"watchlisthideliu":0,"watchlisthideminor":0,"watchlisthideown":0,"watchlisthidepatrolled":0,"watchmoves":0,"wllimit":250,
"useeditwarning":1,"prefershttps":1,"usebetatoolbar":1,"usebetatoolbar-cgd":1,"wikieditor-preview":1,"wikieditor-publish":1,"language":"en","variant-gan":"gan","variant-iu":"iu","variant-kk":"kk","variant-ku":"ku","variant-shi":"shi","variant-sr":"sr","variant-tg":"tg","variant-uz":"uz","variant-zh":"zh","searchNs0":true,"searchNs1":false,"searchNs2":false,"searchNs3":false,"searchNs4":false,"searchNs5":false,"searchNs6":false,"searchNs7":false,"searchNs8":false,"searchNs9":false,"searchNs10":false,"searchNs11":false,"searchNs12":false,"searchNs13":false,"searchNs14":false,"searchNs15":false,"searchNs500":false,"searchNs501":false,"searchNs700":false,"searchNs701":false,"variant":"en"});},{},{});mw.loader.implement("user.tokens",function($,jQuery){mw.user.tokens.set({"editToken":"+\\","patrolToken":false,"watchToken":false});},{},{});
/* cache key: qtio_wiki:resourceloader:filter:minify-js:7:9743cb8b8019d46de5946bfe6dfa04d7 */
}</script>
<script>if(window.mw){
mw.loader.load(["mediawiki.page.startup","mediawiki.legacy.wikibits","mediawiki.legacy.ajax","skins.vector.js"]);
}</script>
<style type="text/css">/*<![CDATA[*/
.source-cpp-qt {line-height: normal;}
.source-cpp-qt li, .source-cpp-qt pre {
	line-height: normal; border: 0px none white;
}
/**
 * GeSHi Dynamically Generated Stylesheet
 * --------------------------------------
 * Dynamically generated stylesheet for cpp-qt
 * CSS class: source-cpp-qt, CSS id: 
 * GeSHi (C) 2004 - 2007 Nigel McNie, 2007 - 2008 Benny Baumann
 * (http://qbnz.com/highlighter/ and http://geshi.org/)
 * --------------------------------------
 */
.cpp-qt.source-cpp-qt .de1, .cpp-qt.source-cpp-qt .de2 {font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;font-family: monospace, monospace;}
.cpp-qt.source-cpp-qt  {font-family:monospace;}
.cpp-qt.source-cpp-qt .imp {font-weight: bold; color: red;}
.cpp-qt.source-cpp-qt li, .cpp-qt.source-cpp-qt .li1 {font-weight: normal; vertical-align:top;}
.cpp-qt.source-cpp-qt .ln {width:1px;text-align:right;margin:0;padding:0 2px;vertical-align:top;}
.cpp-qt.source-cpp-qt .li2 {font-weight: bold; vertical-align:top;}
.cpp-qt.source-cpp-qt .kw1 {color: #000000; font-weight:bold;}
.cpp-qt.source-cpp-qt .kw2 {color: #0057AE;}
.cpp-qt.source-cpp-qt .kw3 {color: #2B74C7;}
.cpp-qt.source-cpp-qt .kw4 {color: #0057AE;}
.cpp-qt.source-cpp-qt .kw5 {color: #22aadd;}
.cpp-qt.source-cpp-qt .co1 {color: #888888;}
.cpp-qt.source-cpp-qt .co2 {color: #006E28;}
.cpp-qt.source-cpp-qt .coMULTI {color: #888888; font-style: italic;}
.cpp-qt.source-cpp-qt .es0 {color: #000099; font-weight: bold;}
.cpp-qt.source-cpp-qt .es1 {color: #000099; font-weight: bold;}
.cpp-qt.source-cpp-qt .es2 {color: #660099; font-weight: bold;}
.cpp-qt.source-cpp-qt .es3 {color: #660099; font-weight: bold;}
.cpp-qt.source-cpp-qt .es4 {color: #660099; font-weight: bold;}
.cpp-qt.source-cpp-qt .es5 {color: #006699; font-weight: bold;}
.cpp-qt.source-cpp-qt .br0 {color: #006E28;}
.cpp-qt.source-cpp-qt .sy0 {color: #006E28;}
.cpp-qt.source-cpp-qt .st0 {color: #BF0303;}
.cpp-qt.source-cpp-qt .nu0 {color: #B08000;}
.cpp-qt.source-cpp-qt .nu6 {color: #208080;}
.cpp-qt.source-cpp-qt .nu8 {color: #208080;}
.cpp-qt.source-cpp-qt .nu12 {color: #208080;}
.cpp-qt.source-cpp-qt .nu16 {color:#800080;}
.cpp-qt.source-cpp-qt .nu17 {color:#800080;}
.cpp-qt.source-cpp-qt .nu18 {color:#800080;}
.cpp-qt.source-cpp-qt .nu19 {color:#800080;}
.cpp-qt.source-cpp-qt .me1 {color: #2B74C7;}
.cpp-qt.source-cpp-qt .me2 {color: #2B74C7;}
.cpp-qt.source-cpp-qt .me3 {color: #2B74C7;}
.cpp-qt.source-cpp-qt .ln-xtra, .cpp-qt.source-cpp-qt li.ln-xtra, .cpp-qt.source-cpp-qt div.ln-xtra {background-color: #ffc;}
.cpp-qt.source-cpp-qt span.xtra { display:block; }

/*]]>*/
</style><!--[if lt IE 7]><style type="text/css">body{behavior:url("/skins/vector/csshover.min.htc")}</style><![endif]--></head>
<body class="mediawiki ltr sitedir-ltr ns-0 ns-subject page-Transition_from_Qt_4_x_to_Qt5 skin-vector action-view vector-animateLayout">
		<div id="mw-page-base" class="noprint"></div>
		<div id="mw-head-base" class="noprint"></div>
		<div id="content" class="mw-body" role="main">
			<a id="top"></a>
			<div id="mw-js-message" style="display:none;"></div>
						<h1 id="firstHeading" class="firstHeading" lang="en"><span dir="auto">Transition from Qt 4.x to Qt5</span></h1>
						<div id="bodyContent">
								<div id="siteSub">From Qt Wiki</div>
								<div id="contentSub"><div id="mw-revision-info">Revision as of 20:29, 5 September 2015 by <a href="http://wiki.qt.io/index.php?title=User:SGaist&amp;action=edit&amp;redlink=1" class="new mw-userlink" title="User:SGaist (page does not exist)">SGaist</a>  <span class="mw-usertoollinks">(<a href="http://wiki.qt.io/index.php?title=User_talk:SGaist&amp;action=edit&amp;redlink=1" class="new" title="User talk:SGaist (page does not exist)">Talk</a> | <a href="http://wiki.qt.io/Special:Contributions/SGaist" title="Special:Contributions/SGaist">contribs</a>)</span></div><br />
				<div id="mw-revision-nav">(<a href="http://wiki.qt.io/index.php?title=Transition_from_Qt_4.x_to_Qt5&amp;diff=prev&amp;oldid=19502" title="Transition from Qt 4.x to Qt5">diff</a>) <a href="http://wiki.qt.io/index.php?title=Transition_from_Qt_4.x_to_Qt5&amp;direction=prev&amp;oldid=19502" title="Transition from Qt 4.x to Qt5">← Older revision</a> | Latest revision (diff) | Newer revision → (diff)</div></div>
												<div id="jump-to-nav" class="mw-jump">
					Jump to:					<a href="#mw-navigation">navigation</a>, 					<a href="#p-search">search</a>
				</div>
				<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr"><div style="background:#eeeeee;padding:2px;">
<p><strong class="selflink">En</strong>
<span style="color:#ccc;">Ar</span>
<span style="color:#ccc;">Bg</span>
<span style="color:#ccc;">De</span>
<span style="color:#ccc;">El</span>
<span style="color:#ccc;">Es</span>
<span style="color:#ccc;">Fa</span>
<span style="color:#ccc;">Fi</span>
<span style="color:#ccc;">Fr</span>
<span style="color:#ccc;">Hi</span>
<span style="color:#ccc;">Hu</span>
<span style="color:#ccc;">It</span>
<span style="color:#ccc;">Ja</span>
<span style="color:#ccc;">Kn</span>
<span style="color:#ccc;">Ko</span>
<span style="color:#ccc;">Ms</span>
<span style="color:#ccc;">Nl</span>
<span style="color:#ccc;">Pl</span>
<span style="color:#ccc;">Pt</span>
<span style="color:#ccc;">Ru</span>
<span style="color:#ccc;">Th</span>
<span style="color:#ccc;">Tr</span>
<span style="color:#ccc;">Uk</span>
<span style="color:#ccc;">Zh</span>
</p>
</div>
<p>The transition from Qt 4.x to Qt 5 is not expected to be significant. However, the "modularization" of the Qt code base requires some amount of changes to project configuration, such as use of "headers", and configuration of project build settings (such as changes to the *.pro files).
</p><p>Qt Creator (master) is compiled using Qt 4 and Qt 5; you can refer to its sources to get an overview of what is required to port an application and keep the sources backwards compatible to Qt 4.
</p>
<div id="toc" class="toc"><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#QtWidgets_as_a_Separate_Module"><span class="tocnumber">1</span> <span class="toctext">QtWidgets as a Separate Module</span></a>
<ul>
<li class="toclevel-2 tocsection-2"><a href="#example_compile_time_errors"><span class="tocnumber">1.1</span> <span class="toctext">example compile time errors</span></a></li>
<li class="toclevel-2 tocsection-3"><a href="#Solution"><span class="tocnumber">1.2</span> <span class="toctext">Solution</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-4"><a href="#QtWebKitWidgets_is_also_a_separate_module:"><span class="tocnumber">2</span> <span class="toctext">QtWebKitWidgets is also a separate module:</span></a>
<ul>
<li class="toclevel-2 tocsection-5"><a href="#example_compile_time_errors_2"><span class="tocnumber">2.1</span> <span class="toctext">example compile time errors</span></a></li>
<li class="toclevel-2 tocsection-6"><a href="#Solution_2"><span class="tocnumber">2.2</span> <span class="toctext">Solution</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-7"><a href="#QPrinter_Doesn.27t_Work"><span class="tocnumber">3</span> <span class="toctext">QPrinter Doesn't Work</span></a></li>
<li class="toclevel-1 tocsection-8"><a href="#toAscii.28.29_and_fromAscii.28.29_Methods_are_deprecated"><span class="tocnumber">4</span> <span class="toctext">toAscii() and fromAscii() Methods are deprecated</span></a></li>
<li class="toclevel-1 tocsection-9"><a href="#QCoreApplication::UnicodeUTF8_is_deprecated"><span class="tocnumber">5</span> <span class="toctext">QCoreApplication::UnicodeUTF8 is deprecated</span></a></li>
<li class="toclevel-1 tocsection-10"><a href="#QWorkspace_is_deprecated"><span class="tocnumber">6</span> <span class="toctext">QWorkspace is deprecated</span></a></li>
<li class="toclevel-1 tocsection-11"><a href="#QDrag_Problems"><span class="tocnumber">7</span> <span class="toctext">QDrag Problems</span></a></li>
<li class="toclevel-1 tocsection-12"><a href="#qFindChildren_is_deprecated"><span class="tocnumber">8</span> <span class="toctext">qFindChildren is deprecated</span></a></li>
<li class="toclevel-1 tocsection-13"><a href="#qVariantValue_is_deprecated"><span class="tocnumber">9</span> <span class="toctext">qVariantValue is deprecated</span></a></li>
<li class="toclevel-1 tocsection-14"><a href="#qVariantCanConvert_is_deprecated"><span class="tocnumber">10</span> <span class="toctext">qVariantCanConvert is deprecated</span></a></li>
<li class="toclevel-1 tocsection-15"><a href="#Qt::escape_is_deprecated"><span class="tocnumber">11</span> <span class="toctext">Qt::escape is deprecated</span></a></li>
<li class="toclevel-1 tocsection-16"><a href="#QDesktopServices::storageLocation_deprecated"><span class="tocnumber">12</span> <span class="toctext">QDesktopServices::storageLocation deprecated</span></a></li>
<li class="toclevel-1 tocsection-17"><a href="#CONFIG.2B.3Dqtestlib_is_deprecated"><span class="tocnumber">13</span> <span class="toctext">CONFIG+=qtestlib is deprecated</span></a></li>
<li class="toclevel-1 tocsection-18"><a href="#QWeakPointer_quirks"><span class="tocnumber">14</span> <span class="toctext">QWeakPointer quirks</span></a></li>
<li class="toclevel-1 tocsection-19"><a href="#QtConcurrent_Library_is_Missing.3F"><span class="tocnumber">15</span> <span class="toctext">QtConcurrent Library is Missing?</span></a></li>
<li class="toclevel-1 tocsection-20"><a href="#Fixing_.23include.3C.3E_Headers"><span class="tocnumber">16</span> <span class="toctext">Fixing #include&lt;&gt; Headers</span></a></li>
<li class="toclevel-1 tocsection-21"><a href="#Plugin_loading"><span class="tocnumber">17</span> <span class="toctext">Plugin loading</span></a></li>
<li class="toclevel-1 tocsection-22"><a href="#Deploying_to_systems_without_C.2B.2B11"><span class="tocnumber">18</span> <span class="toctext">Deploying to systems without C++11</span></a></li>
<li class="toclevel-1 tocsection-23"><a href="#QTimer_is_no_longer_accurate_to_the_millisecond_by_default"><span class="tocnumber">19</span> <span class="toctext">QTimer is no longer accurate to the millisecond by default</span></a></li>
<li class="toclevel-1 tocsection-24"><a href="#QUrl_addQueryItem_moved_to_QUrlQuery"><span class="tocnumber">20</span> <span class="toctext">QUrl addQueryItem moved to QUrlQuery</span></a></li>
<li class="toclevel-1 tocsection-25"><a href="#QAbstractItemModel_changes"><span class="tocnumber">21</span> <span class="toctext">QAbstractItemModel changes</span></a></li>
<li class="toclevel-1 tocsection-26"><a href="#Recommended_Reading"><span class="tocnumber">22</span> <span class="toctext">Recommended Reading</span></a></li>
</ul>
</div>

<h2><span class="mw-headline" id="QtWidgets_as_a_Separate_Module">QtWidgets as a Separate Module</span></h2>
<h3><span class="mw-headline" id="example_compile_time_errors">example compile time errors</span></h3>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="cpp-qt source-cpp-qt"><pre class="de1">error<span class="sy0">:</span> <span class="kw5">QMainWindow</span><span class="sy0">:</span> No such file or directory
error<span class="sy0">:</span> <span class="kw5">QToolButton</span><span class="sy0">:</span> No such file or directory
error<span class="sy0">:</span> <span class="kw5">QWidget</span><span class="sy0">:</span> No such file or directory</pre></div></div>
<h3><span class="mw-headline" id="Solution">Solution</span></h3>
<p>Add this in your *.pro file:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="cpp-qt source-cpp-qt"><pre class="de1">QT <span class="sy0">+=</span> widgets</pre></div></div>
<p>Change all instances of
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="cpp-qt source-cpp-qt"><pre class="de1"><span class="co2">#include &lt;QtGui&gt;</span></pre></div></div>
<p>to
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="cpp-qt source-cpp-qt"><pre class="de1"><span class="co2">#include &lt;QtWidgets&gt;</span></pre></div></div>
<p>The code should work now, though sometimes you may require to be more explicit:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="cpp-qt source-cpp-qt"><pre class="de1"><span class="co2">#include &lt;QtWidgets/QToolButton&gt;</span></pre></div></div>
<h2><span class="mw-headline" id="QtWebKitWidgets_is_also_a_separate_module:">QtWebKitWidgets is also a separate module:</span></h2>
<h3><span class="mw-headline" id="example_compile_time_errors_2">example compile time errors</span></h3>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="cpp-qt source-cpp-qt"><pre class="de1">error<span class="sy0">:</span> invalid use of incomplete type <span class="st0">'class QWebFrame'</span>
error<span class="sy0">:</span> forward declaration of <span class="st0">'class QWebFrame'</span></pre></div></div>
<h3><span class="mw-headline" id="Solution_2">Solution</span></h3>
<p>Add this in your *.pro file:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="cpp-qt source-cpp-qt"><pre class="de1">QT <span class="sy0">+=</span> webkitwidgets</pre></div></div>
<p><b>Note</b>: when you have QT += webkitwidgets you don't need QT += widgets
</p><p>In addition, replace all instances of
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="cpp-qt source-cpp-qt"><pre class="de1"><span class="co2">#include &lt;QtWebKit&gt;</span></pre></div></div>
<p>to
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="cpp-qt source-cpp-qt"><pre class="de1"><span class="co2">#include &lt;QtWebKitWidgets&gt;</span></pre></div></div>
<p>You can try this by porting a <a rel="nofollow" class="external text" href="http://qt.gitorious.org/qt-labs/graphics-dojo/trees/c8d0c381b994d7417863832929cc4c3f710f2db5/htmleditor">WYSISWYG html editor</a> from Qt 4 to Qt 5.
</p>
<h2><span class="mw-headline" id="QPrinter_Doesn.27t_Work">QPrinter Doesn't Work</span></h2>
<p>If your code has the following lines:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="cpp-qt source-cpp-qt"><pre class="de1"><span class="co2">#include &lt;QPrinter&gt;</span>
<span class="co2">#include &lt;QPrintDialog&gt;</span></pre></div></div>
<p>add the following to your project file:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="cpp-qt source-cpp-qt"><pre class="de1">QT <span class="sy0">+=</span> printsupport</pre></div></div>
<p>Again, sometimes it may not work and you would need to be explicit:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="cpp-qt source-cpp-qt"><pre class="de1"><span class="co2">#include &lt;QtPrintSupport/QPrinter&gt;</span>
<span class="co2">#include &lt;QtPrintSupport/QPrintDialog&gt;</span></pre></div></div>
<h2><span class="mw-headline" id="toAscii.28.29_and_fromAscii.28.29_Methods_are_deprecated">toAscii() and fromAscii() Methods are deprecated</span></h2>
<p>Replace all instances of 
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="cpp-qt source-cpp-qt"><pre class="de1">fromAscii<span class="br0">&#40;</span><span class="br0">&#41;</span>
toAscii<span class="br0">&#40;</span><span class="br0">&#41;</span></pre></div></div>
<p>to
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="cpp-qt source-cpp-qt"><pre class="de1">fromLatin1<span class="br0">&#40;</span><span class="br0">&#41;</span>
toLatin1<span class="br0">&#40;</span><span class="br0">&#41;</span></pre></div></div>
<p>For example, given the Qt 4 code
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="cpp-qt source-cpp-qt"><pre class="de1"><span class="kw5">QByteArray</span> configfileti <span class="sy0">=</span> TMP_Config.<span class="me1">toAscii</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span></pre></div></div>
<p>you would change to
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="cpp-qt source-cpp-qt"><pre class="de1"><span class="kw5">QByteArray</span> configfileti <span class="sy0">=</span> TMP_Config.<span class="me1">toLatin1</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span></pre></div></div>
<h2><span class="mw-headline" id="QCoreApplication::UnicodeUTF8_is_deprecated">QCoreApplication::UnicodeUTF8 is deprecated</span></h2>
<p>This enum type used to define the 8-bit encoding of character string arguments to translate(). This enum is now obsolete and UTF-8 will be used in all cases. So remove all instances of QCoreApplication::UnicodeUTF8. For example:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="cpp-qt source-cpp-qt"><pre class="de1">Href_Gui<span class="sy0">-&gt;</span><span class="me3">setWindowTitle</span><span class="br0">&#40;</span><span class="kw5">QApplication</span><span class="sy0">::</span><span class="me2">translate</span><span class="br0">&#40;</span><span class="st0">&quot;Href_Gui&quot;</span><span class="sy0">,</span> <span class="st0">&quot;Url / www&quot;</span><span class="sy0">,</span> <span class="nu0">0</span><span class="sy0">,</span> <span class="kw5">QApplication</span><span class="sy0">::</span><span class="me2">UnicodeUTF8</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span>
label<span class="sy0">-&gt;</span><span class="me3">setText</span><span class="br0">&#40;</span><span class="kw5">QApplication</span><span class="sy0">::</span><span class="me2">translate</span><span class="br0">&#40;</span><span class="st0">&quot;Href_Gui&quot;</span><span class="sy0">,</span> <span class="st0">&quot;Text:&quot;</span><span class="sy0">,</span> <span class="nu0">0</span><span class="sy0">,</span> <span class="kw5">QApplication</span><span class="sy0">::</span><span class="me2">UnicodeUTF8</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span>
label_2<span class="sy0">-&gt;</span><span class="me3">setText</span><span class="br0">&#40;</span><span class="kw5">QApplication</span><span class="sy0">::</span><span class="me2">translate</span><span class="br0">&#40;</span><span class="st0">&quot;Href_Gui&quot;</span><span class="sy0">,</span> <span class="st0">&quot;Url:&quot;</span><span class="sy0">,</span> <span class="nu0">0</span><span class="sy0">,</span> <span class="kw5">QApplication</span><span class="sy0">::</span><span class="me2">UnicodeUTF8</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span>
label_3<span class="sy0">-&gt;</span><span class="me3">setText</span><span class="br0">&#40;</span><span class="kw5">QApplication</span><span class="sy0">::</span><span class="me2">translate</span><span class="br0">&#40;</span><span class="st0">&quot;Href_Gui&quot;</span><span class="sy0">,</span> <span class="st0">&quot;Target / Name:&quot;</span><span class="sy0">,</span> <span class="nu0">0</span><span class="sy0">,</span> <span class="kw5">QApplication</span><span class="sy0">::</span><span class="me2">UnicodeUTF8</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span></pre></div></div>
<p>to
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="cpp-qt source-cpp-qt"><pre class="de1">Href_Gui<span class="sy0">-&gt;</span><span class="me3">setWindowTitle</span><span class="br0">&#40;</span><span class="kw5">QApplication</span><span class="sy0">::</span><span class="me2">translate</span><span class="br0">&#40;</span><span class="st0">&quot;Href_Gui&quot;</span><span class="sy0">,</span> <span class="st0">&quot;Url / www&quot;</span><span class="sy0">,</span> <span class="nu0">0</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span>
label<span class="sy0">-&gt;</span><span class="me3">setText</span><span class="br0">&#40;</span><span class="kw5">QApplication</span><span class="sy0">::</span><span class="me2">translate</span><span class="br0">&#40;</span><span class="st0">&quot;Href_Gui&quot;</span><span class="sy0">,</span> <span class="st0">&quot;Text:&quot;</span><span class="sy0">,</span> <span class="nu0">0</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span>
label_2<span class="sy0">-&gt;</span><span class="me3">setText</span><span class="br0">&#40;</span><span class="kw5">QApplication</span><span class="sy0">::</span><span class="me2">translate</span><span class="br0">&#40;</span><span class="st0">&quot;Href_Gui&quot;</span><span class="sy0">,</span> <span class="st0">&quot;Url:&quot;</span><span class="sy0">,</span> <span class="nu0">0</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span>
label_3<span class="sy0">-&gt;</span><span class="me3">setText</span><span class="br0">&#40;</span><span class="kw5">QApplication</span><span class="sy0">::</span><span class="me2">translate</span><span class="br0">&#40;</span><span class="st0">&quot;Href_Gui&quot;</span><span class="sy0">,</span> <span class="st0">&quot;Target / Name:&quot;</span><span class="sy0">,</span> <span class="nu0">0</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span></pre></div></div>
<h2><span class="mw-headline" id="QWorkspace_is_deprecated">QWorkspace is deprecated</span></h2>
<p>This class is obsolete and was replaced by the QMdiArea class in Qt 4.3. In Qt 5 QWorkspace has been removed. The new class has a similar API to QWorkspace and porting it only involved changing the names of a few methods, signals, and slots. 
</p><p>replace
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="cpp-qt source-cpp-qt"><pre class="de1"><span class="co2">#include &lt;QWorkspace&gt;</span></pre></div></div>
<p>with
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="cpp-qt source-cpp-qt"><pre class="de1"><span class="co2">#include &lt;QMdiArea&gt;</span></pre></div></div>
<h2><span class="mw-headline" id="QDrag_Problems">QDrag Problems</span></h2>
<p>Apps that has drop and drag functionality will need some tweaking. A line such as
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="cpp-qt source-cpp-qt"><pre class="de1"><span class="kw5">QDrag</span> <span class="sy0">*</span>drag <span class="sy0">=</span> <span class="kw1">new</span> <span class="kw5">QDrag</span><span class="br0">&#40;</span>event<span class="sy0">-&gt;</span><span class="me3">widget</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span></pre></div></div>
<p>in Qt 5 will generate the error
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="cpp-qt source-cpp-qt"><pre class="de1">error<span class="sy0">:</span> no matching function <span class="kw1">for</span> call to <span class="st0">'QDrag::QDrag(QWidget*)'</span></pre></div></div>
<p>To fix this add among the includes:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="cpp-qt source-cpp-qt"><pre class="de1"><span class="co2">#include &lt;QWidget&gt;</span></pre></div></div>
<h2><span class="mw-headline" id="qFindChildren_is_deprecated">qFindChildren is deprecated</span></h2>
<p>An error will pop of this fashion:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="cpp-qt source-cpp-qt"><pre class="de1">error<span class="sy0">:</span> <span class="st0">'qFindChildren'</span> was not declared in <span class="kw1">this</span> scope</pre></div></div>
<p>To solve this you replace qFindChildren with findChildren, for example in
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="cpp-qt source-cpp-qt"><pre class="de1">toString<span class="br0">&#40;</span><span class="kw4">const</span> <span class="kw5">QObject</span><span class="sy0">*</span> obj<span class="sy0">,</span> <span class="kw4">int</span> indentLevel<span class="br0">&#41;</span> <span class="kw4">const</span> <span class="br0">&#123;</span>
<span class="br0">&#91;</span>…<span class="br0">&#93;</span>
 <span class="coMULTI">/* Query over QObjects */</span>
 <span class="kw1">if</span> <span class="br0">&#40;</span>m_children<span class="br0">&#41;</span> <span class="br0">&#123;</span>
 <span class="kw5">QList</span><span class="sy0">&lt;</span><span class="kw5">QObject</span><span class="sy0">*&gt;</span> childlist <span class="sy0">=</span> qFindChildren<span class="sy0">&lt;</span><span class="kw5">QObject</span><span class="sy0">*&gt;</span><span class="br0">&#40;</span>obj<span class="sy0">,</span> <span class="kw5">QString</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span>
<span class="br0">&#91;</span>…<span class="br0">&#93;</span></pre></div></div>
<p>replace
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="cpp-qt source-cpp-qt"><pre class="de1"><span class="kw5">QList</span><span class="sy0">&lt;</span><span class="kw5">QObject</span><span class="sy0">*&gt;</span> childlist <span class="sy0">=</span> qFindChildren<span class="sy0">&lt;</span><span class="kw5">QObject</span><span class="sy0">*&gt;</span><span class="br0">&#40;</span>obj<span class="sy0">,</span> <span class="kw5">QString</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span></pre></div></div>
<p>with
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="cpp-qt source-cpp-qt"><pre class="de1"><span class="kw5">QList</span><span class="sy0">&lt;</span><span class="kw5">QObject</span><span class="sy0">*&gt;</span> childlist <span class="sy0">=</span> obj<span class="sy0">-&gt;</span><span class="me3">findChildren</span><span class="sy0">&lt;</span><span class="kw5">QObject</span><span class="sy0">*&gt;</span><span class="br0">&#40;</span><span class="kw5">QString</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span></pre></div></div>
<p><br />
<a rel="nofollow" class="external text" href="https://bugs.webkit.org/attachment.cgi?id=82025&amp;action=diff">source</a>
</p>
<h2><span class="mw-headline" id="qVariantValue_is_deprecated">qVariantValue is deprecated</span></h2>
<p>Your compiler will say
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="cpp-qt source-cpp-qt"><pre class="de1">error<span class="sy0">:</span> <span class="st0">'qVariantValue'</span> was not declared in <span class="kw1">this</span> scope</pre></div></div>
<p>This function is equivalent to QVariant::value&lt;T&gt;(value). Therefore if given a QVariant val rewrite the line
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="cpp-qt source-cpp-qt"><pre class="de1"><span class="kw5">QTime</span> t <span class="sy0">=</span> qVariantValue<span class="sy0">&lt;</span><span class="kw5">QTime</span><span class="sy0">&gt;</span><span class="br0">&#40;</span>val<span class="br0">&#41;</span><span class="sy0">;</span></pre></div></div>
<p>to
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="cpp-qt source-cpp-qt"><pre class="de1"><span class="kw5">QTime</span> t <span class="sy0">=</span> val.<span class="me1">value</span><span class="sy0">&lt;</span><span class="kw5">QTime</span><span class="sy0">&gt;</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span></pre></div></div>
<p>This QTime enclosed in the angled brackets lets the compiler know what QVariant will return. However, if the variable is not a QVariable the type enclosed in the angled brackets should not be used(doing so will result in a vague compile time error). So given that m_color is of type QColor you will rewrite
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="cpp-qt source-cpp-qt"><pre class="de1">s.<span class="me1">setValue</span><span class="br0">&#40;</span><span class="st0">&quot;color/favorite&quot;</span><span class="sy0">,</span> qVariantValue<span class="sy0">&lt;</span><span class="kw5">QColor</span><span class="sy0">&gt;</span><span class="br0">&#40;</span>m_color<span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span></pre></div></div>
<p>to
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="cpp-qt source-cpp-qt"><pre class="de1">s.<span class="me1">setValue</span><span class="br0">&#40;</span><span class="st0">&quot;color/favorite&quot;</span><span class="sy0">,</span> m_color.<span class="me1">value</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span></pre></div></div>
<p><a rel="nofollow" class="external text" href="http://stackoverflow.com/questions/14919867/qvariantvalue-is-qt-deprecated-what-is-the-replacement">source</a>
</p>
<h2><span class="mw-headline" id="qVariantCanConvert_is_deprecated">qVariantCanConvert is deprecated</span></h2>
<p>replace 
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="cpp-qt source-cpp-qt"><pre class="de1">Q_ASSERT<span class="br0">&#40;</span>qVariantCanConvert<span class="sy0">&lt;</span><span class="kw5">QString</span><span class="sy0">&gt;</span><span class="br0">&#40;</span>variant<span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span>
Q_ASSERT<span class="br0">&#40;</span>qVariantCanConvert<span class="sy0">&lt;</span><span class="kw5">QSize</span><span class="sy0">&gt;</span><span class="br0">&#40;</span>variant<span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span>
Q_ASSERT<span class="br0">&#40;</span>qVariantCanConvert<span class="sy0">&lt;</span><span class="kw5">QFont</span><span class="sy0">&gt;</span><span class="br0">&#40;</span>fontVariant<span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span></pre></div></div>
<p>with
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="cpp-qt source-cpp-qt"><pre class="de1">Q_ASSERT<span class="br0">&#40;</span>variant.<span class="me1">canConvert</span><span class="br0">&#40;</span><span class="kw5">QMetaType</span><span class="sy0">::</span><span class="kw5">QString</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span>
Q_ASSERT<span class="br0">&#40;</span>variant.<span class="me1">canConvert</span><span class="br0">&#40;</span><span class="kw5">QMetaType</span><span class="sy0">::</span><span class="kw5">QSize</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span>
Q_ASSERT<span class="br0">&#40;</span>fontVariant.<span class="me1">canConvert</span><span class="br0">&#40;</span><span class="kw5">QMetaType</span><span class="sy0">::</span><span class="kw5">QFont</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span></pre></div></div>
<h2><span class="mw-headline" id="Qt::escape_is_deprecated">Qt::escape is deprecated</span></h2>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="cpp-qt source-cpp-qt"><pre class="de1">error<span class="sy0">:</span> <span class="st0">'escape'</span> is not a member of <span class="st0">'Qt'</span></pre></div></div>
<p>So you would change the following block:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="cpp-qt source-cpp-qt"><pre class="de1"><span class="kw1">if</span> <span class="br0">&#40;</span>result <span class="sy0">==</span> <span class="kw5">QString</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span>
    result <span class="sy0">=</span> <span class="kw5">Qt</span><span class="sy0">::</span><span class="me2">escape</span><span class="br0">&#40;</span>val.<span class="me1">toString</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span>
<span class="kw1">else</span>
    result <span class="sy0">=</span> <span class="kw5">Qt</span><span class="sy0">::</span><span class="me2">escape</span><span class="br0">&#40;</span>result<span class="br0">&#41;</span><span class="sy0">;</span>
<span class="kw1">return</span> result<span class="sy0">;</span></pre></div></div>
<p>to
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="cpp-qt source-cpp-qt"><pre class="de1"><span class="kw1">if</span> <span class="br0">&#40;</span>result <span class="sy0">==</span> <span class="kw5">QString</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span>
    result <span class="sy0">=</span> <span class="kw5">QString</span><span class="br0">&#40;</span>val.<span class="me1">toString</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span>.<span class="me1">toHtmlEscaped</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
<span class="kw1">else</span>
    result <span class="sy0">=</span> <span class="kw5">QString</span><span class="br0">&#40;</span>result<span class="br0">&#41;</span>.<span class="me1">toHtmlEscaped</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
<span class="kw1">return</span> result<span class="sy0">;</span></pre></div></div>
<p>this procedure can be automated by a <a rel="nofollow" class="external text" href="http://www.kdab.com/automated-porting-from-qt-4-to-qt-5/">porting tool</a> from KDAB.
</p>
<h2><span class="mw-headline" id="QDesktopServices::storageLocation_deprecated">QDesktopServices::storageLocation deprecated</span></h2>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="cpp-qt source-cpp-qt"><pre class="de1">error<span class="sy0">:</span> <span class="st0">'storageLocation'</span> is not a member of <span class="st0">'QDesktopServices'</span>
error<span class="sy0">:</span> <span class="st0">'DataLocation'</span> is not a member of <span class="st0">'QDesktopServices'</span></pre></div></div>
<p>Use QStandardPaths::StandardLocation:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="cpp-qt source-cpp-qt"><pre class="de1"><span class="kw5">QString</span> path <span class="sy0">=</span> s.<span class="me1">value</span><span class="br0">&#40;</span><span class="st0">&quot;db.path&quot;</span><span class="sy0">,</span> <span class="kw5">QDesktopServices</span><span class="sy0">::</span><span class="me2">storageLocation</span><span class="br0">&#40;</span><span class="kw5">QDesktopServices</span><span class="sy0">::</span><span class="me2">DataLocation</span><span class="br0">&#41;</span><span class="br0">&#41;</span>.<span class="me1">toString</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span></pre></div></div>
<p>to
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="cpp-qt source-cpp-qt"><pre class="de1"><span class="kw5">QString</span> path <span class="sy0">=</span> s.<span class="me1">value</span><span class="br0">&#40;</span><span class="st0">&quot;db.path&quot;</span><span class="sy0">,</span> QStandardPaths<span class="sy0">::</span><span class="me2">standardLocations</span><span class="br0">&#40;</span>QStandardPaths<span class="sy0">::</span><span class="me2">DataLocation</span><span class="br0">&#41;</span><span class="br0">&#41;</span>.<span class="me1">toString</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span></pre></div></div>
<p><a rel="nofollow" class="external text" href="http://doc.qt.io/qt-5/QDesktopServices.html">source</a>
</p>
<h2><span class="mw-headline" id="CONFIG.2B.3Dqtestlib_is_deprecated">CONFIG+=qtestlib is deprecated</span></h2>
<p>If you have the above line in your project file the compiler will warn you in the compile window, nonetheless the code will still run as usual:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="cpp-qt source-cpp-qt"><pre class="de1">Project WARNING<span class="sy0">:</span> CONFIG<span class="sy0">+=</span>qtestlib is deprecated. <span class="me1">Use</span> QT<span class="sy0">+=</span>testlib instead.</pre></div></div>
<h2><span class="mw-headline" id="QWeakPointer_quirks">QWeakPointer quirks</span></h2>
<p>A code block like
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="cpp-qt source-cpp-qt"><pre class="de1">quint64 decodedPointer <span class="sy0">=</span> line.<span class="me1">toULongLong</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
MetaData<span class="sy0">*</span> md <span class="sy0">=</span> <span class="kw2">reinterpret_cast</span><span class="sy0">&lt;</span>MetaData<span class="sy0">*&gt;</span><span class="br0">&#40;</span>decodedPointer<span class="br0">&#41;</span><span class="sy0">;</span>
<span class="kw5">QWeakPointer</span><span class="sy0">&lt;</span>MetaData<span class="sy0">&gt;</span> wp<span class="br0">&#40;</span>md<span class="br0">&#41;</span><span class="sy0">;</span></pre></div></div>
<p>results in
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="cpp-qt source-cpp-qt"><pre class="de1">error<span class="sy0">:</span> no matching function <span class="kw1">for</span> call to <span class="st0">'QWeakPointer&lt;MetaData&gt;::QWeakPointer(MetaData*&amp;)'</span></pre></div></div>
<p>To fix this add to the project file:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="cpp-qt source-cpp-qt"><pre class="de1">DEFINES <span class="sy0">+=</span> QT_DISABLE_DEPRECATED_BEFORE<span class="sy0">=</span><span class="nu0">0</span></pre></div></div>
<p><a rel="nofollow" class="external text" href="http://forum.qt.io/viewthread/27510">source</a>
</p>
<h2><span class="mw-headline" id="QtConcurrent_Library_is_Missing.3F">QtConcurrent Library is Missing?</span></h2>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="cpp-qt source-cpp-qt"><pre class="de1">C<span class="sy0">:</span>\<span class="kw5">Qt</span>\5.0.2\5.0.2\mingw47_32\include\QtConcurrent\qtconcurrentthreadengine.<span class="me1">h</span><span class="sy0">:</span><span class="nu0">133</span><span class="sy0">:</span> error<span class="sy0">:</span> undefined reference to 
`_imp___ZN12QtConcurrent16ThreadEngineBaseD2Ev<span class="st0">'</span></pre></div></div>
<p>In Qt 4, QtConcurrent was part of QtCore, so there was no need to include specific headers. This is no longer the case with Qt 5. If your source code have lines like
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="cpp-qt source-cpp-qt"><pre class="de1">m_current <span class="sy0">=</span> QtConcurrent<span class="sy0">::</span><span class="me2">blockingMappedReduced</span><span class="br0">&#40;</span>slices<span class="sy0">,</span> functor<span class="sy0">,</span> stitchReduce<span class="sy0">,</span> QtConcurrent<span class="sy0">::</span><span class="me2">UnorderedReduce</span> <span class="br0">&#41;</span><span class="sy0">;</span></pre></div></div>
<p>You will need to include the header:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="cpp-qt source-cpp-qt"><pre class="de1"><span class="co2">#include &lt;QtConcurrent/QtConcurrent&gt;</span></pre></div></div>
<p>and add the following line to your project file:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="cpp-qt source-cpp-qt"><pre class="de1">QT<span class="sy0">+=</span> concurrent</pre></div></div>
<h2><span class="mw-headline" id="Fixing_.23include.3C.3E_Headers">Fixing #include&lt;&gt; Headers</span></h2>
<p>A Perl script "fixqt4headers.pl" exists in qtbase/bin/. that should be run on source code using Qt that corrects the #include&lt;&gt; directives for Qt components to also consider the module name.
</p>
<h2><span class="mw-headline" id="Plugin_loading">Plugin loading</span></h2>
<p>The Q_EXPORT_PLUGIN,Q_EXPORT_PLUGIN2 macros have been deprecated in favor of the new Q_PLUGIN_METADATA macro. The advantage of the new system is that it allows Qt to query the metadata for the plugin without actually dlopen'ing it. This greatly improves performance and reliability of the plugin system.
</p><p>The new Q_PLUGIN_METADATA macro is included next to the Q_OBJECT macro in the QObject derived class that is returned when loading the plugin. It contains the plugins IID and a filename pointing to a json file containing the metadata for the plugin. The json file is compiled into the plugin and does not need to be installed.
</p><p>An example on how to change your plugins can be found by looking at the patch that changes the Gif image format plugin, see <a rel="nofollow" class="external free" href="http://code.qt.io/cgit/qt/qtbase.git/commit/?id=963b4c1647299fd023ddbe7c4a25ac404e303c5d">http://code.qt.io/cgit/qt/qtbase.git/commit/?id=963b4c1647299fd023ddbe7c4a25ac404e303c5d</a>
</p>
<h2><span class="mw-headline" id="Deploying_to_systems_without_C.2B.2B11">Deploying to systems without C++11</span></h2>
<p>When Qt is built from source code on a system with C++11 installed, the Qt libraries/frameworks are linked against the system's C++11 library (libc). This means that the Qt libraries/frameworks are not deployable to systems without C++11 installed (such as out-of-the-box Mac OS X 10.6). To be able to deploy to systems that only support the older C++ standard (libstdc++), build Qt from source code with the -no-c++11 configure option. 
</p>
<h2><span class="mw-headline" id="QTimer_is_no_longer_accurate_to_the_millisecond_by_default">QTimer is no longer accurate to the millisecond by default</span></h2>
<p>QTimer has now 3 accuracy types, with a new default behaviour:
</p>
<ul>
<li> The new default type is Qt::CoarseTimer which, to reduce power/CPU consumption, allow <i>5% difference</i> between requested time and actual one, and even <i>allow the timer to fire before</i> the requested time.
</li>
<li> The former one is Qt::PreciseTimer (to the millisecond, never before the requested time).
</li>
<li> A third one is Qt::VeryCoarseTimer and allow a 1 second difference
</li>
</ul>
<h2><span class="mw-headline" id="QUrl_addQueryItem_moved_to_QUrlQuery">QUrl addQueryItem moved to QUrlQuery</span></h2>
<p>If you have:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="cpp-qt source-cpp-qt"><pre class="de1"><span class="kw5">QUrl</span> url<span class="sy0">;</span>
<span class="co1">// …</span>
url.<span class="me1">addQueryItem</span><span class="br0">&#40;</span>key<span class="sy0">,</span> value<span class="br0">&#41;</span><span class="sy0">;</span></pre></div></div>
<p>You will want to change it to
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="cpp-qt source-cpp-qt"><pre class="de1"><span class="kw5">QUrl</span> url<span class="sy0">;</span>
QUrlQuery urlQuery<span class="sy0">;</span>
<span class="co1">// …</span>
urlQuery.<span class="me1">addQueryItem</span><span class="br0">&#40;</span>key<span class="sy0">,</span> value<span class="br0">&#41;</span><span class="sy0">;</span>
&#160;
url.<span class="me1">setUrlQuery</span><span class="br0">&#40;</span>urlQuery<span class="br0">&#41;</span><span class="sy0">;</span></pre></div></div>
<h2><span class="mw-headline" id="QAbstractItemModel_changes">QAbstractItemModel changes</span></h2>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="cpp-qt source-cpp-qt"><pre class="de1"><span class="kw4">void</span> reset<span class="br0">&#40;</span><span class="br0">&#41;</span>
<span class="kw4">void</span> setRoleNames<span class="br0">&#40;</span><span class="kw4">const</span> <span class="kw5">QHash</span><span class="sy0">&lt;</span><span class="kw4">int</span><span class="sy0">,</span> <span class="kw5">QByteArray</span><span class="sy0">&gt;</span> <span class="sy0">&amp;</span> roleNames<span class="br0">&#41;</span></pre></div></div>
<p>both have changed and are now obsolete.
</p><p>See <a rel="nofollow" class="external text" href="http://doc.qt.io/qt-5/qabstractitemmodel-obsolete.html">Obsolete Members for QAbstractItemModel</a>
</p>
<h2><span class="mw-headline" id="Recommended_Reading">Recommended Reading</span></h2>
<ul>
<li> <a rel="nofollow" class="external text" href="http://doc.qt.io/qt-5/sourcebreaks.html">C++ API Changes</a>
</li>
<li> <a rel="nofollow" class="external text" href="http://doc.qt.io/qt-5/portingguide.html">The porting guide</a>
</li>
<li> <a rel="nofollow" class="external text" href="http://www.ics.com/blog/porting-desktop-applications-qt-4-qt-5">Porting Desktop Applications from Qt 4 to Qt 5</a>
</li>
<li> <a rel="nofollow" class="external text" href="http://www.kdab.com/porting-from-qt-4-to-qt-5/">Porting from Qt 4 to Qt 5</a>
</li>
<li> <a rel="nofollow" class="external text" href="http://www.kdab.com/automated-porting-from-qt-4-to-qt-5/">Automated porting from Qt 4 to Qt 5</a>
</li>
</ul>

<!-- 
NewPP limit report
CPU time usage: 0.976 seconds
Real time usage: 0.998 seconds
Preprocessor visited node count: 659/1000000
Preprocessor generated node count: 1719/1000000
Post‐expand include size: 2418/2097152 bytes
Template argument size: 0/2097152 bytes
Highest expansion depth: 3/40
Expensive parser function count: 23/100
-->

<!-- Saved in parser cache with key qtio_wiki:pcache:idhash:2072-0!*!*!!en!*!* and timestamp 20151104074711 and revision id 19502
 -->
</div>								<div class="printfooter">
				Retrieved from "<a href="http://wiki.qt.io/index.php?title=Transition_from_Qt_4.x_to_Qt5&amp;oldid=19502">http://wiki.qt.io/index.php?title=Transition_from_Qt_4.x_to_Qt5&amp;oldid=19502</a>"				</div>
												<div id='catlinks' class='catlinks'><div id="mw-normal-catlinks" class="mw-normal-catlinks"><a href="http://wiki.qt.io/Special:Categories" title="Special:Categories">Categories</a>: <ul><li><a href="http://wiki.qt.io/Category:Developing_with_Qt" title="Category:Developing with Qt">Developing with Qt</a></li><li><a href="http://wiki.qt.io/Category:Developing_Qt" title="Category:Developing Qt">Developing Qt</a></li></ul></div></div>												<div class="visualClear"></div>
							</div>
		</div>
		<div id="mw-navigation">
			<h2>Navigation menu</h2>
			<div id="mw-head">
				<div id="p-personal" role="navigation" class="" aria-labelledby="p-personal-label">
	<h3 id="p-personal-label">Personal tools</h3>
	<ul>
<li id="pt-anonuserpage"><a href="http://wiki.qt.io/User:10.0.113.70" class="new" title="The user page for the IP address you are editing as [.]" accesskey=".">10.0.113.70</a></li><li id="pt-anontalk"><a href="http://wiki.qt.io/User_talk:10.0.113.70" class="new" title="Discussion about edits from this IP address [n]" accesskey="n">Talk for this IP address</a></li><li id="pt-login"><a href="http://wiki.qt.io/index.php?title=Special:QtLogin&amp;returnto=Transition+from+Qt+4.x+to+Qt5" title="You are encouraged to log in; however, it is not mandatory [o]" accesskey="o">Sign in</a></li>	</ul>
</div>
				<div id="left-navigation">
					<div id="p-namespaces" role="navigation" class="vectorTabs" aria-labelledby="p-namespaces-label">
	<h3 id="p-namespaces-label">Namespaces</h3>
	<ul>
					<li  id="ca-nstab-main" class="selected"><span><a href="http://wiki.qt.io/Transition_from_Qt_4.x_to_Qt5"  title="View the content page [c]" accesskey="c">Page</a></span></li>
					<li  id="ca-talk" class="new"><span><a href="http://wiki.qt.io/index.php?title=Talk:Transition_from_Qt_4.x_to_Qt5&amp;action=edit&amp;redlink=1"  title="Discussion about the content page [t]" accesskey="t">Discussion</a></span></li>
			</ul>
</div>
<div id="p-variants" role="navigation" class="vectorMenu emptyPortlet" aria-labelledby="p-variants-label">
	<h3 id="mw-vector-current-variant">
		</h3>
	<h3 id="p-variants-label"><span>Variants</span><a href="#"></a></h3>
	<div class="menu">
		<ul>
					</ul>
	</div>
</div>
				</div>
				<div id="right-navigation">
					<div id="p-views" role="navigation" class="vectorTabs" aria-labelledby="p-views-label">
	<h3 id="p-views-label">Views</h3>
	<ul>
					<li id="ca-view" class="selected"><span><a href="http://wiki.qt.io/Transition_from_Qt_4.x_to_Qt5" >Read</a></span></li>
					<li id="ca-viewsource"><span><a href="http://wiki.qt.io/index.php?title=Transition_from_Qt_4.x_to_Qt5&amp;action=edit"  title="This page is protected.&#10;You can view its source [e]" accesskey="e">View source</a></span></li>
					<li id="ca-history" class="collapsible"><span><a href="http://wiki.qt.io/index.php?title=Transition_from_Qt_4.x_to_Qt5&amp;action=history"  title="Past revisions of this page [h]" accesskey="h">View history</a></span></li>
			</ul>
</div>
<div id="p-cactions" role="navigation" class="vectorMenu emptyPortlet" aria-labelledby="p-cactions-label">
	<h3 id="p-cactions-label"><span>Actions</span><a href="#"></a></h3>
	<div class="menu">
		<ul>
					</ul>
	</div>
</div>
<div id="p-search" role="search">
	<h3><label for="searchInput">Search</label></h3>
	<form action="http://wiki.qt.io/index.php" id="searchform">
					<div id="simpleSearch">
					<input type="search" name="search" placeholder="Search" title="Search Qt Wiki [f]" accesskey="f" id="searchInput" /><input type="hidden" value="Special:Search" name="title" /><input type="submit" name="fulltext" value="Search" title="Search the pages for this text" id="mw-searchButton" class="searchButton mw-fallbackSearchButton" /><input type="submit" name="go" value="Go" title="Go to a page with this exact name if exists" id="searchButton" class="searchButton" />		</div>
	</form>
</div>
				</div>
			</div>
			<div id="mw-panel">
					<div id="p-logo" role="banner"><a style="background-image: url(http://wiki.qt.io/skins/common/images/wiki.png);" href="http://wiki.qt.io/Main_Page"  title="Visit the main page"></a></div>
				<div class="portal" role="navigation" id='p-navigation' aria-labelledby='p-navigation-label'>
	<h3 id='p-navigation-label'>Navigation</h3>
	<div class="body">
		<ul>
			<li id="n-mainpage-description"><a href="http://wiki.qt.io/Main_Page" title="Visit the main page [z]" accesskey="z">Main page</a></li>
			<li id="n-recentchanges"><a href="http://wiki.qt.io/Special:RecentChanges" title="A list of recent changes in the wiki [r]" accesskey="r">Recent changes</a></li>
			<li id="n-randompage"><a href="http://wiki.qt.io/Special:Random" title="Load a random page [x]" accesskey="x">Random page</a></li>
			<li id="n-help"><a href="https://www.mediawiki.org/wiki/Special:MyLanguage/Help:Contents" title="The place to find out">Help</a></li>
		</ul>
	</div>
</div>
<div class="portal" role="navigation" id='p-tb' aria-labelledby='p-tb-label'>
	<h3 id='p-tb-label'>Tools</h3>
	<div class="body">
		<ul>
			<li id="t-whatlinkshere"><a href="http://wiki.qt.io/Special:WhatLinksHere/Transition_from_Qt_4.x_to_Qt5" title="A list of all wiki pages that link here [j]" accesskey="j">What links here</a></li>
			<li id="t-recentchangeslinked"><a href="http://wiki.qt.io/Special:RecentChangesLinked/Transition_from_Qt_4.x_to_Qt5" title="Recent changes in pages linked from this page [k]" accesskey="k">Related changes</a></li>
			<li id="t-specialpages"><a href="http://wiki.qt.io/Special:SpecialPages" title="A list of all special pages [q]" accesskey="q">Special pages</a></li>
			<li id="t-print"><a href="http://wiki.qt.io/index.php?title=Transition_from_Qt_4.x_to_Qt5&amp;oldid=19502&amp;printable=yes" rel="alternate" title="Printable version of this page [p]" accesskey="p">Printable version</a></li>
			<li id="t-permalink"><a href="http://wiki.qt.io/index.php?title=Transition_from_Qt_4.x_to_Qt5&amp;oldid=19502" title="Permanent link to this revision of the page">Permanent link</a></li>
			<li id="t-info"><a href="http://wiki.qt.io/index.php?title=Transition_from_Qt_4.x_to_Qt5&amp;action=info">Page information</a></li>
		</ul>
	</div>
</div>
			</div>
		</div>
		<div id="footer" role="contentinfo">
							<ul id="footer-info">
											<li id="footer-info-lastmod"> This page was last modified on 5 September 2015, at 20:29.</li>
											<li id="footer-info-viewcount">This page has been accessed 33,925 times.</li>
									</ul>
							<ul id="footer-places">
											<li id="footer-places-terms"><a href='https://developer.qtcloudservices.com/legal/terms'>Käyttöehdot</a></li>
									</ul>
										<ul id="footer-icons" class="noprint">
					<li id="footer-poweredbyico">
						<a href="http://www.mediawiki.org/"><img src="http://wiki.qt.io/skins/common/images/poweredby_mediawiki_88x31.png" alt="Powered by MediaWiki" width="88" height="31" /></a>
					</li>
				</ul>
						<div style="clear:both"></div>
		</div>
		<script>/*<![CDATA[*/window.jQuery && jQuery.ready();/*]]>*/</script><script>if(window.mw){
mw.loader.state({"site":"loading","user":"ready","user.groups":"ready"});
}</script>
<script>if(window.mw){
mw.loader.load(["mediawiki.action.view.postEdit","mediawiki.user","mediawiki.hidpi","mediawiki.page.ready","mediawiki.searchSuggest","skins.vector.collapsibleNav"],null,true);
}</script>
<script src="http://wiki.qt.io/load.php?debug=false&amp;lang=en&amp;modules=site&amp;only=scripts&amp;skin=vector&amp;*"></script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','http://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-54043535-2', 'auto');
  ga('send', 'pageview');

</script>
<script>if(window.mw){
mw.config.set({"wgBackendResponseTime":1026});
}</script>
	</body>

<!-- Mirrored from wiki.qt.io/index.php?title=Transition_from_Qt_4.x_to_Qt5&oldid=19502 by HTTrack Website Copier/3.x [XR&CO'2013], Thu, 05 Nov 2015 08:42:18 GMT -->
</html>
