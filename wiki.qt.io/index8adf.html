<!DOCTYPE html>
<html lang="en" dir="ltr" class="client-nojs">

<!-- Mirrored from wiki.qt.io/index.php?title=Getting_Started_with_Qt/it&action=edit by HTTrack Website Copier/3.x [XR&CO'2013], Thu, 05 Nov 2015 10:58:34 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<meta charset="UTF-8" />
<title>View source for Getting Started with Qt/it - Qt Wiki</title>
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />
<meta name="generator" content="MediaWiki 1.23.3" />
<meta name="robots" content="noindex,nofollow" />
<link rel="shortcut icon" href="http://wiki.qt.io/favicon.ico" />
<link rel="search" type="application/opensearchdescription+xml" href="http://wiki.qt.io/opensearch_desc.php" title="Qt Wiki (en)" />
<link rel="EditURI" type="application/rsd+xml" href="http://wiki.qt.io/api.php?action=rsd" />
<link rel="alternate" type="application/atom+xml" title="Qt Wiki Atom feed" href="http://wiki.qt.io/index.php?title=Special:RecentChanges&amp;feed=atom" />
<link rel="stylesheet" href="http://wiki.qt.io/load.php?debug=false&amp;lang=en&amp;modules=mediawiki.legacy.commonPrint%2Cshared%7Cmediawiki.skinning.interface%7Cmediawiki.ui.button%7Cskins.vector.styles&amp;only=styles&amp;skin=vector&amp;*" />
<meta name="ResourceLoaderDynamicStyles" content="" />
<link rel="stylesheet" href="http://wiki.qt.io/load.php?debug=false&amp;lang=en&amp;modules=site&amp;only=styles&amp;skin=vector&amp;*" />
<style>a:lang(ar),a:lang(kk-arab),a:lang(mzn),a:lang(ps),a:lang(ur){text-decoration:none}
/* cache key: qtio_wiki:resourceloader:filter:minify-css:7:e91d7bc946738c8892a88ad5616a59ba */</style>
<script src="http://wiki.qt.io/load.php?debug=false&amp;lang=en&amp;modules=startup&amp;only=scripts&amp;skin=vector&amp;*"></script>
<script>if(window.mw){
mw.config.set({"wgCanonicalNamespace":"","wgCanonicalSpecialPageName":false,"wgNamespaceNumber":0,"wgPageName":"Getting_Started_with_Qt/it","wgTitle":"Getting Started with Qt/it","wgCurRevisionId":18535,"wgRevisionId":0,"wgArticleId":829,"wgIsArticle":false,"wgIsRedirect":false,"wgAction":"edit","wgUserName":null,"wgUserGroups":["*"],"wgCategories":[],"wgBreakFrames":true,"wgPageContentLanguage":"en","wgPageContentModel":"wikitext","wgSeparatorTransformTable":["",""],"wgDigitTransformTable":["",""],"wgDefaultDateFormat":"dmy","wgMonthNames":["","January","February","March","April","May","June","July","August","September","October","November","December"],"wgMonthNamesShort":["","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"wgRelevantPageName":"Getting_Started_with_Qt/it","wgIsProbablyEditable":false,"wgRestrictionEdit":[],"wgRestrictionMove":[],"wgWikiEditorEnabledModules":{"toolbar":true,"dialogs":true,"hidesig":true,"preview":true,"previewDialog":false,"publish":true}});
}</script><script>if(window.mw){
mw.loader.implement("user.options",function($,jQuery){mw.user.options.set({"ccmeonemails":0,"cols":80,"date":"default","diffonly":0,"disablemail":0,"editfont":"default","editondblclick":0,"editsectiononrightclick":0,"enotifminoredits":0,"enotifrevealaddr":0,"enotifusertalkpages":1,"enotifwatchlistpages":1,"extendwatchlist":0,"fancysig":0,"forceeditsummary":0,"gender":"unknown","hideminor":0,"hidepatrolled":0,"imagesize":2,"math":1,"minordefault":0,"newpageshidepatrolled":0,"nickname":"","norollbackdiff":0,"numberheadings":0,"previewonfirst":0,"previewontop":1,"rcdays":7,"rclimit":50,"rows":25,"showhiddencats":0,"shownumberswatching":1,"showtoolbar":1,"skin":"vector","stubthreshold":0,"thumbsize":2,"underline":2,"uselivepreview":0,"usenewrc":0,"watchcreations":1,"watchdefault":1,"watchdeletion":0,"watchlistdays":3,"watchlisthideanons":0,"watchlisthidebots":0,"watchlisthideliu":0,"watchlisthideminor":0,"watchlisthideown":0,"watchlisthidepatrolled":0,"watchmoves":0,"wllimit":250,
"useeditwarning":1,"prefershttps":1,"usebetatoolbar":1,"usebetatoolbar-cgd":1,"wikieditor-preview":1,"wikieditor-publish":1,"language":"en","variant-gan":"gan","variant-iu":"iu","variant-kk":"kk","variant-ku":"ku","variant-shi":"shi","variant-sr":"sr","variant-tg":"tg","variant-uz":"uz","variant-zh":"zh","searchNs0":true,"searchNs1":false,"searchNs2":false,"searchNs3":false,"searchNs4":false,"searchNs5":false,"searchNs6":false,"searchNs7":false,"searchNs8":false,"searchNs9":false,"searchNs10":false,"searchNs11":false,"searchNs12":false,"searchNs13":false,"searchNs14":false,"searchNs15":false,"searchNs500":false,"searchNs501":false,"searchNs700":false,"searchNs701":false,"variant":"en"});},{},{});mw.loader.implement("user.tokens",function($,jQuery){mw.user.tokens.set({"editToken":"+\\","patrolToken":false,"watchToken":false});},{},{});
/* cache key: qtio_wiki:resourceloader:filter:minify-js:7:9743cb8b8019d46de5946bfe6dfa04d7 */
}</script>
<script>if(window.mw){
mw.loader.load(["mediawiki.page.startup","mediawiki.legacy.wikibits","mediawiki.legacy.ajax","skins.vector.js"]);
}</script>
<!--[if lt IE 7]><style type="text/css">body{behavior:url("/skins/vector/csshover.min.htc")}</style><![endif]--></head>
<body class="mediawiki ltr sitedir-ltr ns-0 ns-subject page-Getting_Started_with_Qt_it skin-vector action-edit vector-animateLayout">
		<div id="mw-page-base" class="noprint"></div>
		<div id="mw-head-base" class="noprint"></div>
		<div id="content" class="mw-body" role="main">
			<a id="top"></a>
			<div id="mw-js-message" style="display:none;"></div>
						<h1 id="firstHeading" class="firstHeading" lang="en"><span dir="auto">View source for Getting Started with Qt/it</span></h1>
						<div id="bodyContent">
								<div id="contentSub">← <a href="http://wiki.qt.io/Getting_Started_with_Qt/it" title="Getting Started with Qt/it">Getting Started with Qt/it</a></div>
												<div id="jump-to-nav" class="mw-jump">
					Jump to:					<a href="#mw-navigation">navigation</a>, 					<a href="#p-search">search</a>
				</div>
				<div id="mw-content-text"><p>You do not have permission to edit this page, for the following reason:
</p>
<div class="permissions-errors">
<p>The action you have requested is limited to users in one of the groups: <a href="http://wiki.qt.io/index.php?title=Qt_Wiki:Users&amp;action=edit&amp;redlink=1" class="new" title="Qt Wiki:Users (page does not exist)">Users</a>, KnowledgeBase, QtWS.
</p>
</div>
<hr />
<p>You can view and copy the source of this page:
</p><textarea readonly="" accesskey="," id="wpTextbox1" cols="80" rows="25" style="" lang="en" dir="ltr" name="wpTextbox1">{{Cleanup | reason=Auto-imported from ExpressionEngine.}}

= Iniziare a programmare con Qt =
Benvenuto nel mondo di Qt, lo strumento multipiattaforma per lo sviluppo di GUI. In questa guida, insegneremo i fondamenti delle nozioni di Qt creando una sempplice applicazione Notepad. Dopo aver letto la guida, si dovrebbe essere in grado di cercare all'interno delle nostre panoramiche e nella documentazione delle API per trovare le informazioni di cui si necessita per sviluppare l'applicazione a cui si sta lavorando.

== Hello Notepad ==

In questo primo esempio creeremo e visualizzeremo un editor di testo in una finestra sul desktop. Questo rappresenta il più semplice programma Qt dotato di interfaccia utente.

p=. [[Image:http://doc.qt.nokia.com/4.7/images/gs1.png|gs1.png]]

Il codice è il seguente:

&lt;code> #include &lt;QApplication>
#include &lt;QTextEdit>

int main(int argv, char **args)
{
 QApplication app(argv, args);

QTextEdit textEdit;
 textEdit.show();

return app.exec();
}
&lt;/code>

Analizziamo ora il codice riga per riga. Nelle prime due righe includiamo i file header per [http://doc.qt.nokia.com/4.7/qapplication.html QApplication] e [http://doc.qt.nokia.com/4.7/qtextedit.html QTextEdit], le due classi che ci servono per questo esempio. Tutte le classi Qt hanno un file header avente il loro stesso nome.

La riga 6 crea un oggetto [http://doc.qt.nokia.com/4.7/qapplication.html QApplication]. Questo oggetto gestisce le risorse all'interno di tutta l'applicazione ed è necessario per eseguire ogni programma Qt che possiede una GUI. [http://doc.qt.nokia.com/4.7/qapplication.html QApplication] richiede ''argv'' e ''args'' poiché Qt accetta alcuni argomenti a linea di comando.

La riga 8 crea un oggetto [http://doc.qt.nokia.com/4.7/qtextedit.html QTextEdit]. Un editor di testo è un elemento grafico nella GUI. In Qt questi elementi vengono definiti widgets. Esempi di altri widgets sono barre di scorrimento, labels e radio buttons. Un widget può inoltre contenere altri widgets, ne sono un esempio la finestra di dialogo e la main window dell'applicazione.

La riga 9 mostra nella sua finestra sullo schermo l'editor di testo. I widgets funzionano anche come contenitori (ad esempio un [http://doc.qt.nokia.com/4.7/qmainwindow.html QMainWindow] continene toolbar, menù, barre di stato ed altri widgets), ma è comunque possibile visualizzare un widget singolo nella sua finestra. I widgets sono nascosti di default: la funzione [http://doc.qt.nokia.com/4.7/qwidget.html#show show()] ha il compito di visualizzarli sul desktop.

La riga 11 avvia il ciclo di eventi di [http://doc.qt.nokia.com/4.7/qapplication.html QApplication]. Quando un programma Qt è in esecuzione, sono generati degli eventi che vengono inviati ai widgets dell'applicazione. Esempi di eventi sono pressione dei tasti del mouse o della tastiera. Quando si digita del testo nel widget di editor testuale, esso riceve eventi di pressione dei tasti e risponde visualizzando il testo digitato.

Per eseguire l'applicazione è sufficiente aprire un prompt dei comandi ed entrare nella cartella in cui risiede il file .cpp del programma. I seguenti comandi compilano l'applicazione.

&lt;code> qmake -project
qmake
make
&lt;/code>

Questo crea un eseguibile nella cartella ''part1'' (nota che su Windows si potrebbe dover utilizzare ''nmake'' al posto di ''make'', inoltre l'eseguibile verrà posizionato nelle cartelle ''part1/debug'' o ''part1/release''). ''qmake'' è il tool di compilazione di Qt e richiede un file di configurazione. ''qmake'' genera questo file per noi quando gli diamo come argomento "-project" . Dato un file di configurazione (con suffisso .pro), ''qmake'' crea un makefile per compilare il programma. Torneremo su come scrivere il proprio file .pro più tardi.

=== Per approfondire ===
|'''Argomento'''|'''Collegamento'''|
|Widgets e geomentria delle finetre| [http://doc.qt.nokia.com/4.7/application-windows.html| Window and Dialog Widgets]
|Eventi e loro gestione|[http://doc.qt.nokia.com/4.7/eventsandfilters.html| The Event System]

== Aggiungere un bottone di uscita ==
Nelle applicazioni reali solitamente si utilizzano più widgets. Introdurremo ora un [http://doc.qt.nokia.com/4.7/qpushbutton.html QPushButton] al di sotto dell'editor di testo. Quando premuto (ad esempio con il mouse), il bottone permetterà di uscire dall'applicazione.

p=. [[Image:http://doc.qt.nokia.com/4.7/images/gs2.png|gs2.png]] 

Diamo un'occhiata al codice.
&lt;code>#include &lt;QtGui>

int main(int argv, char **args)
{
 QApplication app(argv, args);

 QTextEdit textEdit;
 QPushButton quitButton("Quit");

 QObject::connect(&amp;quitButton, SIGNAL (clicked()), qApp, SLOT (quit()));

 QVBoxLayout layout;
 layout.addWidget(&amp;textEdit);
 layout.addWidget(&amp;quitButton);

 QWidget window;
 window.setLayout(&amp;layout);

 window.show();

 return app.exec();
}
&lt;/code>

La prima linea include QtGui, un'header che contiene tutte le classi delle GUI delle Qt.

La linea 10 utilizza il meccanismo di segnali e slot per far uscire l'applicazione quando il '''Quit button''' viene premuto. Uno slot è una funzione che può essere invocata a runtime utilizzando il suo nome (come stringa letterale). Un segnale è una funzione che quando chiamata invoca gli slots registrati ad esso.

[http://doc.qt.nokia.com/4.7/qcoreapplication.html#quit quit()] è uno slot di [http://doc.qt.nokia.com/4.7/qapplication.html QApplication] che chiude l'applicazione quando invocato. [http://doc.qt.nokia.com/4.7/qabstractbutton.html#clicked clicked()] è un segnale che [http://doc.qt.nokia.com/4.7/qpushbutton.html QPushButton] emette quando viene premuto. La funzione statica [http://doc.qt.nokia.com/4.7/qobject.html#connect QObject::connect()] si occupa di connettere lo slot ed il segnale. SIGNAL () e SLOT() sono due macro che richiedono i prototipi delle funzioni del segnale e dello slot al fine di connetterli. E' inoltre necessario fornire i puntatori agli oggetti che devono inviare e ricevere il segnale.

La linea 12 crea un [http://doc.qt.nokia.com/4.7/qvboxlayout.html QVBoxLayout]. Come menzionato precedentemente, i widgets possono contenere altri widgets. E' possibile impostare direttamente i limiti (locazione e dimensioni) di widget figli, ma di solito è più semplice e comodo utilizzare un layout. Un layout gestisce le dimensioni dei widget figli. [http://doc.qt.nokia.com/4.7/qvboxlayout.html QVBoxLayout], per esempio, posiziona i widget figli in righe verticali.

Le linee 13 e 14 aggiungono al layout l'editor di testo ed il bottone, mentre la riga 17 imposta il layout sul widget. 

=== Per approfondire ===
|'''Argomento'''|'''Collegamento'''|
|Segnali e slots|[http://doc.qt.nokia.com/4.7/signalsandslots.html| Signals &amp; Slots]
|Layouts|[http://doc.qt.nokia.com/4.7/layout.html Layout Management] , [http://doc.qt.nokia.com/4.7/widgets-and-layouts.html Widgets and Layouts] , [http://doc.qt.nokia.com/4.7/examples-layouts.html| Layout Examples]
|I widgets di Qt|[http://doc.qt.nokia.com/4.7/gallery.html Qt Widget Gallery] , [http://doc.qt.nokia.com/4.7/examples-widgets.html| Widget Examples]

== Sottoclassare QWidget ==
Quando gli utilizzatori vogliono uscire dall'applicazione, si potrebbe voler visualizzare una finestra di dialogo per chiedere all'utente se è effettivamente convinto di voler uscire. In questo esempio, sottoclassiamo [http://doc.qt.nokia.com/4.7/qwidget.html QWidget] ed aggiungiamo uno slot che connettiamo al '''Quit button'''.

p=. [[Image:http://doc.qt.nokia.com/4.7/images/gs3.png|gs3.png]] 

Diamo un'occhiata al codice: 

&lt;code>class Notepad : public QWidget
{
 Q_OBJECT

public:
 Notepad();

private slots:
 void quit();

private:
 QTextEdit *textEdit;
 QPushButton *quitButton;
};
&lt;/code> 

La macro ''Q_OBJECT'' deve essere la prima nella definizione della classe e definisce questa come un ''QObject'' (è necessario che la classe erediti da [http://doc.qt.nokia.com/4.7/qobject.html QObject]). Un [http://doc.qt.nokia.com/4.7/qobject.html QObject] aggiunge molte capacità ad una normale classe C++. In particolare, il nome della classe e degli slots può essere recuperato a tempo di esecuzione. E' inoltre possibile invocare direttamente uno slot o recuperare i tipi dei suoi paramentri.

La linea 13 dichiara lo slot ''quit()'' . Utilizzando la macro ''slots'', ciò diventa molto semplice. Lo slot ''quit()'' può ora essere connesso ad un segnale che possiede un prototipo compatibile (in questo caso, ogni segnale che non prende parametri).

Piuttosto che impostare la GUI e connettere lo slot nella funzione ''main()'', utilizziamo ora il costruttore della classe ''Notepad''. 

Dovremmo quindi definire anche lo slot Notepad::Quit()

&lt;code>Notepad::Notepad()
{
 textEdit = new QTextEdit;
 quitButton = new QPushButton(tr("Quit"));

 connect(quitButton, SIGNAL (clicked()), this, SLOT (quit()));

 QVBoxLayout *layout = new QVBoxLayout;
 layout->addWidget(textEdit);
 layout->addWidget(quitButton);

setLayout(layout);

setWindowTitle(tr("Notepad"));
}

void Notepad::quit(){
    QMessageBox *message = new QMessageBox();
    message->setText(tr("Sei sicuro di voler uscire?"));
    message->setStandardButtons(QMessageBox::Yes | QMessageBox::No);
    int ret = message->exec();
    switch(ret){
        case QMessageBox::Yes:
            qApp->quit();
            break;
        case QMessageBox::No:
            break;
    default:
        break;
    }
}
&lt;/code>

Come si può vedere nella definizione della classe, utilizziamo puntatori ai nostri [http://doc.qt.nokia.com/4.7/qobject.html QObject] (''textEdit'' e ''quitButton''). Come regole, si dovrebbe sempre allocare i [http://doc.qt.nokia.com/4.7/qobject.html QObject] nella memoria heap e mai copiarli.

Utilizziamo anche la funzione [http://doc.qt.nokia.com/4.7/qobject.html#tr tr()] attorno alle stringhe da visualizzare all'utente. Questa funzione è necessaria quando si vuole distribuire l'applicazione in più di una lingua (ad esempio Inglese ed Italiano). Qui non entreremo nei detagli, ma è possibile seguire il link ''Qt Linguist'' degli approfondimenti.
Con la creazione di un nuovo QMessageBox chiamato message e dopo aver settato il testo con setText() e i tasti con setStandardButtons, prendiamo quello che il QMessageBox ritorna con ret e in base a cosa ci ritorna utilizziamo lo switch per definire le azioni da compiere, qApp non è il nome dell'applicazione ma un puntatore alla QApplication dalla quale viene poi creata la classe notepad.

=== Per approfondire ===

{|
|'''Argomento'''
|'''Collegamento'''
|-
|tr() e internazionalizzazione
|[http://doc.qt.nokia.com/4.7/linguist-manual.html Qt Linguist Manual] , [http://doc.qt.nokia.com/4.7/i18n-source-translation.html Writing Source Code for Translation] , [http://doc.qt.nokia.com/4.7/linguist-hellotr.html Hello tr() Example] , [http://doc.qt.nokia.com/4.7/internationalization.html Internationalization with Qt]
|-
|QObjects ed il modello a oggeti di Qt (essenziale per comprendere Qt)
|[http://doc.qt.nokia.com/4.7/object.html Object Model]
|-
|qmake ed il sistema di compilazione di Qt
|[http://doc.qt.nokia.com/4.7/qmake-manual.html qmake Manual]
|}

== Creare un file .pro ==

Per questo esempio scriveremo il nostro file ''.pro'' al posto di utilizzare l'opzione _-project_ di ''qmake''. 

&lt;code>HEADERS = notepad.h
SOURCES = notepad.cpp  main.cpp
&lt;/code> 

I seguenti comandi console compilano il programma.

&lt;code>qmake
make
&lt;/code> 

== Usare una QMainWindow ==
Molte applicazioni trarranno beneficio dall'ultilizzo di [http://doc.qt.nokia.com/4.7/qmainwindow.html QMainWindow], poiché posiede il proprio layout a cui si può aggiungere una barra dei menù, dock widgets, tool bars e una barra di stato. [http://doc.qt.nokia.com/4.7/qmainwindow.html QMainWindow] ha un'area centrale che può essere occupata da ogni tipo di widget. Nel nostro caso posizioneremo qui il nostro editor di testo.

p=. [[Image:http://doc.qt.nokia.com/4.7/images/gs4.png|gs4.png]] 

Guardiamo la nuova definizione della classe ''Notepad''.

&lt;code>#include &lt;QtGui>

class Notepad : public QMainWindow
{
 Q_OBJECT

public:
 Notepad();

private slots:
 void open();
 void save();
 void quit();

private:
 QTextEdit *textEdit;

 QAction *openAction;
 QAction *saveAction;
 QAction *exitAction;

 QMenu *fileMenu;
};
&lt;/code>

Includiamo altri due slots per salvare ed aprire un documento. Li implementeremo nella prossima sezione.

Solitamente in una main window lo stesso slot può essere invocato da vari widgets. Sono esempi gli elementi del menù ed i bottoni nella tool bar. Per semplificare ciò, Qt fornisce [http://doc.qt.nokia.com/4.7/qaction.html QAction], una classe che può essere data a vari widgets e connessa ad uno slot. Per esempio, [http://doc.qt.nokia.com/4.7/qmenu.html QMenu] e [http://doc.qt.nokia.com/4.7/qtoolbar.html QToolBar] possono creare elementi del menù e tool buttons dalle stesse [http://doc.qt.nokia.com/4.7/qaction.html QActions]. Presto vedremo in che modo.

Come prima, useremo il costruttore della classe ''Notepad'' per impostare la GUI.

&lt;code>Notepad::Notepad()
{
 saveAction = new QAction(tr("&amp;Open"), this);
 saveAction = new QAction(tr("&amp;Save"), this);
 exitAction = new QAction(tr("E&amp;xit"), this);

 connect(openAction, SIGNAL (triggered()), this, SLOT (open()));
 connect(saveAction, SIGNAL (triggered()), this, SLOT (save()));
 connect(exitAction, SIGNAL (triggered()), qApp, SLOT (quit()));

 fileMenu = menuBar()->addMenu(tr("&amp;File"));
 fileMenu->addAction(openAction);
 fileMenu->addAction(saveAction);
 fileMenu->addSeparator();
 fileMenu->addAction(exitAction);

textEdit = new QTextEdit;
 setCentralWidget(textEdit);

setWindowTitle(tr("Notepad"));
}
&lt;/code>

Le [http://doc.qt.nokia.com/4.7/qaction.html QActions] sono create con il testo che dovrebbe apparire sui widgets a cui vengono aggiunte (nel nostro caso gli elementi del menù). Se inoltre volessimo aggiungerle ad una tool bar potremmo impostare delle [http://doc.qt.nokia.com/4.7/qicon.html icone] alle varie azioni.

Quando un elemento del menù è cliccato, esso attiva la [http://doc.qt.nokia.com/4.7/qaction.html QAction] che si occupa di invocare il rispettivo slot.

=== Per approfondire ===

{|
|'''Argomento'''
|'''Collegamento'''
|-
|Main windows e classi main window
|[http://doc.qt.nokia.com/4.7/mainwindow.html Application Main Window] , [http://doc.qt.nokia.com/4.7/examples-mainwindow.html Main Window Examples]
|-
|Applicazioni MDI
|[http://doc.qt.nokia.com/4.7/qmdiarea.html QMdiArea] , [http://doc.qt.nokia.com/4.7/mainwindows-mdi.html MDI Example]
|}

== Salvataggio e caricamento ==

In questo esempio implementeremo la funzionalità degli slot di ''open()'' e ''save()'' che abbiamo aggiunto nella sezione precedente.

p=. [[Image:http://doc.qt.nokia.com/4.7/images/gs5.png|gs5.png]]

Iniziamo con lo slot ''open()'':

&lt;code>QString fileName = QFileDialog::getOpenFileName(this, tr("Open File"), "",
 tr("Text Files ('''.txt);;C++ Files ('''.cpp '''.h)"));

if (fileName != "") {
 QFile file(fileName);
 if (!file.open(QIODevice::ReadOnly)) {
 QMessageBox::critical(this, tr("Error"),
 tr("Could not open file"));
 return;
 }
 QString contents = file.readAll().constData();
 textEdit->setPlainText(contents);
 file.close();
}
&lt;/code>

Il primo passo è chiedere all'utente il nome del file da aprire. Qt contiene [http://doc.qt.nokia.com/4.7/qfiledialog.html QFileDialog], una finestra di dialogo dalla quale l'utente può selezionare un file. L'immagine precedente mostra un esempio da Kubuntu. La funzione statica [http://doc.qt.nokia.com/4.7/qfiledialog.html#getOpenFileName getOpenFileName()] visualizza una finestra di dialogo modale e non ritorna fintanto che l'utente non seleziona un file. La funzione ritorna una stringa contenente il path del file selezionato, oppure una stringa vuota nel caso l'utente annulli l'operazione.

Se otteniamo il nome di un file, proviamo ad aprirlo tramite la funzione [http://doc.qt.nokia.com/4.7/qiodevice.html#open open()], che ritorna true se il file può essere aperto. Qui non andremo nel dettaglio della gestione errori, ma è possibile seguire il link dalla sezione approondimenti. Se il file non può essere aperto, utilizziamo una [http://doc.qt.nokia.com/4.7/qmessagebox.html QMessageBox] per visualizzare una finestra con un messaggio d'errore (vedere la descrizione della classe [http://doc.qt.nokia.com/4.7/qmessagebox.html QMessageBox] per ulteriori dettagli).

La lettura dei dati è banale, grazie alla funzione [http://doc.qt.nokia.com/4.7/qiodevice.html#readAll readAll()] che ritorna tutti i dati nel file in un [http://doc.qt.nokia.com/4.7/qbytearray.html QByteArray]. La funzione [http://doc.qt.nokia.com/4.7/qbytearray.html#constData constData()] ritorna il contenuto dell'array sotto forma di const char''', per il quale [http://doc.qt.nokia.com/4.7/qstring.html QString] ha un costrutture. Il contenuto ora può essere visualizzato nell'editor di testo. Possiamo ora chudere il file con [http://doc.qt.nokia.com/4.7/qiodevice.html#close close()] per far ritornare il file descriptor al sistema operativo.

Adesso spostiamoci sullo slot ''save()''.

&lt;code>QString fileName = QFileDialog::getSaveFileName(this, tr("Save File"), "",
 tr("Text Files ('''.txt);;C++ Files ('''.cpp '''.h)"));

if (fileName != "") {
 QFile file(fileName);
 if (!file.open(QIODevice::WriteOnly)) {
 // error message
 } else {
 QTextStream stream(&amp;file);
 stream &lt;&lt; textEdit->toPlainText();
 stream.flush();
 file.close();
 }
}
&lt;/code> 

Quando scriviamo il contenuto dell'editor di testo nel file, utilizziamo una classe [http://doc.qt.nokia.com/4.7/qtextstream.html QTextStream] che utilizza un oggetto [http://doc.qt.nokia.com/4.7/qfile.html QFile]. La text stream può scrivere stringe direttamente nel file, mentre [http://doc.qt.nokia.com/4.7/qfile.html QFile] accetta solo dati grezzi (char''') nella funzione [http://doc.qt.nokia.com/4.7/qiodevice.html#write write()] di [http://doc.qt.nokia.com/4.7/qiodevice.html QIODevice].

=== Per approfondire ===

{|
|'''Argomento'''
|'''Collegamento'''
|-
|Files e dispositivi di I/O
|[http://doc.qt.nokia.com/4.7/qfile.html QFile] , [http://doc.qt.nokia.com/4.7/qiodevice.html QIODevice]
|}
</textarea><div class="templatesUsed"><div class="mw-templatesUsedExplanation"><p>Templates used on this page:
</p></div><ul>
<li><a href="http://wiki.qt.io/Template:Ambox" title="Template:Ambox">Template:Ambox</a> (<a href="http://wiki.qt.io/index.php?title=Template:Ambox&amp;action=edit" title="Template:Ambox">view source</a>) </li><li><a href="http://wiki.qt.io/Template:Cleanup" title="Template:Cleanup">Template:Cleanup</a> (<a href="http://wiki.qt.io/index.php?title=Template:Cleanup&amp;action=edit" title="Template:Cleanup">view source</a>) </li></ul></div><p id="mw-returnto">Return to <a href="http://wiki.qt.io/Getting_Started_with_Qt/it" title="Getting Started with Qt/it">Getting Started with Qt/it</a>.</p>
</div>								<div class="printfooter">
				Retrieved from "<a href="http://wiki.qt.io/Getting_Started_with_Qt/it">http://wiki.qt.io/Getting_Started_with_Qt/it</a>"				</div>
												<div id='catlinks' class='catlinks catlinks-allhidden'></div>												<div class="visualClear"></div>
							</div>
		</div>
		<div id="mw-navigation">
			<h2>Navigation menu</h2>
			<div id="mw-head">
				<div id="p-personal" role="navigation" class="" aria-labelledby="p-personal-label">
	<h3 id="p-personal-label">Personal tools</h3>
	<ul>
<li id="pt-anonuserpage"><a href="http://wiki.qt.io/User:10.0.113.70" class="new" title="The user page for the IP address you are editing as [.]" accesskey=".">10.0.113.70</a></li><li id="pt-anontalk"><a href="http://wiki.qt.io/User_talk:10.0.113.70" class="new" title="Discussion about edits from this IP address [n]" accesskey="n">Talk for this IP address</a></li><li id="pt-login"><a href="http://wiki.qt.io/index.php?title=Special:QtLogin&amp;returnto=Getting+Started+with+Qt%2Fit" title="You are encouraged to log in; however, it is not mandatory [o]" accesskey="o">Sign in</a></li>	</ul>
</div>
				<div id="left-navigation">
					<div id="p-namespaces" role="navigation" class="vectorTabs" aria-labelledby="p-namespaces-label">
	<h3 id="p-namespaces-label">Namespaces</h3>
	<ul>
					<li  id="ca-nstab-main" class="selected"><span><a href="http://wiki.qt.io/Getting_Started_with_Qt/it"  title="View the content page [c]" accesskey="c">Page</a></span></li>
					<li  id="ca-talk" class="new"><span><a href="http://wiki.qt.io/index.php?title=Talk:Getting_Started_with_Qt/it&amp;action=edit&amp;redlink=1"  title="Discussion about the content page [t]" accesskey="t">Discussion</a></span></li>
			</ul>
</div>
<div id="p-variants" role="navigation" class="vectorMenu emptyPortlet" aria-labelledby="p-variants-label">
	<h3 id="mw-vector-current-variant">
		</h3>
	<h3 id="p-variants-label"><span>Variants</span><a href="#"></a></h3>
	<div class="menu">
		<ul>
					</ul>
	</div>
</div>
				</div>
				<div id="right-navigation">
					<div id="p-views" role="navigation" class="vectorTabs" aria-labelledby="p-views-label">
	<h3 id="p-views-label">Views</h3>
	<ul>
					<li id="ca-view"><span><a href="http://wiki.qt.io/Getting_Started_with_Qt/it" >Read</a></span></li>
					<li id="ca-viewsource" class="selected"><span><a href="http://wiki.qt.io/index.php?title=Getting_Started_with_Qt/it&amp;action=edit"  title="This page is protected.&#10;You can view its source [e]" accesskey="e">View source</a></span></li>
					<li id="ca-history" class="collapsible"><span><a href="http://wiki.qt.io/index.php?title=Getting_Started_with_Qt/it&amp;action=history"  title="Past revisions of this page [h]" accesskey="h">View history</a></span></li>
			</ul>
</div>
<div id="p-cactions" role="navigation" class="vectorMenu emptyPortlet" aria-labelledby="p-cactions-label">
	<h3 id="p-cactions-label"><span>Actions</span><a href="#"></a></h3>
	<div class="menu">
		<ul>
					</ul>
	</div>
</div>
<div id="p-search" role="search">
	<h3><label for="searchInput">Search</label></h3>
	<form action="http://wiki.qt.io/index.php" id="searchform">
					<div id="simpleSearch">
					<input type="search" name="search" placeholder="Search" title="Search Qt Wiki [f]" accesskey="f" id="searchInput" /><input type="hidden" value="Special:Search" name="title" /><input type="submit" name="fulltext" value="Search" title="Search the pages for this text" id="mw-searchButton" class="searchButton mw-fallbackSearchButton" /><input type="submit" name="go" value="Go" title="Go to a page with this exact name if exists" id="searchButton" class="searchButton" />		</div>
	</form>
</div>
				</div>
			</div>
			<div id="mw-panel">
					<div id="p-logo" role="banner"><a style="background-image: url(http://wiki.qt.io/skins/common/images/wiki.png);" href="http://wiki.qt.io/Main_Page"  title="Visit the main page"></a></div>
				<div class="portal" role="navigation" id='p-navigation' aria-labelledby='p-navigation-label'>
	<h3 id='p-navigation-label'>Navigation</h3>
	<div class="body">
		<ul>
			<li id="n-mainpage-description"><a href="http://wiki.qt.io/Main_Page" title="Visit the main page [z]" accesskey="z">Main page</a></li>
			<li id="n-recentchanges"><a href="http://wiki.qt.io/Special:RecentChanges" title="A list of recent changes in the wiki [r]" accesskey="r">Recent changes</a></li>
			<li id="n-randompage"><a href="http://wiki.qt.io/Special:Random" title="Load a random page [x]" accesskey="x">Random page</a></li>
			<li id="n-help"><a href="https://www.mediawiki.org/wiki/Special:MyLanguage/Help:Contents" title="The place to find out">Help</a></li>
		</ul>
	</div>
</div>
<div class="portal" role="navigation" id='p-tb' aria-labelledby='p-tb-label'>
	<h3 id='p-tb-label'>Tools</h3>
	<div class="body">
		<ul>
			<li id="t-whatlinkshere"><a href="http://wiki.qt.io/Special:WhatLinksHere/Getting_Started_with_Qt/it" title="A list of all wiki pages that link here [j]" accesskey="j">What links here</a></li>
			<li id="t-recentchangeslinked"><a href="http://wiki.qt.io/Special:RecentChangesLinked/Getting_Started_with_Qt/it" title="Recent changes in pages linked from this page [k]" accesskey="k">Related changes</a></li>
			<li id="t-specialpages"><a href="http://wiki.qt.io/Special:SpecialPages" title="A list of all special pages [q]" accesskey="q">Special pages</a></li>
			<li id="t-info"><a href="http://wiki.qt.io/index.php?title=Getting_Started_with_Qt/it&amp;action=info">Page information</a></li>
		</ul>
	</div>
</div>
			</div>
		</div>
		<div id="footer" role="contentinfo">
							<ul id="footer-places">
											<li id="footer-places-terms"><a href='https://developer.qtcloudservices.com/legal/terms'>Käyttöehdot</a></li>
									</ul>
										<ul id="footer-icons" class="noprint">
					<li id="footer-poweredbyico">
						<a href="http://www.mediawiki.org/"><img src="http://wiki.qt.io/skins/common/images/poweredby_mediawiki_88x31.png" alt="Powered by MediaWiki" width="88" height="31" /></a>
					</li>
				</ul>
						<div style="clear:both"></div>
		</div>
		<script>/*<![CDATA[*/window.jQuery && jQuery.ready();/*]]>*/</script><script>if(window.mw){
mw.loader.state({"site":"loading","user":"ready","user.groups":"ready"});
}</script>
<script>if(window.mw){
mw.loader.load(["mediawiki.action.edit.collapsibleFooter","mediawiki.user","mediawiki.hidpi","mediawiki.page.ready","mediawiki.searchSuggest","skins.vector.collapsibleNav"],null,true);
}</script>
<script src="http://wiki.qt.io/load.php?debug=false&amp;lang=en&amp;modules=site&amp;only=scripts&amp;skin=vector&amp;*"></script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','http://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-54043535-2', 'auto');
  ga('send', 'pageview');

</script>
<script>if(window.mw){
mw.config.set({"wgBackendResponseTime":589});
}</script>
	</body>

<!-- Mirrored from wiki.qt.io/index.php?title=Getting_Started_with_Qt/it&action=edit by HTTrack Website Copier/3.x [XR&CO'2013], Thu, 05 Nov 2015 10:58:34 GMT -->
</html>
