<!DOCTYPE html>
<html lang="en" dir="ltr" class="client-nojs">

<!-- Mirrored from wiki.qt.io/index.php?title=Delay_action_to_wait_for_user_interaction&oldid=18461 by HTTrack Website Copier/3.x [XR&CO'2013], Thu, 05 Nov 2015 12:10:17 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<meta charset="UTF-8" />
<title>Delay action to wait for user interaction - Qt Wiki</title>
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />
<meta name="generator" content="MediaWiki 1.23.3" />
<meta name="robots" content="noindex,nofollow" />
<link rel="shortcut icon" href="http://wiki.qt.io/favicon.ico" />
<link rel="search" type="application/opensearchdescription+xml" href="http://wiki.qt.io/opensearch_desc.php" title="Qt Wiki (en)" />
<link rel="EditURI" type="application/rsd+xml" href="http://wiki.qt.io/api.php?action=rsd" />
<link rel="alternate" type="application/atom+xml" title="Qt Wiki Atom feed" href="http://wiki.qt.io/index.php?title=Special:RecentChanges&amp;feed=atom" />
<link rel="stylesheet" href="http://wiki.qt.io/load.php?debug=false&amp;lang=en&amp;modules=mediawiki.legacy.commonPrint%2Cshared%7Cmediawiki.skinning.interface%7Cmediawiki.ui.button%7Cskins.vector.styles&amp;only=styles&amp;skin=vector&amp;*" />
<meta name="ResourceLoaderDynamicStyles" content="" />
<link rel="stylesheet" href="http://wiki.qt.io/load.php?debug=false&amp;lang=en&amp;modules=site&amp;only=styles&amp;skin=vector&amp;*" />
<style>a:lang(ar),a:lang(kk-arab),a:lang(mzn),a:lang(ps),a:lang(ur){text-decoration:none}
/* cache key: qtio_wiki:resourceloader:filter:minify-css:7:e91d7bc946738c8892a88ad5616a59ba */</style>
<script src="http://wiki.qt.io/load.php?debug=false&amp;lang=en&amp;modules=startup&amp;only=scripts&amp;skin=vector&amp;*"></script>
<script>if(window.mw){
mw.config.set({"wgCanonicalNamespace":"","wgCanonicalSpecialPageName":false,"wgNamespaceNumber":0,"wgPageName":"Delay_action_to_wait_for_user_interaction","wgTitle":"Delay action to wait for user interaction","wgCurRevisionId":18461,"wgRevisionId":18461,"wgArticleId":695,"wgIsArticle":true,"wgIsRedirect":false,"wgAction":"view","wgUserName":null,"wgUserGroups":["*"],"wgCategories":[],"wgBreakFrames":false,"wgPageContentLanguage":"en","wgPageContentModel":"wikitext","wgSeparatorTransformTable":["",""],"wgDigitTransformTable":["",""],"wgDefaultDateFormat":"dmy","wgMonthNames":["","January","February","March","April","May","June","July","August","September","October","November","December"],"wgMonthNamesShort":["","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"wgRelevantPageName":"Delay_action_to_wait_for_user_interaction","wgIsProbablyEditable":false,"wgRestrictionEdit":[],"wgRestrictionMove":[],"wgWikiEditorEnabledModules":{"toolbar":true,"dialogs":true,"hidesig":true,"preview":true,"previewDialog":false,"publish":true}});
}</script><script>if(window.mw){
mw.loader.implement("user.options",function($,jQuery){mw.user.options.set({"ccmeonemails":0,"cols":80,"date":"default","diffonly":0,"disablemail":0,"editfont":"default","editondblclick":0,"editsectiononrightclick":0,"enotifminoredits":0,"enotifrevealaddr":0,"enotifusertalkpages":1,"enotifwatchlistpages":1,"extendwatchlist":0,"fancysig":0,"forceeditsummary":0,"gender":"unknown","hideminor":0,"hidepatrolled":0,"imagesize":2,"math":1,"minordefault":0,"newpageshidepatrolled":0,"nickname":"","norollbackdiff":0,"numberheadings":0,"previewonfirst":0,"previewontop":1,"rcdays":7,"rclimit":50,"rows":25,"showhiddencats":0,"shownumberswatching":1,"showtoolbar":1,"skin":"vector","stubthreshold":0,"thumbsize":2,"underline":2,"uselivepreview":0,"usenewrc":0,"watchcreations":1,"watchdefault":1,"watchdeletion":0,"watchlistdays":3,"watchlisthideanons":0,"watchlisthidebots":0,"watchlisthideliu":0,"watchlisthideminor":0,"watchlisthideown":0,"watchlisthidepatrolled":0,"watchmoves":0,"wllimit":250,
"useeditwarning":1,"prefershttps":1,"usebetatoolbar":1,"usebetatoolbar-cgd":1,"wikieditor-preview":1,"wikieditor-publish":1,"language":"en","variant-gan":"gan","variant-iu":"iu","variant-kk":"kk","variant-ku":"ku","variant-shi":"shi","variant-sr":"sr","variant-tg":"tg","variant-uz":"uz","variant-zh":"zh","searchNs0":true,"searchNs1":false,"searchNs2":false,"searchNs3":false,"searchNs4":false,"searchNs5":false,"searchNs6":false,"searchNs7":false,"searchNs8":false,"searchNs9":false,"searchNs10":false,"searchNs11":false,"searchNs12":false,"searchNs13":false,"searchNs14":false,"searchNs15":false,"searchNs500":false,"searchNs501":false,"searchNs700":false,"searchNs701":false,"variant":"en"});},{},{});mw.loader.implement("user.tokens",function($,jQuery){mw.user.tokens.set({"editToken":"+\\","patrolToken":false,"watchToken":false});},{},{});
/* cache key: qtio_wiki:resourceloader:filter:minify-js:7:9743cb8b8019d46de5946bfe6dfa04d7 */
}</script>
<script>if(window.mw){
mw.loader.load(["mediawiki.page.startup","mediawiki.legacy.wikibits","mediawiki.legacy.ajax","skins.vector.js"]);
}</script>
<style type="text/css">/*<![CDATA[*/
.source-cpp-qt {line-height: normal;}
.source-cpp-qt li, .source-cpp-qt pre {
	line-height: normal; border: 0px none white;
}
/**
 * GeSHi Dynamically Generated Stylesheet
 * --------------------------------------
 * Dynamically generated stylesheet for cpp-qt
 * CSS class: source-cpp-qt, CSS id: 
 * GeSHi (C) 2004 - 2007 Nigel McNie, 2007 - 2008 Benny Baumann
 * (http://qbnz.com/highlighter/ and http://geshi.org/)
 * --------------------------------------
 */
.cpp-qt.source-cpp-qt .de1, .cpp-qt.source-cpp-qt .de2 {font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;font-family: monospace, monospace;}
.cpp-qt.source-cpp-qt  {font-family:monospace;}
.cpp-qt.source-cpp-qt .imp {font-weight: bold; color: red;}
.cpp-qt.source-cpp-qt li, .cpp-qt.source-cpp-qt .li1 {font-weight: normal; vertical-align:top;}
.cpp-qt.source-cpp-qt .ln {width:1px;text-align:right;margin:0;padding:0 2px;vertical-align:top;}
.cpp-qt.source-cpp-qt .li2 {font-weight: bold; vertical-align:top;}
.cpp-qt.source-cpp-qt .kw1 {color: #000000; font-weight:bold;}
.cpp-qt.source-cpp-qt .kw2 {color: #0057AE;}
.cpp-qt.source-cpp-qt .kw3 {color: #2B74C7;}
.cpp-qt.source-cpp-qt .kw4 {color: #0057AE;}
.cpp-qt.source-cpp-qt .kw5 {color: #22aadd;}
.cpp-qt.source-cpp-qt .co1 {color: #888888;}
.cpp-qt.source-cpp-qt .co2 {color: #006E28;}
.cpp-qt.source-cpp-qt .coMULTI {color: #888888; font-style: italic;}
.cpp-qt.source-cpp-qt .es0 {color: #000099; font-weight: bold;}
.cpp-qt.source-cpp-qt .es1 {color: #000099; font-weight: bold;}
.cpp-qt.source-cpp-qt .es2 {color: #660099; font-weight: bold;}
.cpp-qt.source-cpp-qt .es3 {color: #660099; font-weight: bold;}
.cpp-qt.source-cpp-qt .es4 {color: #660099; font-weight: bold;}
.cpp-qt.source-cpp-qt .es5 {color: #006699; font-weight: bold;}
.cpp-qt.source-cpp-qt .br0 {color: #006E28;}
.cpp-qt.source-cpp-qt .sy0 {color: #006E28;}
.cpp-qt.source-cpp-qt .st0 {color: #BF0303;}
.cpp-qt.source-cpp-qt .nu0 {color: #B08000;}
.cpp-qt.source-cpp-qt .nu6 {color: #208080;}
.cpp-qt.source-cpp-qt .nu8 {color: #208080;}
.cpp-qt.source-cpp-qt .nu12 {color: #208080;}
.cpp-qt.source-cpp-qt .nu16 {color:#800080;}
.cpp-qt.source-cpp-qt .nu17 {color:#800080;}
.cpp-qt.source-cpp-qt .nu18 {color:#800080;}
.cpp-qt.source-cpp-qt .nu19 {color:#800080;}
.cpp-qt.source-cpp-qt .me1 {color: #2B74C7;}
.cpp-qt.source-cpp-qt .me2 {color: #2B74C7;}
.cpp-qt.source-cpp-qt .me3 {color: #2B74C7;}
.cpp-qt.source-cpp-qt .ln-xtra, .cpp-qt.source-cpp-qt li.ln-xtra, .cpp-qt.source-cpp-qt div.ln-xtra {background-color: #ffc;}
.cpp-qt.source-cpp-qt span.xtra { display:block; }

/*]]>*/
</style><!--[if lt IE 7]><style type="text/css">body{behavior:url("/skins/vector/csshover.min.htc")}</style><![endif]--></head>
<body class="mediawiki ltr sitedir-ltr ns-0 ns-subject page-Delay_action_to_wait_for_user_interaction skin-vector action-view vector-animateLayout">
		<div id="mw-page-base" class="noprint"></div>
		<div id="mw-head-base" class="noprint"></div>
		<div id="content" class="mw-body" role="main">
			<a id="top"></a>
			<div id="mw-js-message" style="display:none;"></div>
						<h1 id="firstHeading" class="firstHeading" lang="en"><span dir="auto">Delay action to wait for user interaction</span></h1>
						<div id="bodyContent">
								<div id="siteSub">From Qt Wiki</div>
								<div id="contentSub"><div id="mw-revision-info">Revision as of 13:46, 28 June 2015 by <a href="http://wiki.qt.io/User:Wieland" title="User:Wieland" class="mw-userlink">Wieland</a>  <span class="mw-usertoollinks">(<a href="http://wiki.qt.io/User_talk:Wieland" title="User talk:Wieland">Talk</a> | <a href="http://wiki.qt.io/Special:Contributions/Wieland" title="Special:Contributions/Wieland">contribs</a>)</span></div><br />
				<div id="mw-revision-nav">(<a href="http://wiki.qt.io/index.php?title=Delay_action_to_wait_for_user_interaction&amp;diff=prev&amp;oldid=18461" title="Delay action to wait for user interaction">diff</a>) <a href="http://wiki.qt.io/index.php?title=Delay_action_to_wait_for_user_interaction&amp;direction=prev&amp;oldid=18461" title="Delay action to wait for user interaction">← Older revision</a> | Latest revision (diff) | Newer revision → (diff)</div></div>
												<div id="jump-to-nav" class="mw-jump">
					Jump to:					<a href="#mw-navigation">navigation</a>, 					<a href="#p-search">search</a>
				</div>
				<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr"><div style="background:#eeeeee;padding:2px;">
<p><strong class="selflink">En</strong>
<span style="color:#ccc;">Ar</span>
<span style="color:#ccc;">Bg</span>
<span style="color:#ccc;">De</span>
<span style="color:#ccc;">El</span>
<span style="color:#ccc;">Es</span>
<span style="color:#ccc;">Fa</span>
<span style="color:#ccc;">Fi</span>
<span style="color:#ccc;">Fr</span>
<span style="color:#ccc;">Hi</span>
<span style="color:#ccc;">Hu</span>
<span style="color:#ccc;">It</span>
<span style="color:#ccc;">Ja</span>
<span style="color:#ccc;">Kn</span>
<span style="color:#ccc;">Ko</span>
<span style="color:#ccc;">Ms</span>
<span style="color:#ccc;">Nl</span>
<span style="color:#ccc;">Pl</span>
<span style="color:#ccc;">Pt</span>
<span style="color:#ccc;">Ru</span>
<span style="color:#ccc;">Th</span>
<span style="color:#ccc;">Tr</span>
<span style="color:#ccc;">Uk</span>
<span style="color:#ccc;">Zh</span>
</p>
</div>
<div id="toc" class="toc"><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Usecase"><span class="tocnumber">1</span> <span class="toctext">Usecase</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#Enter_DelayedExecutionTimer"><span class="tocnumber">2</span> <span class="toctext">Enter DelayedExecutionTimer</span></a></li>
<li class="toclevel-1 tocsection-3"><a href="#Code"><span class="tocnumber">3</span> <span class="toctext">Code</span></a>
<ul>
<li class="toclevel-2 tocsection-4"><a href="#delayedexecutiontimer.h"><span class="tocnumber">3.1</span> <span class="toctext">delayedexecutiontimer.h</span></a></li>
<li class="toclevel-2 tocsection-5"><a href="#delayedexecutiontimer.cpp"><span class="tocnumber">3.2</span> <span class="toctext">delayedexecutiontimer.cpp</span></a></li>
</ul>
</li>
</ul>
</div>

<h2><span class="mw-headline" id="Usecase">Usecase</span></h2>
Have you ever created a text filter that can be used to filter a (big) item view so users can get to their content faster? If you did, you probably simply connected <div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="cpp-qt source-cpp-qt"><pre class="de1"><span class="kw5">QLineEdit</span><span class="sy0">::</span><span class="me2">textChanged</span> <span class="br0">&#40;</span> <span class="kw4">const</span> <span class="kw5">QString</span> <span class="sy0">&amp;</span> text <span class="br0">&#41;</span></pre></div></div> to a <div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="cpp-qt source-cpp-qt"><pre class="de1"><span class="kw5">QSortFilterProxyModel</span><span class="sy0">::</span><span class="me2">setFilterXXX</span></pre></div></div> method, either via your own slot to add some wildcards or wrap the line edit's string in a regular expression or not. The problem is, now each character typed by the user triggers an update of the whole view, and the proxy model has to go through all the items in your list over and over again. That could get expensive and slow, thereby instead of improving user experience you actually annoy the user…
<p>There are many such cases where events can happen in quick succession, and you'd like your application to respond to these changes. On the one hand, it makes sense to respond to as many of those events in one go as possible, but on the other hand you don't want the update to take too much time after the user is done typing his filter string (or whatever it is you are waiting for).
</p>
<h2><span class="mw-headline" id="Enter_DelayedExecutionTimer">Enter DelayedExecutionTimer</span></h2>
<p>One solution to this problem is to use two timers, one short enough so an update will still appear snappy but long enough that it will probably not trigger before there is more input (for instance, if the user is not done typing his filter), and one longer timer that will trigger a set time after the first event happened, so the update will not be delayed forever as more and more events happen that would otherwise delay the update.
</p>
The <div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="cpp-qt source-cpp-qt"><pre class="de1">DelayedExecutionTimer</pre></div></div> class implements this approach, making it very easy to apply in all such cases without mucking about with creating, setting and resetting timers for each case where you need this. <div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="cpp-qt source-cpp-qt"><pre class="de1">DelayedExecutionTimer</pre></div></div> basically provides one slot <div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="cpp-qt source-cpp-qt"><pre class="de1">trigger<span class="br0">&#40;</span><span class="br0">&#41;</span></pre></div></div> and one signal <div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="cpp-qt source-cpp-qt"><pre class="de1">triggered<span class="br0">&#40;</span><span class="br0">&#41;</span></pre></div></div>. Instead of directly connecting the event to the action (connecting the <div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="cpp-qt source-cpp-qt"><pre class="de1">textChanged<span class="br0">&#40;</span><span class="br0">&#41;</span></pre></div></div> to the <div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="cpp-qt source-cpp-qt"><pre class="de1">setFilter<span class="br0">&#40;</span><span class="br0">&#41;</span></pre></div></div>, for instance), you connect the <div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="cpp-qt source-cpp-qt"><pre class="de1"><span class="kw5">QLineEdit</span><span class="sy0">::</span><span class="me2">textChanged</span><span class="br0">&#40;</span><span class="br0">&#41;</span></pre></div></div> to <div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="cpp-qt source-cpp-qt"><pre class="de1">DelayedExecutionTimer<span class="sy0">::</span><span class="me2">trigger</span><span class="br0">&#40;</span><span class="br0">&#41;</span></pre></div></div>, and <div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="cpp-qt source-cpp-qt"><pre class="de1">DelayedExecutionTimer<span class="sy0">::</span><span class="me2">triggered</span><span class="br0">&#40;</span><span class="br0">&#41;</span></pre></div></div> to <div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="cpp-qt source-cpp-qt"><pre class="de1"><span class="kw5">QSortFilterProxyModel</span><span class="sy0">::</span><span class="me2">setFilter</span>…<span class="br0">&#40;</span><span class="br0">&#41;</span></pre></div></div>.
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="cpp-qt source-cpp-qt"><pre class="de1">DelayedExecutionTimer</pre></div></div> also provides two more versions of both the trigger() slot and the triggered() signal for convenience. These allow to pass a QString or an int as an argument. The triggered() signal will be emitted without argument, and with both a QString and with an int argument, carrying the last value that was passed in by the corresponding trigger() signal (or a default value if no such value was set). As a last convenience feature, you can set pre- and post- strings, that will be added to the string value before the signal is send. This way, connecting the line edit to the <div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="cpp-qt source-cpp-qt"><pre class="de1">SortFilterProxy</pre></div></div> model becomes as simple as this:
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="cpp-qt source-cpp-qt"><pre class="de1"><span class="co1">// m_proxy is a QSortFilterProxyModel pointer</span>
<span class="co1">// m_ui-&gt;leFilter is a QLineEdit representing the filter string to use</span>
&#160;
DelayedExecutionTimer<span class="sy0">*</span> filterDelay <span class="sy0">=</span> <span class="kw1">new</span> DelayedExecutionTimer<span class="br0">&#40;</span><span class="kw1">this</span><span class="br0">&#41;</span><span class="sy0">;</span>
filterDelay<span class="sy0">-&gt;</span><span class="me3">setStringPreFix</span><span class="br0">&#40;</span><span class="st0">&quot;'''&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span>
filterDelay<span class="sy0">-&gt;</span><span class="me3">setStringPostFix</span><span class="br0">&#40;</span><span class="st0">&quot;'''&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span>
<span class="kw2">connect</span><span class="br0">&#40;</span>m_ui<span class="sy0">-&gt;</span><span class="me3">leFilter</span><span class="sy0">,</span> SIGNAL <span class="br0">&#40;</span>textChanged<span class="br0">&#40;</span><span class="kw5">QString</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">,</span> filterDelay<span class="sy0">,</span> SLOT <span class="br0">&#40;</span>trigger<span class="br0">&#40;</span><span class="kw5">QString</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span>
<span class="kw2">connect</span><span class="br0">&#40;</span>filterDelay<span class="sy0">,</span> SIGNAL <span class="br0">&#40;</span>triggered<span class="br0">&#40;</span><span class="kw5">QString</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">,</span> m_proxy<span class="sy0">,</span> SLOT <span class="br0">&#40;</span>setFilterWildcard<span class="br0">&#40;</span><span class="kw5">QString</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span></pre></div></div>
<p>That's all. Of course, you can tweak the timings by either passing in a reasonable minimum and maximum delay in the constructor, or using the setters for these.
</p>
<h2><span class="mw-headline" id="Code">Code</span></h2>
<h3><span class="mw-headline" id="delayedexecutiontimer.h">delayedexecutiontimer.h</span></h3>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="cpp-qt source-cpp-qt"><pre class="de1"><span class="coMULTI">/* Copyright © 2011, Andre Somers
All rights reserved.
&#160;
Redistribution and use in source and binary forms, with or without
modification, are permitted provided that the following conditions are met:
 * Redistributions of source code must retain the above copyright
 notice, this list of conditions and the following disclaimer.
 * Redistributions in binary form must reproduce the above copyright
 notice, this list of conditions and the following disclaimer in the
 documentation and/or other materials provided with the distribution.
 * Neither the name of the Rathenau Instituut, Andre Somers nor the
 names of its contributors may be used to endorse or promote products
 derived from this software without specific prior written permission.
&#160;
THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS &quot;AS IS&quot; AND
ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
DISCLAIMED. IN NO EVENT SHALL ANDRE SOMERS AND/OR RATHENAU INSTITUTE BE LIABLE FOR ANY
DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
(INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
(INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/</span>
&#160;
<span class="co2">#ifndef DELAYEDEXECUTIONTIMER_H</span>
<span class="co2">#define DELAYEDEXECUTIONTIMER_H</span>
&#160;
<span class="co2">#include &lt;QObject&gt;</span>
&#160;
<span class="kw2">class</span> QTimer<span class="sy0">;</span>
&#160;
<span class="co1">// Class to delay execution an action in response to events that may come in bursts </span>
<span class="kw2">class</span> DelayedExecutionTimer <span class="sy0">:</span> <span class="kw2">public</span> <span class="kw5">QObject</span>
<span class="br0">&#123;</span>
    <span class="kw2">Q_OBJECT</span>
<span class="kw2">public</span><span class="sy0">:</span>
    DelayedExecutionTimer<span class="br0">&#40;</span><span class="kw4">int</span> maximumDelay <span class="sy0">=</span> <span class="nu0">1000</span><span class="sy0">,</span> <span class="kw4">int</span> minimumDelay <span class="sy0">=</span> <span class="nu0">250</span><span class="sy0">,</span> <span class="kw5">QObject</span><span class="sy0">*</span> parent <span class="sy0">=</span> <span class="nu0">0</span><span class="br0">&#41;</span><span class="sy0">;</span>
    DelayedExecutionTimer<span class="br0">&#40;</span><span class="kw5">QObject</span><span class="sy0">*</span> parent<span class="br0">&#41;</span><span class="sy0">;</span>
&#160;
<span class="coMULTI">/*
 The minimum delay is the time the class will wait after being triggered before
 emitting the triggered() signals.
 */</span>
 <span class="kw4">void</span> setMinimumDelay<span class="br0">&#40;</span><span class="kw4">int</span> delay<span class="br0">&#41;</span> <span class="br0">&#123;</span>m_minimumDelay <span class="sy0">=</span> delay<span class="sy0">;</span><span class="br0">&#125;</span>
 <span class="kw4">int</span> minimumDelay<span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="kw4">const</span> <span class="br0">&#123;</span><span class="kw1">return</span> m_minimumDelay<span class="sy0">;</span><span class="br0">&#125;</span>
 <span class="coMULTI">/*
 The maximum delay is the maximum time that will pass before a call to the trigger() slot
 leads to a triggered() signal.
 */</span>
 <span class="kw4">void</span> setMaximumDelay<span class="br0">&#40;</span><span class="kw4">int</span> delay<span class="br0">&#41;</span> <span class="br0">&#123;</span>m_maximumDelay <span class="sy0">=</span> delay<span class="sy0">;</span><span class="br0">&#125;</span>
 <span class="kw4">int</span> maximumDelay<span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="kw4">const</span> <span class="br0">&#123;</span><span class="kw1">return</span> m_maximumDelay<span class="sy0">;</span><span class="br0">&#125;</span>
&#160;
 <span class="coMULTI">/*
 Sets a string to be attached to the end of the last string set using trigger(QString)
 in the triggered(QString) signal. This is useful for, for instance, appending wildcard
 characters to a filter string.
 */</span>
 <span class="kw4">void</span> setStringPostfix<span class="br0">&#40;</span><span class="kw4">const</span> <span class="kw5">QString</span><span class="sy0">&amp;</span> postfix<span class="br0">&#41;</span> <span class="br0">&#123;</span>m_postfix <span class="sy0">=</span> postfix<span class="sy0">;</span><span class="br0">&#125;</span>
 <span class="coMULTI">/*
 Sets a string to be prepended to the beginning of the last string set using trigger(QString)
 in the triggered(QString) signal. This is useful for, for instance, appending wildcard
 characters to a filter string.
 */</span>
 <span class="kw4">void</span> setStringPrefix<span class="br0">&#40;</span><span class="kw4">const</span> <span class="kw5">QString</span><span class="sy0">&amp;</span> prefix<span class="br0">&#41;</span> <span class="br0">&#123;</span>m_prefix <span class="sy0">=</span> prefix<span class="sy0">;</span><span class="br0">&#125;</span>
&#160;
<span class="kw2">signals</span><span class="sy0">:</span>
    <span class="kw4">void</span> triggered<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
    <span class="kw4">void</span> triggered<span class="br0">&#40;</span><span class="kw5">QString</span><span class="br0">&#41;</span><span class="sy0">;</span>
    <span class="kw4">void</span> triggered<span class="br0">&#40;</span><span class="kw4">int</span><span class="br0">&#41;</span><span class="sy0">;</span>
&#160;
<span class="kw2">public</span> <span class="kw2">slots</span><span class="sy0">:</span>
    <span class="kw4">void</span> trigger<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
    <span class="kw4">void</span> trigger<span class="br0">&#40;</span><span class="kw5">QString</span><span class="br0">&#41;</span><span class="sy0">;</span>
    <span class="kw4">void</span> trigger<span class="br0">&#40;</span><span class="kw4">int</span><span class="br0">&#41;</span><span class="sy0">;</span>
&#160;
<span class="kw2">private</span> <span class="kw2">slots</span><span class="sy0">:</span>
    <span class="kw4">void</span> timeout<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
&#160;
<span class="kw2">private</span><span class="sy0">:</span>
    <span class="kw4">int</span> m_minimumDelay<span class="sy0">;</span>
    <span class="kw4">int</span> m_maximumDelay<span class="sy0">;</span>
&#160;
    <span class="kw5">QTimer</span><span class="sy0">*</span> m_minimumTimer<span class="sy0">;</span>
    <span class="kw5">QTimer</span><span class="sy0">*</span> m_maximumTimer<span class="sy0">;</span>
&#160;
    <span class="kw5">QString</span> m_lastString<span class="sy0">;</span>
    <span class="kw4">int</span> m_lastInt<span class="sy0">;</span>
&#160;
    <span class="kw5">QString</span> m_prefix<span class="sy0">;</span>
    <span class="kw5">QString</span> m_postfix<span class="sy0">;</span>
<span class="br0">&#125;</span><span class="sy0">;</span>
&#160;
<span class="co2">#endif // DELAYEDEXECUTIONTIMER_H</span></pre></div></div>
<p>And here's the CPP code:
</p>
<h3><span class="mw-headline" id="delayedexecutiontimer.cpp">delayedexecutiontimer.cpp</span></h3>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="cpp-qt source-cpp-qt"><pre class="de1"><span class="coMULTI">/* Copyright © 2011, Andre Somers
 * All rights reserved.
 * File licence not repeated here for space reasons. See file &quot;delayedexecutiontimer.h&quot; for details of licence. 
 */</span>
<span class="co2">#include &quot;delayedexecutiontimer.h&quot;</span>
<span class="co2">#include &lt;QTimer&gt;</span>
<span class="co2">#include &lt;QStringBuilder&gt;</span>
&#160;
DelayedExecutionTimer<span class="sy0">::</span><span class="me2">DelayedExecutionTimer</span><span class="br0">&#40;</span><span class="kw4">int</span> maximumDelay<span class="sy0">,</span> <span class="kw4">int</span> minimumDelay<span class="sy0">,</span> <span class="kw5">QObject</span><span class="sy0">*</span> parent<span class="br0">&#41;</span><span class="sy0">:</span>
 <span class="kw5">QObject</span><span class="br0">&#40;</span>parent<span class="br0">&#41;</span><span class="sy0">,</span>
 m_minimumDelay<span class="br0">&#40;</span>minimumDelay<span class="br0">&#41;</span><span class="sy0">,</span>
 m_maximumDelay<span class="br0">&#40;</span>maximumDelay<span class="br0">&#41;</span><span class="sy0">,</span>
 m_minimumTimer<span class="br0">&#40;</span><span class="kw1">new</span> <span class="kw5">QTimer</span><span class="br0">&#40;</span><span class="kw1">this</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">,</span>
 m_maximumTimer<span class="br0">&#40;</span><span class="kw1">new</span> <span class="kw5">QTimer</span><span class="br0">&#40;</span><span class="kw1">this</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">,</span>
 m_lastInt<span class="br0">&#40;</span><span class="nu0">0</span><span class="br0">&#41;</span>
<span class="br0">&#123;</span>
 <span class="kw2">connect</span><span class="br0">&#40;</span>m_minimumTimer<span class="sy0">,</span> SIGNAL <span class="br0">&#40;</span>timeout<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">,</span> SLOT <span class="br0">&#40;</span>timeout<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span>
 <span class="kw2">connect</span><span class="br0">&#40;</span>m_maximumTimer<span class="sy0">,</span> SIGNAL <span class="br0">&#40;</span>timeout<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">,</span> SLOT <span class="br0">&#40;</span>timeout<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span>
<span class="br0">&#125;</span>
&#160;
DelayedExecutionTimer<span class="sy0">::</span><span class="me2">DelayedExecutionTimer</span><span class="br0">&#40;</span><span class="kw5">QObject</span><span class="sy0">*</span> parent<span class="br0">&#41;</span><span class="sy0">:</span>
 <span class="kw5">QObject</span><span class="br0">&#40;</span>parent<span class="br0">&#41;</span><span class="sy0">,</span>
 m_minimumDelay<span class="br0">&#40;</span><span class="nu0">250</span><span class="br0">&#41;</span><span class="sy0">,</span>
 m_maximumDelay<span class="br0">&#40;</span><span class="nu0">1000</span><span class="br0">&#41;</span><span class="sy0">,</span>
 m_minimumTimer<span class="br0">&#40;</span><span class="kw1">new</span> <span class="kw5">QTimer</span><span class="br0">&#40;</span><span class="kw1">this</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">,</span>
 m_maximumTimer<span class="br0">&#40;</span><span class="kw1">new</span> <span class="kw5">QTimer</span><span class="br0">&#40;</span><span class="kw1">this</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">,</span>
 m_lastInt<span class="br0">&#40;</span><span class="nu0">0</span><span class="br0">&#41;</span>
<span class="br0">&#123;</span>
 <span class="kw2">connect</span><span class="br0">&#40;</span>m_minimumTimer<span class="sy0">,</span> SIGNAL <span class="br0">&#40;</span>timeout<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">,</span> SLOT <span class="br0">&#40;</span>timeout<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span>
 <span class="kw2">connect</span><span class="br0">&#40;</span>m_maximumTimer<span class="sy0">,</span> SIGNAL <span class="br0">&#40;</span>timeout<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">,</span> SLOT <span class="br0">&#40;</span>timeout<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span>
<span class="br0">&#125;</span>
&#160;
<span class="kw4">void</span> DelayedExecutionTimer<span class="sy0">::</span><span class="me2">timeout</span><span class="br0">&#40;</span><span class="br0">&#41;</span>
<span class="br0">&#123;</span>
 m_minimumTimer<span class="sy0">-&gt;</span><span class="me3">stop</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
 m_maximumTimer<span class="sy0">-&gt;</span><span class="me3">stop</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
 emit triggered<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
 emit triggered<span class="br0">&#40;</span>m_prefix <span class="sy0">%</span> m_lastString <span class="sy0">%</span> m_postfix<span class="br0">&#41;</span><span class="sy0">;</span>
 emit triggered<span class="br0">&#40;</span>m_lastInt<span class="br0">&#41;</span><span class="sy0">;</span>
<span class="br0">&#125;</span>
&#160;
<span class="kw4">void</span> DelayedExecutionTimer<span class="sy0">::</span><span class="me2">trigger</span><span class="br0">&#40;</span><span class="br0">&#41;</span>
<span class="br0">&#123;</span>
 <span class="kw1">if</span> <span class="br0">&#40;</span><span class="sy0">!</span>m_maximumTimer<span class="sy0">-&gt;</span><span class="me3">isActive</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
 m_maximumTimer<span class="sy0">-&gt;</span><span class="me3">start</span><span class="br0">&#40;</span>m_maximumDelay<span class="br0">&#41;</span><span class="sy0">;</span>
 <span class="br0">&#125;</span>
 m_minimumTimer<span class="sy0">-&gt;</span><span class="me3">stop</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
 m_minimumTimer<span class="sy0">-&gt;</span><span class="me3">start</span><span class="br0">&#40;</span>m_minimumDelay<span class="br0">&#41;</span><span class="sy0">;</span>
<span class="br0">&#125;</span>
&#160;
<span class="kw4">void</span> DelayedExecutionTimer<span class="sy0">::</span><span class="me2">trigger</span><span class="br0">&#40;</span><span class="kw5">QString</span> string<span class="br0">&#41;</span>
<span class="br0">&#123;</span>
 m_lastString <span class="sy0">=</span> string<span class="sy0">;</span>
 trigger<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
<span class="br0">&#125;</span>
&#160;
<span class="kw4">void</span> DelayedExecutionTimer<span class="sy0">::</span><span class="me2">trigger</span><span class="br0">&#40;</span><span class="kw4">int</span> i<span class="br0">&#41;</span>
<span class="br0">&#123;</span>
 m_lastInt <span class="sy0">=</span> i<span class="sy0">;</span>
 trigger<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
<span class="br0">&#125;</span></pre></div></div>

<!-- 
NewPP limit report
CPU time usage: 0.340 seconds
Real time usage: 0.347 seconds
Preprocessor visited node count: 263/1000000
Preprocessor generated node count: 955/1000000
Post‐expand include size: 2718/2097152 bytes
Template argument size: 0/2097152 bytes
Highest expansion depth: 3/40
Expensive parser function count: 23/100
-->

<!-- Saved in parser cache with key qtio_wiki:pcache:idhash:695-0!*!*!!en!*!* and timestamp 20151105095653 and revision id 18461
 -->
</div>								<div class="printfooter">
				Retrieved from "<a href="http://wiki.qt.io/index.php?title=Delay_action_to_wait_for_user_interaction&amp;oldid=18461">http://wiki.qt.io/index.php?title=Delay_action_to_wait_for_user_interaction&amp;oldid=18461</a>"				</div>
												<div id='catlinks' class='catlinks catlinks-allhidden'></div>												<div class="visualClear"></div>
							</div>
		</div>
		<div id="mw-navigation">
			<h2>Navigation menu</h2>
			<div id="mw-head">
				<div id="p-personal" role="navigation" class="" aria-labelledby="p-personal-label">
	<h3 id="p-personal-label">Personal tools</h3>
	<ul>
<li id="pt-anonuserpage"><a href="http://wiki.qt.io/User:10.0.113.70" class="new" title="The user page for the IP address you are editing as [.]" accesskey=".">10.0.113.70</a></li><li id="pt-anontalk"><a href="http://wiki.qt.io/User_talk:10.0.113.70" class="new" title="Discussion about edits from this IP address [n]" accesskey="n">Talk for this IP address</a></li><li id="pt-login"><a href="http://wiki.qt.io/index.php?title=Special:QtLogin&amp;returnto=Delay+action+to+wait+for+user+interaction" title="You are encouraged to log in; however, it is not mandatory [o]" accesskey="o">Sign in</a></li>	</ul>
</div>
				<div id="left-navigation">
					<div id="p-namespaces" role="navigation" class="vectorTabs" aria-labelledby="p-namespaces-label">
	<h3 id="p-namespaces-label">Namespaces</h3>
	<ul>
					<li  id="ca-nstab-main" class="selected"><span><a href="http://wiki.qt.io/Delay_action_to_wait_for_user_interaction"  title="View the content page [c]" accesskey="c">Page</a></span></li>
					<li  id="ca-talk" class="new"><span><a href="http://wiki.qt.io/index.php?title=Talk:Delay_action_to_wait_for_user_interaction&amp;action=edit&amp;redlink=1"  title="Discussion about the content page [t]" accesskey="t">Discussion</a></span></li>
			</ul>
</div>
<div id="p-variants" role="navigation" class="vectorMenu emptyPortlet" aria-labelledby="p-variants-label">
	<h3 id="mw-vector-current-variant">
		</h3>
	<h3 id="p-variants-label"><span>Variants</span><a href="#"></a></h3>
	<div class="menu">
		<ul>
					</ul>
	</div>
</div>
				</div>
				<div id="right-navigation">
					<div id="p-views" role="navigation" class="vectorTabs" aria-labelledby="p-views-label">
	<h3 id="p-views-label">Views</h3>
	<ul>
					<li id="ca-view" class="selected"><span><a href="http://wiki.qt.io/Delay_action_to_wait_for_user_interaction" >Read</a></span></li>
					<li id="ca-viewsource"><span><a href="http://wiki.qt.io/index.php?title=Delay_action_to_wait_for_user_interaction&amp;action=edit"  title="This page is protected.&#10;You can view its source [e]" accesskey="e">View source</a></span></li>
					<li id="ca-history" class="collapsible"><span><a href="http://wiki.qt.io/index.php?title=Delay_action_to_wait_for_user_interaction&amp;action=history"  title="Past revisions of this page [h]" accesskey="h">View history</a></span></li>
			</ul>
</div>
<div id="p-cactions" role="navigation" class="vectorMenu emptyPortlet" aria-labelledby="p-cactions-label">
	<h3 id="p-cactions-label"><span>Actions</span><a href="#"></a></h3>
	<div class="menu">
		<ul>
					</ul>
	</div>
</div>
<div id="p-search" role="search">
	<h3><label for="searchInput">Search</label></h3>
	<form action="http://wiki.qt.io/index.php" id="searchform">
					<div id="simpleSearch">
					<input type="search" name="search" placeholder="Search" title="Search Qt Wiki [f]" accesskey="f" id="searchInput" /><input type="hidden" value="Special:Search" name="title" /><input type="submit" name="fulltext" value="Search" title="Search the pages for this text" id="mw-searchButton" class="searchButton mw-fallbackSearchButton" /><input type="submit" name="go" value="Go" title="Go to a page with this exact name if exists" id="searchButton" class="searchButton" />		</div>
	</form>
</div>
				</div>
			</div>
			<div id="mw-panel">
					<div id="p-logo" role="banner"><a style="background-image: url(http://wiki.qt.io/skins/common/images/wiki.png);" href="http://wiki.qt.io/Main_Page"  title="Visit the main page"></a></div>
				<div class="portal" role="navigation" id='p-navigation' aria-labelledby='p-navigation-label'>
	<h3 id='p-navigation-label'>Navigation</h3>
	<div class="body">
		<ul>
			<li id="n-mainpage-description"><a href="http://wiki.qt.io/Main_Page" title="Visit the main page [z]" accesskey="z">Main page</a></li>
			<li id="n-recentchanges"><a href="http://wiki.qt.io/Special:RecentChanges" title="A list of recent changes in the wiki [r]" accesskey="r">Recent changes</a></li>
			<li id="n-randompage"><a href="http://wiki.qt.io/Special:Random" title="Load a random page [x]" accesskey="x">Random page</a></li>
			<li id="n-help"><a href="https://www.mediawiki.org/wiki/Special:MyLanguage/Help:Contents" title="The place to find out">Help</a></li>
		</ul>
	</div>
</div>
<div class="portal" role="navigation" id='p-tb' aria-labelledby='p-tb-label'>
	<h3 id='p-tb-label'>Tools</h3>
	<div class="body">
		<ul>
			<li id="t-whatlinkshere"><a href="http://wiki.qt.io/Special:WhatLinksHere/Delay_action_to_wait_for_user_interaction" title="A list of all wiki pages that link here [j]" accesskey="j">What links here</a></li>
			<li id="t-recentchangeslinked"><a href="http://wiki.qt.io/Special:RecentChangesLinked/Delay_action_to_wait_for_user_interaction" title="Recent changes in pages linked from this page [k]" accesskey="k">Related changes</a></li>
			<li id="t-specialpages"><a href="http://wiki.qt.io/Special:SpecialPages" title="A list of all special pages [q]" accesskey="q">Special pages</a></li>
			<li id="t-print"><a href="http://wiki.qt.io/index.php?title=Delay_action_to_wait_for_user_interaction&amp;oldid=18461&amp;printable=yes" rel="alternate" title="Printable version of this page [p]" accesskey="p">Printable version</a></li>
			<li id="t-permalink"><a href="http://wiki.qt.io/index.php?title=Delay_action_to_wait_for_user_interaction&amp;oldid=18461" title="Permanent link to this revision of the page">Permanent link</a></li>
			<li id="t-info"><a href="http://wiki.qt.io/index.php?title=Delay_action_to_wait_for_user_interaction&amp;action=info">Page information</a></li>
		</ul>
	</div>
</div>
			</div>
		</div>
		<div id="footer" role="contentinfo">
							<ul id="footer-info">
											<li id="footer-info-lastmod"> This page was last modified on 28 June 2015, at 13:46.</li>
											<li id="footer-info-viewcount">This page has been accessed 1,042 times.</li>
									</ul>
							<ul id="footer-places">
											<li id="footer-places-terms"><a href='https://developer.qtcloudservices.com/legal/terms'>Käyttöehdot</a></li>
									</ul>
										<ul id="footer-icons" class="noprint">
					<li id="footer-poweredbyico">
						<a href="http://www.mediawiki.org/"><img src="http://wiki.qt.io/skins/common/images/poweredby_mediawiki_88x31.png" alt="Powered by MediaWiki" width="88" height="31" /></a>
					</li>
				</ul>
						<div style="clear:both"></div>
		</div>
		<script>/*<![CDATA[*/window.jQuery && jQuery.ready();/*]]>*/</script><script>if(window.mw){
mw.loader.state({"site":"loading","user":"ready","user.groups":"ready"});
}</script>
<script>if(window.mw){
mw.loader.load(["mediawiki.action.view.postEdit","mediawiki.user","mediawiki.hidpi","mediawiki.page.ready","mediawiki.searchSuggest","skins.vector.collapsibleNav"],null,true);
}</script>
<script src="http://wiki.qt.io/load.php?debug=false&amp;lang=en&amp;modules=site&amp;only=scripts&amp;skin=vector&amp;*"></script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','http://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-54043535-2', 'auto');
  ga('send', 'pageview');

</script>
<script>if(window.mw){
mw.config.set({"wgBackendResponseTime":534});
}</script>
	</body>

<!-- Mirrored from wiki.qt.io/index.php?title=Delay_action_to_wait_for_user_interaction&oldid=18461 by HTTrack Website Copier/3.x [XR&CO'2013], Thu, 05 Nov 2015 12:10:17 GMT -->
</html>
