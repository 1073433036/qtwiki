<!DOCTYPE html>
<html lang="en" dir="ltr" class="client-nojs">

<!-- Mirrored from wiki.qt.io/index.php?title=Import-Export-resources-for-setup-creation&action=edit by HTTrack Website Copier/3.x [XR&CO'2013], Thu, 05 Nov 2015 12:36:46 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<meta charset="UTF-8" />
<title>View source for Import-Export-resources-for-setup-creation - Qt Wiki</title>
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />
<meta name="generator" content="MediaWiki 1.23.3" />
<meta name="robots" content="noindex,nofollow" />
<link rel="shortcut icon" href="http://wiki.qt.io/favicon.ico" />
<link rel="search" type="application/opensearchdescription+xml" href="http://wiki.qt.io/opensearch_desc.php" title="Qt Wiki (en)" />
<link rel="EditURI" type="application/rsd+xml" href="http://wiki.qt.io/api.php?action=rsd" />
<link rel="alternate" type="application/atom+xml" title="Qt Wiki Atom feed" href="http://wiki.qt.io/index.php?title=Special:RecentChanges&amp;feed=atom" />
<link rel="stylesheet" href="http://wiki.qt.io/load.php?debug=false&amp;lang=en&amp;modules=mediawiki.legacy.commonPrint%2Cshared%7Cmediawiki.skinning.interface%7Cmediawiki.ui.button%7Cskins.vector.styles&amp;only=styles&amp;skin=vector&amp;*" />
<meta name="ResourceLoaderDynamicStyles" content="" />
<link rel="stylesheet" href="http://wiki.qt.io/load.php?debug=false&amp;lang=en&amp;modules=site&amp;only=styles&amp;skin=vector&amp;*" />
<style>a:lang(ar),a:lang(kk-arab),a:lang(mzn),a:lang(ps),a:lang(ur){text-decoration:none}
/* cache key: qtio_wiki:resourceloader:filter:minify-css:7:e91d7bc946738c8892a88ad5616a59ba */</style>
<script src="http://wiki.qt.io/load.php?debug=false&amp;lang=en&amp;modules=startup&amp;only=scripts&amp;skin=vector&amp;*"></script>
<script>if(window.mw){
mw.config.set({"wgCanonicalNamespace":"","wgCanonicalSpecialPageName":false,"wgNamespaceNumber":0,"wgPageName":"Import-Export-resources-for-setup-creation","wgTitle":"Import-Export-resources-for-setup-creation","wgCurRevisionId":13842,"wgRevisionId":0,"wgArticleId":1050,"wgIsArticle":false,"wgIsRedirect":false,"wgAction":"edit","wgUserName":null,"wgUserGroups":["*"],"wgCategories":[],"wgBreakFrames":true,"wgPageContentLanguage":"en","wgPageContentModel":"wikitext","wgSeparatorTransformTable":["",""],"wgDigitTransformTable":["",""],"wgDefaultDateFormat":"dmy","wgMonthNames":["","January","February","March","April","May","June","July","August","September","October","November","December"],"wgMonthNamesShort":["","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"wgRelevantPageName":"Import-Export-resources-for-setup-creation","wgIsProbablyEditable":false,"wgRestrictionEdit":[],"wgRestrictionMove":[],"wgWikiEditorEnabledModules":{"toolbar":true,"dialogs":true,"hidesig":true,"preview":true,"previewDialog":false,"publish":true}});
}</script><script>if(window.mw){
mw.loader.implement("user.options",function($,jQuery){mw.user.options.set({"ccmeonemails":0,"cols":80,"date":"default","diffonly":0,"disablemail":0,"editfont":"default","editondblclick":0,"editsectiononrightclick":0,"enotifminoredits":0,"enotifrevealaddr":0,"enotifusertalkpages":1,"enotifwatchlistpages":1,"extendwatchlist":0,"fancysig":0,"forceeditsummary":0,"gender":"unknown","hideminor":0,"hidepatrolled":0,"imagesize":2,"math":1,"minordefault":0,"newpageshidepatrolled":0,"nickname":"","norollbackdiff":0,"numberheadings":0,"previewonfirst":0,"previewontop":1,"rcdays":7,"rclimit":50,"rows":25,"showhiddencats":0,"shownumberswatching":1,"showtoolbar":1,"skin":"vector","stubthreshold":0,"thumbsize":2,"underline":2,"uselivepreview":0,"usenewrc":0,"watchcreations":1,"watchdefault":1,"watchdeletion":0,"watchlistdays":3,"watchlisthideanons":0,"watchlisthidebots":0,"watchlisthideliu":0,"watchlisthideminor":0,"watchlisthideown":0,"watchlisthidepatrolled":0,"watchmoves":0,"wllimit":250,
"useeditwarning":1,"prefershttps":1,"usebetatoolbar":1,"usebetatoolbar-cgd":1,"wikieditor-preview":1,"wikieditor-publish":1,"language":"en","variant-gan":"gan","variant-iu":"iu","variant-kk":"kk","variant-ku":"ku","variant-shi":"shi","variant-sr":"sr","variant-tg":"tg","variant-uz":"uz","variant-zh":"zh","searchNs0":true,"searchNs1":false,"searchNs2":false,"searchNs3":false,"searchNs4":false,"searchNs5":false,"searchNs6":false,"searchNs7":false,"searchNs8":false,"searchNs9":false,"searchNs10":false,"searchNs11":false,"searchNs12":false,"searchNs13":false,"searchNs14":false,"searchNs15":false,"searchNs500":false,"searchNs501":false,"searchNs700":false,"searchNs701":false,"variant":"en"});},{},{});mw.loader.implement("user.tokens",function($,jQuery){mw.user.tokens.set({"editToken":"+\\","patrolToken":false,"watchToken":false});},{},{});
/* cache key: qtio_wiki:resourceloader:filter:minify-js:7:9743cb8b8019d46de5946bfe6dfa04d7 */
}</script>
<script>if(window.mw){
mw.loader.load(["mediawiki.page.startup","mediawiki.legacy.wikibits","mediawiki.legacy.ajax","skins.vector.js"]);
}</script>
<!--[if lt IE 7]><style type="text/css">body{behavior:url("/skins/vector/csshover.min.htc")}</style><![endif]--></head>
<body class="mediawiki ltr sitedir-ltr ns-0 ns-subject page-Import-Export-resources-for-setup-creation skin-vector action-edit vector-animateLayout">
		<div id="mw-page-base" class="noprint"></div>
		<div id="mw-head-base" class="noprint"></div>
		<div id="content" class="mw-body" role="main">
			<a id="top"></a>
			<div id="mw-js-message" style="display:none;"></div>
						<h1 id="firstHeading" class="firstHeading" lang="en"><span dir="auto">View source for Import-Export-resources-for-setup-creation</span></h1>
						<div id="bodyContent">
								<div id="contentSub">‚Üê <a href="http://wiki.qt.io/Import-Export-resources-for-setup-creation" title="Import-Export-resources-for-setup-creation">Import-Export-resources-for-setup-creation</a></div>
												<div id="jump-to-nav" class="mw-jump">
					Jump to:					<a href="#mw-navigation">navigation</a>, 					<a href="#p-search">search</a>
				</div>
				<div id="mw-content-text"><p>You do not have permission to edit this page, for the following reason:
</p>
<div class="permissions-errors">
<p>The action you have requested is limited to users in one of the groups: <a href="http://wiki.qt.io/index.php?title=Qt_Wiki:Users&amp;action=edit&amp;redlink=1" class="new" title="Qt Wiki:Users (page does not exist)">Users</a>, KnowledgeBase, QtWS.
</p>
</div>
<hr />
<p>You can view and copy the source of this page:
</p><textarea readonly="" accesskey="," id="wpTextbox1" cols="80" rows="25" style="" lang="en" dir="ltr" name="wpTextbox1">{{Cleanup | reason=Auto-imported from ExpressionEngine.}}

= Import &amp; Export of resources for creating a setup (windows) =
== Introduction ==

For almost every finished Qt project it is wanted and in most cases also required to carry extern resources.
When porting the executable to other users on other computers that usually don't have Qt installed, it is necessary to port the needed Qt libraries, too.
Also, it is often necessary to include sound files, pictures, text files and other stuff to the executable.
One common way is to pack all that stuff into a zip archive and hope that the target user will manage things correctly.
Another, more complicated and maybe not in every case usable way would be to use the Qt resource management.

For those of you who would like to handle import/export of every kind of resource very easily, I wrote a little "ResourceManager".

== Headers &amp; Source files ==

The obligatory algorithms are stored in two files:
1. resourcemanager.h
2. resourcemanager.cpp

For easy creating a setup file by mouse clicking, I also wrote a user interface. This interface additionally requires the following six files:
1. mainwindow.h
2. mainwindow.cpp
3. myQDialogGetFile.h
4. myQDialogGetFile.cpp
5. myQDialogGetNewFile.h
6. myQDialogGetNewFile.cpp

== Implementation ==

=== Basic usage without user interface ('''not advisable!''') ===

For basic usage of the ResourceManager, you have to create a new project (this will be the executable that will import the resources to your setup) and add the two obligatory files (resourcemanager.h, resourcemanager.cpp).
In the main source file, you only have to specify the resources and pass them to the resourcemanager algorithm.
There are two functions that can be used, depending on how the resources shall be passed:
a) as a QStringList:
&lt;code>QStringList listResources;
listResources &lt;&lt; "Path/To/Resource/resource1.suffix|Path/To/Export/Resource/On/User/Computer/resource1.suffix" &lt;&lt; "Path/To/Resource/resource2.suffix|Path/To/Export/Resource/On/User/Computer/resource2.suffix";
ResourceManager resManager("Path/To/Setup.exe");
if(!resManager.importResourcesFromList(listResources))
 resManager.displayError();
else
 QMessageBox::information(this, "ResourceManager", "Import successful!");&lt;/code>

b) from an existing resource table file (ini format):
ResourceTable.ini:
&lt;code>[Resources]
res_1=Path/To/Resource/resource1.suffix|Path/To/Export/Resource/On/User/Computer/resource1.suffix
res_2=Path/To/Resource/resource2.suffix|Path/To/Export/Resource/On/User/Computer/resource2.suffix&lt;/code>
&lt;code>QString fileResources = "Path/To/ResourceTable.ini";
ResourceManager resManager("Path/To/Setup.exe");
if(!resManager.importResourcesFromFile(fileResources))
 resManager.displayError();
else
 QMessageBox::information(this, "ResourceManager", "Import successful!");&lt;/code>

I strongly recommend not to call the resourcemanager algorithms manually, because there are lots of mistakes that can happen like typing a wrong resource path, using forbidden characters (e.g.g backslash) and so on.
It is advisable to use the user interface instead.

=== Using graphical user interface ===

For using the interface, you only have to create a new project and import all files given above (resourcemanager.h/.cpp, mainwindow.h/.cpp, myQDialogGetFile.h/.cpp, myQDialogGetNewFile.h/.cpp), compile and run it.
After the mainwindow is shown, you can select new resources from your computer and add them to the resource table, or you can load an already existing resource table (ini file). By clicking the button "import to library" you can import all files from the table to your specified setup file.
You can also save the chosen resources as a new resource table file for later use.

=== Exporting resources on clients computer ===

The only thing you have to modify in your setup file project is to add the two resourcemanager files (resourcemanager.h/.cpp) and place the following command into the main function (or anywhere else at the point of execution where resources should be exported):
&lt;code>int main(int argc, char** args)
{
 ResourceManager resManager("Path/To/Setup.exe", ResourceManager::EXPORT);
 if(!resManager.exportResources())
 resManager.displayError();
 else
 QMessageBox::information(this, "ResourceManager", "Export successful!");

//continue execution as wanted‚Ä¶
}&lt;/code>
The path you have to pass to the ResourceManager is the path of the setup file itsself, because there are the resources stored.

== Files ==

=== resourcemanager.h ===

&lt;code>// Library - resourcemanager.h

#ifndef ''HEADER_RESOURCEMANAGER''
#define ''HEADER_RESOURCEMANAGER''

// ‚Äî‚Äî header includes ‚Äî‚Äî

#include "windows.h"
#include &lt;QApplication>
#include &lt;QMessageBox>
#include &lt;QString>
#include &lt;QTextStream>
#include &lt;QDir>
#include &lt;QSettings>
#include &lt;QFile>

// ‚Äî‚Äî class forward declaration ‚Äî‚Äî

class ResourceManager;

// ‚Äî‚Äî class declaration ‚Äî‚Äî

class ResourceManager
{
 public:
 enum enumType {IMPORT, EXPORT};

private:
 enumType type;
 QString fileLibrary, idResourceTable, idResource, keyResourceTableFile, errorMessage;
 QByteArray dataResourceTableImport, dataResourceTableExport;

public:
 ResourceManager(const QString &amp;library = "", enumType type = ResourceManager::IMPORT);
 bool setLibrary(const QString &amp;);
 bool importResourcesFromFile(const QString &amp;);
 bool importResourcesFromList(QStringList &amp;);
 bool exportResources();
 void displayError();

private:
 bool createResourceTableFromFile(const QString &amp;);
 bool createResourceTableFromList(QStringList &amp;);
 bool importResourceTable(HANDLE);
 bool importResources(HANDLE);
 bool exportResourceTable(HANDLE);
 bool exportResources(HANDLE);
};

#endif&lt;/code>

=== resourcemanager.cpp ===

&lt;code>// Library - resourcemanager.cpp

// ‚Äî‚Äî header includes ‚Äî‚Äî

#include "resourcemanager.h"

// ‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî-
 // ‚Äî‚Äî ResourceManager ‚Äî‚Äî
 // ‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî
 // ‚Äî‚Äî constructors ‚Äî‚Äî

ResourceManager::ResourceManager(const QString &amp;library, enumType type)
 {
 this->setLibrary(library);
 this->type = type;

this->idResourceTable = "myResource_Table";
 this->idResource = "myResource_";
 this->keyResourceTableFile = "Resources/res_";
 this->dataResourceTableImport.clear();
 this->dataResourceTableExport.clear();

this->errorMessage = "No errors occured!";
 }

// ‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî
 // ‚Äî‚Äî private functions ‚Äî‚Äî

bool ResourceManager::importResourceTable(HANDLE hLibrary)
 {
 if(this->type [[Image:= ResourceManager::IMPORT)
    {
      this->errorMessage = "Import access denied|]] Object is in export mode.";
 return false;
 }
 LPVOID cdataResourceTableExport = (LPVOID)this->dataResourceTableExport.data();
 if(!UpdateResource(hLibrary,
 RT_RCDATA,
 this->idResourceTable.toStdWString().c_str(),
 MAKELANGID (LANG_NEUTRAL, SUBLANG_DEFAULT),
 cdataResourceTableExport,
 this->dataResourceTableExport.length()))
 {
 this->errorMessage = "Unexpected error occured: failed to update resource table";
 return false;
 }
 return true;
 }

bool ResourceManager::importResources(HANDLE hLibrary)
 {
 QList&lt;QByteArray> resources = this->dataResourceTableImport.split('?');
 for(int i = 0, ii = 1; i &lt; resources.count(); i+'', ii)
 {
 QString resourceInfo = resources.at(i);
 if(!resourceInfo.contains("|"))
 {
 this->errorMessage = "Invalid resource table configuration (missing separator '|')";
 return false;
 }
 resourceInfo.replace("", "/");
 QString resourceFrom = resourceInfo.split("|").at(0),
 resourceTo = resourceInfo.split("|").at(1);
 if(resourceFrom.contains(QRegExp("[|'''?quot;&lt;> ]")) || resourceTo.contains(QRegExp("[|'''?quot;&lt;> ]")))
 {
 this->errorMessage = "Invalid resource table configuration (forbidden characters '|'''?quot;&lt;>')";
 return false;
 }
 if(resourceFrom.count(":") > 1 || resourceTo.count(":") > 1)
 {
 this->errorMessage = "Invalid resource table configuration (forbidden multi occurrence of ':', only allowed for drive specification)";
 return false;
 }

 QFile file(resourceFrom);
 if(!file.exists())
 {
 this->errorMessage = "A specified resource doesn't exist: '"''resourceFrom''"'";
 return false;
 }
 QByteArray resourceData;
 if(file.open(QIODevice::ReadOnly))
 {
 resourceData = file.readAll();
 file.close();
 }
 else
 {
 this->errorMessage = "Unexpected error occured: failed to open resource: '"''resourceFrom''"'";
 return false;
 }

 QString idResource = this->idResource+QString::number(ii);
 LPVOID cResourceData = (LPVOID)(LPCTSTR)resourceData.data();
 if(!UpdateResource(hLibrary,
 RT_RCDATA,
 idResource.toStdWString().c_str(),
 MAKELANGID (LANG_NEUTRAL, SUBLANG_DEFAULT),
 cResourceData,
 resourceData.size()))
 {
 this->errorMessage = "Unexpected error occured: failed to update resource: '"''resourceFrom''"'";
 return false;
 }
 }
 return true;
 }

 bool ResourceManager::exportResourceTable(HANDLE hLibrary)
 {
 if(this->type [[Image:= ResourceManager::EXPORT)
    {
      this->errorMessage = "Export access denied|]] Object is in import mode.";
 return false;
 }
 HANDLE hResource = FindResource((HMODULE)hLibrary, this->idResourceTable.toStdWString().c_str(), RT_RCDATA);
 if (hResource != NULL)
 {
 int resourceSize = (int)SizeofResource((HMODULE)hLibrary, (HRSRC)hResource);
 HANDLE hResourceLoaded = LoadResource((HMODULE)hLibrary, (HRSRC)hResource);
 if (hResourceLoaded != NULL)
 {
 QByteArray resourceData = QByteArray::fromRawData((char''')LockResource(hResourceLoaded), resourceSize);
 if(resourceData.size() > 0)
 this->dataResourceTableExport = resourceData;
 else
 {
 this->errorMessage = "Unexpected error occured: failed to lock resource table";
 return false;
 }
 }
 else
 {
 this->errorMessage = "Unexpected error occured: failed to load resource table";
 return false;
 }
 }
 else
 {
 this->errorMessage = "Unexpected error occured: failed to locate resource table";
 return false;
 }
 return true;
 }

 bool ResourceManager::exportResources(HANDLE hLibrary)
 {
 QList&lt;QByteArray> listResources = this->dataResourceTableExport.split('?');

 for(int i = 0; i &lt; listResources.count(); i)
 {
 if(!listResources.at(i).contains('|'))
 {
 this->errorMessage = "Invalid resource table configuration (missing separator '|')";
 return false;
 }
 QString idResource = this->idResource+listResources.at(i).split('|').at(0),
 resourceTo = listResources.at(i).split('|').at(1);

 if(resourceTo.contains('/'))
 {
 QStringList resourceToDirs = resourceTo.split('/');
 resourceToDirs.removeLast();
 QDir directory;
 QString resourceToDir;
 for(int ii = 0; ii &lt; resourceToDirs.count(); ii)
 {
 resourceToDir''= (ii  0) ? resourceToDirs.at(ii) : "/"+resourceToDirs.at(ii);
        }
        directory.mkpath(resourceToDir);
      }
      LPCTSTR cidResource = (LPCTSTR)idResource.toStdWString().c_str();
      HANDLE hResource = FindResource((HMODULE)hLibrary, cidResource, RT_RCDATA);
      if (hResource  NULL)
 {
 this->errorMessage = "Unexpected error occured: failed to locate resource";
 return false;
 }
 int resourceSize = (int)SizeofResource((HMODULE)hLibrary, (HRSRC)hResource);
 HANDLE hResourceLoaded = LoadResource((HMODULE)hLibrary, (HRSRC)hResource);
 if (hResourceLoaded != NULL)
 {
 QByteArray resourceData = QByteArray::fromRawData((char*)LockResource(hResourceLoaded), resourceSize);
 if(resourceData.size() > 0)
 {
 QFile file(resourceTo);
 if(file.open(QIODevice::WriteOnly))
 {
 file.write(resourceData);
 file.close();
 }
 else
 {
 this->errorMessage = "Unexpected error occured: failed to create resource file";
 return false;
 }
 }
 else
 {
 this->errorMessage = "Unexpected error occured: failed to lock resource";
 return false;
 }
 }
 else
 {
 this->errorMessage = "Unexpected error occured: failed to load resource";
 return false;
 }
 }
 return true;
 }

bool ResourceManager::createResourceTableFromFile(const QString &amp;fileResources)
 {
 QSettings iniResources(fileResources, QSettings::IniFormat);
 QString dataResourceTableImport, dataResourceTableExport;
 for(int i = 1; iniResources.value(this->keyResourceTableFile+QString::number(i), "").toString() != ""; i++)
 {
 QString resourceInfo = iniResources.value(this->keyResourceTableFile+QString::number(i), "").toString();
 if(!resourceInfo.contains("|"))
 {
 this->errorMessage = "Invalid resource table configuration (missing separator '|')";
 return false;
 }
 resourceInfo.replace("", "/");
 QString resourceFrom = resourceInfo.split("|").at(0),
 resourceTo = resourceInfo.split("|").at(1);
 if(resourceFrom.contains(QRegExp("[|'''?quot;&lt;> ]")) || resourceTo.contains(QRegExp("[|'''?quot;&lt;> ]")))
 {
 this->errorMessage = "Invalid resource table configuration (forbidden characters '|*?quot;&lt;>')";
 return false;
 }
 if(resourceFrom.count(":") > 1 || resourceTo.count(":") > 1)
 {
 this->errorMessage = "Invalid resource table configuration (forbidden multi occurrence of ':', only allowed for drive specification)";
 return false;
 }
 if(!QFile::exists(resourceFrom))
 {
 this->errorMessage = "A specified resource doesn't exist: '"''resourceFrom''"'";
 return false;
 }
 dataResourceTableImport = (i  1) ? resourceFrom+"|"+resourceTo : dataResourceTableImport+"?"+resourceFrom+"|"+resourceTo;
      dataResourceTableExport = (i  1) ? QString::number(i)+"|"''resourceTo : dataResourceTableExport''"?"''QString::number(i)''"|"''resourceTo;
 }
 this->dataResourceTableImport = dataResourceTableImport.toStdString().c_str();
 this->dataResourceTableExport = dataResourceTableExport.toStdString().c_str();
 return true;
 }

 bool ResourceManager::createResourceTableFromList(QStringList &amp;listResources)
 {
 if(listResources.count()  0)
      return false;
    QString dataResourceTableImport, dataResourceTableExport;
    for(int i = 0, ii = 1; i &lt; listResources.count(); i++, ii++)
    {
      QString resourceInfo = listResources.at(i);
      resourceInfo.replace("\\", "/");
      QString resourceFrom = resourceInfo.split("|").at(0), resourceTo = resourceInfo.split("|").at(1);
      if(!QFile::exists(resourceFrom))
      {
        this->errorMessage = "Non-existing resources were found.";
        return false;
      }
      if(resourceFrom.contains(QRegExp("[|*?\"&lt;> ]")) || resourceTo.contains(QRegExp("[|*?\"&lt;> ]")))
      {
        this->errorMessage = "Invalid resource table configuration (forbidden characters '|*?\"&lt;>')";
        return false;
      }
      if(resourceFrom.count(":") > 1 || resourceTo.count(":") > 1)
      {
        this->errorMessage = "Invalid resource table configuration (forbidden multi occurrence of ':', only allowed for drive specification)";
       return false;
      }
      dataResourceTableImport = (ii  1) ? resourceFrom''"|"''resourceTo : dataResourceTableImport''"?"''resourceFrom''"|"''resourceTo;
 dataResourceTableExport = (ii == 1) ? QString::number(ii)''"|"''resourceTo : dataResourceTableExport''"?"''QString::number(ii)''"|"''resourceTo;
 }
 this->dataResourceTableImport = dataResourceTableImport.toStdString().c_str();
 this->dataResourceTableExport = dataResourceTableExport.toStdString().c_str();
 return true;
 }


 // ‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî
 // ‚Äî‚Äî public functions ‚Äî‚Äî

 bool ResourceManager::setLibrary(const QString &amp;library)
 {
 if(!QFile::exists(library) &amp;&amp; library != "")
 return false;
 this->fileLibrary = library;
 return true;
 }

 bool ResourceManager::importResourcesFromFile(const QString &amp;fileResourceTable)
 {
 if(!QFile::exists(this->fileLibrary))
 {
 this->errorMessage = "The specified library doesn't exist.";
 return false;
 }
 if(!QFile::exists(fileResourceTable))
 {
 this->errorMessage = "The specified resource table doesn't exist.";
 return false;
 }
 if(!fileResourceTable.contains(".ini"))
 {
 this->errorMessage = "The specified resource table is no valid file format ('.ini' expected).";
 return false;
 }
 this->createResourceTableFromFile(fileResourceTable);
 HANDLE hLibrary = BeginUpdateResource(this->fileLibrary.toStdWString().c_str(), FALSE);
 if(hLibrary == NULL)
 {
 this->errorMessage = "Unexpected error occured: failed to open library";
 return false;
 }
 if(!this->importResourceTable(hLibrary))
 return false;
 if(!this->importResources(hLibrary))
 return false;
 EndUpdateResource(hLibrary, false);
 return true;
 }

 bool ResourceManager::importResourcesFromList(QStringList &amp;listResourceTable)
 {
 if(!QFile::exists(this->fileLibrary))
 {
 this->errorMessage = "The specified library doesn't exist.";
 return false;
 }
 this->createResourceTableFromList(listResourceTable);
 HANDLE hLibrary = BeginUpdateResource(this->fileLibrary.toStdWString().c_str(), FALSE);
 if(hLibrary == NULL)
 {
 this->errorMessage = "Unexpected error occured: failed to open library";
 return false;
 }
 if(!this->importResourceTable(hLibrary))
 return false;
 if(!this->importResources(hLibrary))
 return false;
 EndUpdateResource(hLibrary, false);
 return true;
 }

 bool ResourceManager::exportResources()
 {
 if(!QFile::exists(this->fileLibrary))
 {
 this->errorMessage = "The specified library doesn't exist.";
 return false;
 }
 HANDLE hLibrary = LoadLibrary(this->fileLibrary.toStdWString().c_str());
 if(hLibrary == NULL)
 {
 this->errorMessage = "Unexpected error occured: failed to open library";
 return false;
 }
 if(!this->exportResourceTable(hLibrary))
 return false;
 if(!this->exportResources(hLibrary))
 return false;
 FreeLibrary((HMODULE)hLibrary);

 return true;
 }

 void ResourceManager::displayError()
 {
 if(this->type == ResourceManager::IMPORT)
 QMessageBox::information(0, "Import failed", this->errorMessage);
 else
 QMessageBox::information(0, "Export failed", this->errorMessage);
 }&lt;/code>

=== mainwindow.h ===
&lt;code>// ResourceManager - mainwindow.h

#ifndef ''HEADER_RESOURCEMANAGER_MAINWINDOW''
#define ''HEADER_RESOURCEMANAGER_MAINWINDOW''

// ‚Äî‚Äî header includes ‚Äî‚Äî

#include &lt;QDebug>
#include &lt;QApplication>
#include &lt;QObject>
#include &lt;QDesktopWidget>
#include &lt;QWidget>
#include &lt;QMessageBox>
#include &lt;QHBoxLayout>
#include &lt;QVBoxLayout>
#include &lt;QGridLayout>
#include &lt;QFileSystemModel>
#include &lt;QFileIconProvider>
#include &lt;QTreeView>
#include &lt;QListWidget>
#include &lt;QTableWidget>
#include &lt;QHeaderView>
#include &lt;QLabel>
#include &lt;QLineEdit>
#include &lt;QPushButton>
#include "myQDialogGetFile.h"
#include "myQDialogGetNewFile.h"
#include "resourcemanager.h"


// ‚Äî‚Äî class forward declaration ‚Äî‚Äî

class window_main;


// ‚Äî‚Äî class declaration ‚Äî‚Äî

class window_main : public QWidget
{
 Q_OBJECT

 private:
 myQDialogGetFile *winGetLibrary, *winGetResourceTable;
 myQDialogGetNewFile *winGetNewResourceTable;
 QString workingDirectory, nameResourceTableFileStd;
 QHBoxLayout *layoutMain, *layoutRightTwoLibrary, *layoutRightTwoResources;
 QVBoxLayout *layoutLeft, *layoutMiddle, *layoutRightOne, *layoutRightTwo;
 QGridLayout *layoutRight;
 QFileSystemModel *filesystemmodel;
 QTreeView *treeview;
 QListWidget *listDirectories;
 QTableWidget *tableResources;
 QLabel *labelTreeview, *labelListWidget, *labelTableWidget, *labelLibrary;
 QLineEdit *editLibrary;
 QPushButton *addResources, *removeResources, *clearResources,
 *getResources, *saveResources,
 *getLibrary, *clearLibrary,
 *importAll, *exportAll;
 QDir directory;

 public:
 enum enumWidgets {TABLE_RESOURCES, EDIT_LIBRARY};

 public:
 window_main(QString, QWidget '''parent = 0);
 void showEvent(QShowEvent''');

 private:
 void updateButtonState();
 void highlightErrors(enumWidgets);
 QString adaptStringWidth(const QString &amp;, int);

 public slots:
 void treeviewClicked(const QModelIndex &amp;);
 void listwidgetItemDoubleClicked(QListWidgetItem ''');
 void tableResourcesRowsChanged(QModelIndex, int, int);
 void editLibraryTextChanged(const QString &amp;);
 void buttonAddResources();
 void buttonRemoveResources();
 void buttonClearResources();
 void buttonGetResources();
 void buttonSaveResources();
 void buttonGetLibrary();
 void buttonClearLibrary();
 void buttonImportAll();
 void buttonExportAll();
};

#endif&lt;/code>

=== mainwindow.cpp ===
&lt;code>// ResourceManager - mainwindow.cpp

 // ‚Äî‚Äî header includes ‚Äî‚Äî

 #include "mainwindow.h"


 // ‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî-
 // ‚Äî‚Äî main ‚Äî‚Äî

 int main(int argc, char'''* args)
 {
 QApplication app(argc, args);
 QString filePath = args[0];

 window_main winMain(filePath);

 return app.exec();
 }


 // ‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî-
 // ‚Äî‚Äî window_main ‚Äî‚Äî
 // ‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî
 // ‚Äî‚Äî constructors ‚Äî‚Äî

 window_main::window_main(QString filePath, QWidget *parent) : QWidget(parent)
 {
 QStringList workingDirs = QString(filePath).split("");
 workingDirs.removeLast();
 for(int i = 0; i &lt; workingDirs.count(); i)
 this->workingDirectory''= (i == 0) ? workingDirs.at(i) : ""''workingDirs.at(i);

 this->nameResourceTableFileStd = "ResourceTable.ini";

 this->layoutMain = new QHBoxLayout;
 this->directory = QDir(QDir::currentPath());
 this->filesystemmodel = new QFileSystemModel;
 this->filesystemmodel->setRootPath(QDir::currentPath());
 this->filesystemmodel->setFilter(QDir::Drives|QDir::AllDirs|QDir::Dirs|QDir::NoDotAndDotDot);

 this->layoutLeft = new QVBoxLayout;
 this->labelTreeview = new QLabel("Computer:");
 this->layoutLeft->addWidget(this->labelTreeview);
 this->treeview = new QTreeView;
 this->layoutLeft->addWidget(this->treeview);
 this->treeview->setModel(this->filesystemmodel);
 this->treeview->setFixedWidth(270);
 this->treeview->setHeaderHidden(true);
 for(int i = 1; i &lt; this->filesystemmodel->columnCount(); i)
 this->treeview->hideColumn(i);
 this->treeview->resizeColumnToContents(0);
 this->treeview->header()->setStretchLastSection(false);
 this->treeview->setIndentation(20);
 this->treeview->setSortingEnabled(true);
 this->treeview->setAnimated(false);
 this->treeview->setCurrentIndex(this->filesystemmodel->index(QApplication::applicationDirPath()));
 connect(this->treeview, SIGNAL (clicked(const QModelIndex &amp;)), this, SLOT (treeviewClicked(const QModelIndex &amp;)));
 connect(this->treeview, SIGNAL (expanded(const QModelIndex &amp;)), this, SLOT (treeviewClicked(const QModelIndex &amp;)));
 this->layoutMain->addLayout(this->layoutLeft);

 this->layoutMiddle = new QVBoxLayout;
 this->labelListWidget = new QLabel;
 this->layoutMiddle->addWidget(this->labelListWidget);
 this->listDirectories = new QListWidget;
 this->layoutMiddle->addWidget(listDirectories);
 this->listDirectories->setFixedWidth(300);
 this->listDirectories->setSelectionMode(QAbstractItemView::ExtendedSelection);
 connect(this->listDirectories, SIGNAL (itemDoubleClicked(QListWidgetItem *)), this, SLOT (listwidgetItemDoubleClicked(QListWidgetItem *)));
 this->labelListWidget->setText(this->adaptStringWidth(this->filesystemmodel->filePath(this->treeview->currentIndex()), this->listDirectories->width()-10));
 this->layoutMain->addLayout(this->layoutMiddle);

 this->layoutRight = new QGridLayout;

 this->layoutRightOne = new QVBoxLayout;
 this->addResources = new QPushButton("Add >>");
 this->layoutRightOne->addWidget(this->addResources);
 connect(this->addResources, SIGNAL (clicked()), this, SLOT (buttonAddResources()));
 this->removeResources = new QPushButton("&lt;&lt; Remove");
 this->layoutRightOne->addWidget(this->removeResources);
 connect(this->removeResources, SIGNAL (clicked()), this, SLOT (buttonRemoveResources()));

 this->layoutRight->addLayout(this->layoutRightOne, 1, 0);
 this->labelTableWidget = new QLabel("Manual selection:");
 this->layoutRight->addWidget(this->labelTableWidget, 0, 1);
 this->tableResources = new QTableWidget;
 this->layoutRight->addWidget(this->tableResources, 1, 1);
 this->tableResources->setMinimumSize(350, 250);
 this->tableResources->setSelectionMode(QAbstractItemView::ExtendedSelection);
 this->tableResources->setRowCount(0);
 this->tableResources->setColumnCount(2);
 this->tableResources->verticalHeader()->hide();
 QStringList tableResourcesHeaderH;
 tableResourcesHeaderH &lt;&lt; "Import path" &lt;&lt; "Export path";
 this->tableResources->setHorizontalHeaderLabels(tableResourcesHeaderH);
 this->tableResources->horizontalHeader()->setSectionResizeMode(QHeaderView::Stretch);
 for(int i = 0; i &lt; this->tableResources->rowCount(); i''+)
 this->tableResources->setRowHeight(i, 17);
 QAbstractItemModel *tableResourcesModel = this->tableResources->model();
 connect(tableResourcesModel, SIGNAL (rowsInserted(QModelIndex,int,int)), this, SLOT (tableResourcesRowsChanged(QModelIndex, int, int)));
 connect(tableResourcesModel, SIGNAL (rowsRemoved(QModelIndex,int,int)), this, SLOT (tableResourcesRowsChanged(QModelIndex, int, int)));

this->layoutRightTwo = new QVBoxLayout;
 this->layoutRightTwoResources = new QHBoxLayout;
 this->clearResources = new QPushButton("reset");
 this->layoutRightTwoResources->addWidget(this->clearResources);
 connect(this->clearResources, SIGNAL (clicked()), this, SLOT (buttonClearResources()));
 this->getResources = new QPushButton("load resources");
 this->layoutRightTwoResources->addWidget(this->getResources);
 connect(this->getResources, SIGNAL (clicked()), this, SLOT (buttonGetResources()));
 this->saveResources = new QPushButton("save resources");
 this->layoutRightTwoResources->addWidget(this->saveResources);
 connect(this->saveResources, SIGNAL (clicked()), this, SLOT (buttonSaveResources()));
 this->layoutRightTwo->addLayout(this->layoutRightTwoResources);

this->labelLibrary = new QLabel("Library:");
 this->layoutRightTwo->addWidget(this->labelLibrary);
 this->layoutRightTwoLibrary = new QHBoxLayout;
 this->editLibrary = new QLineEdit;
 this->layoutRightTwoLibrary->addWidget(this->editLibrary);
 this->editLibrary->setReadOnly(true);
 connect(this->editLibrary, SIGNAL (textChanged(const QString &amp;)), this, SLOT (editLibraryTextChanged(const QString &amp;)));
 this->getLibrary = new QPushButton("search");
 this->layoutRightTwoLibrary->addWidget(this->getLibrary);
 connect(this->getLibrary, SIGNAL (clicked()), this, SLOT (buttonGetLibrary()));
 this->clearLibrary = new QPushButton("reset");
 this->layoutRightTwoLibrary->addWidget(this->clearLibrary);
 connect(this->clearLibrary, SIGNAL (clicked()), this, SLOT (buttonClearLibrary()));
 this->layoutRightTwo->addLayout(this->layoutRightTwoLibrary);

this->importAll = new QPushButton("import to library");
 this->layoutRightTwo->addWidget(this->importAll);
 connect(this->importAll, SIGNAL (clicked()), this, SLOT (buttonImportAll()));
 this->exportAll = new QPushButton("export from library");
 this->layoutRightTwo->addWidget(this->exportAll);
 connect(this->exportAll, SIGNAL (clicked()), this, SLOT (buttonExportAll()));
 this->updateButtonState();

this->layoutRight->addLayout(this->layoutRightTwo, 2, 1);
 this->layoutMain->addLayout(this->layoutRight);

this->winGetResourceTable = new myQDialogGetFile(this, "Choose ResourceTable file:", "choose");
 QStringList suffixFilterResourceTable;
 suffixFilterResourceTable &lt;&lt; "ini";
 this->winGetResourceTable->setSuffixFilter(suffixFilterResourceTable);
 this->winGetNewResourceTable = new myQDialogGetNewFile("ini", this, "ResourceManager", "Choose file destination:", "save");
 this->winGetLibrary = new myQDialogGetFile(this, "Select library:");

this->setLayout(layoutMain);
 this->setWindowTitle("ResourceManager");
 this->show();
 this->move(QApplication::desktop()->screen()->rect().center() - this->rect().center());
 }

// ‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî
 // ‚Äî‚Äî public events ‚Äî‚Äî

void window_main::showEvent(QShowEvent '''event)
 {
 QWidget::showEvent(event);
 this->treeviewClicked(this->treeview->currentIndex());
 }


 // ‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî
 // ‚Äî‚Äî public slots ‚Äî‚Äî

 void window_main::treeviewClicked(const QModelIndex &amp;currentIndex)
 {
 if(!currentIndex.isValid())
 return;
 QString dirPath = this->filesystemmodel->filePath(currentIndex);
 dirPath.replace("", "/");
 this->labelListWidget->setText(this->adaptStringWidth(dirPath, this->listDirectories->width()-10));
 this->directory = QDir(dirPath);
 QStringList dirContents = directory.entryList(QDir::Files|QDir::NoDotAndDotDot, QDir::DirsFirst);
 if(this->listDirectories->count() > 0)
 this->listDirectories->clear();

 for(int i = 0; i &lt; dirContents.count(); i+'')
 {
 QFileInfo fileInfo;
 if(dirPath.right(1) == "/")
 fileInfo.setFile(dirPath+dirContents.at(i));
 else
 fileInfo.setFile(dirPath''"/"''dirContents.at(i));

 QFileIconProvider iconProvider;
 this->listDirectories->addItem(new QListWidgetItem(iconProvider.icon(fileInfo), dirContents.at(i)));
 this->listDirectories->item(this->listDirectories->count()-1)->setFlags(Qt::ItemIsSelectable|Qt::ItemIsUserCheckable|Qt::ItemIsEnabled);
 }
 }

 void window_main::listwidgetItemDoubleClicked(QListWidgetItem '''item)
 {
 this->buttonAddResources();
 }

 void window_main::tableResourcesRowsChanged(QModelIndex, int, int)
 {
 this->updateButtonState();
 }

 void window_main::editLibraryTextChanged(const QString &amp;pathLibrary)
 {
 this->updateButtonState();
 this->highlightErrors(window_main::EDIT_LIBRARY);
 if(!QFile::exists(pathLibrary) &amp;&amp; pathLibrary != "")
 QMessageBox::information(this, "Warning", "The selected file does not exist!");
 }

 void window_main::buttonAddResources()
 {
 QList&lt;QListWidgetItem'''> selectedItems = this->listDirectories->selectedItems();
 if(selectedItems.count()  0)
      return;
    int rowCountOld = this->tableResources->rowCount();
    foreach(QListWidgetItem *item, selectedItems)
    {
      QString dirPath = (this->directory.absolutePath().right(1)  "" || this->directory.absolutePath().right(1) == "/") ? this->directory.absolutePath() : this->directory.absolutePath()''"/";
 QList&lt;QTableWidgetItem'''> itemMatches = this->tableResources->findItems(dirPath+item->text(), Qt::MatchExactly);
 if(itemMatches.count() > 0)
 continue;
 this->tableResources->setRowCount(this->tableResources->rowCount()+1);
 this->tableResources->setRowHeight(this->tableResources->rowCount()-1, 17);
 this->tableResources->setItem(this->tableResources->rowCount()-1, 0, new QTableWidgetItem);
 this->tableResources->item(this->tableResources->rowCount()-1, 0)->setFlags(Qt::ItemIsSelectable|Qt::ItemIsEnabled);
 this->tableResources->item(this->tableResources->rowCount()-1, 0)->setIcon(item->icon());
 this->tableResources->item(this->tableResources->rowCount()-1, 0)->setText(dirPath+item->text());
 this->tableResources->item(this->tableResources->rowCount()-1, 0)->setToolTip(dirPath+item->text());
 this->tableResources->setItem(this->tableResources->rowCount()-1, 1, new QTableWidgetItem);
 this->tableResources->item(this->tableResources->rowCount()-1, 1)->setFlags(Qt::ItemIsSelectable|Qt::ItemIsEditable|Qt::ItemIsEnabled);
 this->tableResources->item(this->tableResources->rowCount()-1, 1)->setIcon(item->icon());
 this->tableResources->item(this->tableResources->rowCount()-1, 1)->setText("exportPath/"+item->text());
 this->tableResources->item(this->tableResources->rowCount()-1, 1)->setToolTip("Click to edit export path‚Ä¶");
 }
 if(this->tableResources->rowCount() != rowCountOld)
 this->labelTableWidget->setText("Manual selection:");
 this->highlightErrors(window_main::TABLE_RESOURCES);
 }

void window_main::buttonRemoveResources()
 {
 QList&lt;QTableWidgetItem*> selectedTableItems = this->tableResources->selectedItems();
 if(selectedTableItems.count() == 0)
 return;
 int rowCountOld = this->tableResources->rowCount();
 foreach(QTableWidgetItem* item, selectedTableItems)
 this->tableResources->removeRow(item->row());
 if(this->tableResources->rowCount() != rowCountOld)
 this->labelTableWidget->setText("Manual selection:");
 this->highlightErrors(window_main::TABLE_RESOURCES);
 }

void window_main::buttonClearResources()
 {
 while(this->tableResources->rowCount() > 0)
 this->tableResources->removeRow(0);
 this->labelTableWidget->setText("Manual selection:");
 }

void window_main::buttonGetResources()
 {
 this->winGetResourceTable->exec();
 if(!this->winGetResourceTable->isExecuted())
 return;
 QString winData = this->winGetResourceTable->getData();

if(QFileInfo(winData).suffix() != "ini")
 {
 QMessageBox::information(this, "Error", "The chosen file is no valid ResourceTable file format.file format: '.ini'");
 return;
 }
 this->buttonClearResources();

this->labelTableWidget->setText(this->adaptStringWidth(winData, this->tableResources->width()-10));

 QSettings iniFile(winData, QSettings::IniFormat);
 for(int i = 0; iniFile.value("Resources/res_"''QString::number(i+1), "").toString() != ""; i''+)
 {
 QStringList resourceInfo = iniFile.value("Resources/res_"+QString::number(i+1), "").toString().split("|");
 QFileInfo fileInfo;
 QFileIconProvider iconProvider;
 if(QFile::exists(resourceInfo.at(0)))
 fileInfo.setFile(resourceInfo.at(0));

 this->tableResources->setRowCount(this->tableResources->rowCount()''1);
 this->tableResources->setRowHeight(this->tableResources->rowCount()-1, 17);
 this->tableResources->setItem(this->tableResources->rowCount()-1, 0, new QTableWidgetItem);
 this->tableResources->item(this->tableResources->rowCount()-1, 0)->setFlags(Qt::ItemIsSelectable|Qt::ItemIsEnabled);
 if(QFile::exists(resourceInfo.at(0)))
 this->tableResources->item(this->tableResources->rowCount()-1, 0)->setIcon(iconProvider.icon(fileInfo));
 this->tableResources->item(this->tableResources->rowCount()-1, 0)->setText(resourceInfo.at(0));
 this->tableResources->setItem(this->tableResources->rowCount()-1, 1, new QTableWidgetItem);
 this->tableResources->item(this->tableResources->rowCount()-1, 1)->setFlags(Qt::ItemIsSelectable|Qt::ItemIsEditable|Qt::ItemIsEnabled);
 if(QFile::exists(resourceInfo.at(0)))
 this->tableResources->item(this->tableResources->rowCount()-1, 1)->setIcon(iconProvider.icon(fileInfo));
 this->tableResources->item(this->tableResources->rowCount()-1, 1)->setText(resourceInfo.at(1));
 this->tableResources->item(this->tableResources->rowCount()-1, 1)->setToolTip("Click to edit export path‚Ä¶");
 }
 this->highlightErrors(window_main::TABLE_RESOURCES);
 }

 void window_main::buttonSaveResources()
 {
 if(this->tableResources->rowCount() == 0)
 return;
 this->highlightErrors(window_main::TABLE_RESOURCES);
 this->winGetNewResourceTable->exec();
 if(!this->winGetNewResourceTable->isExecuted())
 return;
 QString winData = this->winGetNewResourceTable->getData();

 QSettings iniFile(winData, QSettings::IniFormat);
 QStringList resourceEntries;
 bool success = true;
 for(int i = 0; i &lt; this->tableResources->rowCount(); i''+)
 {
 if(!QFile::exists(this->tableResources->item(i, 0)->text()))
 {
 success = false;
 break;
 }
 QString resourceEntry = this->tableResources->item(i, 0)->text()+"|"''this->tableResources->item(i, 1)->text();
 resourceEntry.replace("", "/");
 if(resourceEntry.split("|").at(1).contains(QRegExp("[|'''?quot;&lt;> ]")))
 {
 int ret = QMessageBox::information(this, "ResourceManager", "Error occurred in resource: '"''resourceEntry.split("|").at(1)''"'contains illegal characters: '|'''?quot;&lt;> 'them may result in errors.resource?", QMessageBox::Yes | QMessageBox::No, QMessageBox::No);
 if(ret == QMessageBox::No)
 continue;
 }
 resourceEntries &lt;&lt; resourceEntry;
 iniFile.setValue("Resources/res_"''QString::number(i+1), resourceEntry);
 }
 if(!success)
 {
 QFile::remove(winData);
 QMessageBox::information(this, "ResourceManager", "Some resources have not been added to the resource file‚Ä¶");
 }
 else
 QMessageBox::information(this, "ResourceManager", "ResourceTable file successfully created!");
 }

 void window_main::buttonGetLibrary()
 {
 this->winGetLibrary->exec();
 if(this->winGetLibrary->getData().count() > 0)
 this->editLibrary->setText(this->winGetLibrary->getData());
 }

 void window_main::buttonClearLibrary()
 {
 this->editLibrary->setText("");
 }

 void window_main::buttonImportAll()
 {
 this->highlightErrors(window_main::TABLE_RESOURCES);
 this->highlightErrors(window_main::EDIT_LIBRARY);

 if(this->tableResources->rowCount()  0)
      return;
    QStringList listResources;
    for(int i = 0; i &lt; this->tableResources->rowCount(); i++)
    {
      QTableWidgetItem *itemFrom = this->tableResources->item(i, 0),
                       *itemTo = this->tableResources->item(i, 1);
      if(!QFile::exists(itemFrom->text()))
      {
        QMessageBox::information(this, "Warning", "Some resources don't exist or have been deleted!");
        return;
      }
        listResources &lt;&lt; itemFrom->text()+"|"+itemTo->text();
    }
    if(this->editLibrary->text().count()  0)
 {
 QMessageBox::information(this, "Warning", "No library selected!");
 return;
 }
 else if(!QFile::exists(this->editLibrary->text()))
 {
 QMessageBox::information(this, "Warning", "The selected library does not exist!");
 return;
 }
 ResourceManager resManager(this->editLibrary->text());
 if(!resManager.importResourcesFromList(listResources))
 resManager.displayError();
 else
 QMessageBox::information(this, "ResourceManager", "Import successful!");
 }

 void window_main::buttonExportAll()
 {
 this->highlightErrors(window_main::EDIT_LIBRARY);
 if(this->editLibrary->text().count() == 0)
 {
 QMessageBox::information(this, "Warning", "No library selected!");
 return;
 }
 else if(!QFile::exists(this->editLibrary->text()))
 {
 QMessageBox::information(this, "Warning", "The selected library does not exist!");
 return;
 }
 ResourceManager resManager(this->editLibrary->text(), ResourceManager::EXPORT);
 if(!resManager.exportResources())
 resManager.displayError();
 else
 QMessageBox::information(this, "ResourceManager", "Export successful!");
 }


 // ‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî
 // ‚Äî‚Äî private functions ‚Äî‚Äî

 void window_main::updateButtonState()
 {
 if(this->editLibrary->text().count()  0 || !QFile::exists(this->editLibrary->text()))
    {
      this->clearLibrary->setDisabled(true);
      this->importAll->setDisabled(true);
      this->exportAll->setDisabled(true);
    }
    else
    {
      this->clearLibrary->setEnabled(true);
      if(this->tableResources->rowCount() > 0)
        this->importAll->setEnabled(true);
      this->exportAll->setEnabled(true);
    }
    if(this->tableResources->rowCount()  0)
 {
 this->clearResources->setDisabled(true);
 this->saveResources->setDisabled(true);
 }
 else
 {
 this->clearResources->setEnabled(true);
 this->saveResources->setEnabled(true);
 }
 }

 void window_main::highlightErrors(enumWidgets widget)
 {
 if(widget  window_main::TABLE_RESOURCES)
    {
      for(int i = 0; i &lt; this->tableResources->rowCount(); i++)
      {
        QTableWidgetItem *itemFrom = this->tableResources->item(i, 0),
                         *itemTo = this->tableResources->item(i, 1);
        if(!QFile::exists(itemFrom->text()))
        {
          itemFrom->setBackgroundColor(QColor(255,228,225));
          itemTo->setBackgroundColor(QColor(255,228,225));
        }
        else
        {
          itemFrom->setBackgroundColor(QColor(255,255,255));
          itemTo->setBackgroundColor(QColor(255,255,255));
        }
      }
    }
    else if(widget  window_main::EDIT_LIBRARY)
 {
 QPalette palette;
 if(!QFile::exists(this->editLibrary->text()) &amp;&amp; this->editLibrary->text().count() > 0)
 palette.setColor(this->editLibrary->backgroundRole(), QColor(255,228,225));
 else
 palette.setColor(this->editLibrary->backgroundRole(), QColor(255,255,255));
 this->editLibrary->setPalette(palette);
 }
 }

 QString window_main::adaptStringWidth(const QString &amp;stringOld, int width)
 {
 if(QLabel(stringOld).fontMetrics().boundingRect(stringOld).width() &lt;= width)
 return stringOld;
 QString stringNew = "";
 for(int i = 0; i &lt; stringOld.count(); i)
 {
 stringNew''= stringOld.at(i);
 if(QLabel(stringNew).fontMetrics().boundingRect(stringNew).width()''QLabel("‚Ä¶").fontMetrics().boundingRect("‚Ä¶").width() >= width)
 break;
 }
 return stringNew''"‚Ä¶";
 }&lt;/code>

=== myQDialogGetFile.h ===
&lt;code>// Library- myQDialogGetFile.h

#ifndef ''HEADER_MYQDIALOGGETFILE''
#define ''HEADER_MYQDIALOGGETFILE''

// ‚Äî‚Äî header includes ‚Äî‚Äî

#include &lt;QApplication>
#include &lt;QDebug>
#include &lt;QWidget>
#include &lt;QMessageBox>
#include &lt;QHBoxLayout>
#include &lt;QVBoxLayout>
#include &lt;QFileSystemModel>
#include &lt;QFileIconProvider>
#include &lt;QLabel>
#include &lt;QTreeView>
#include &lt;QListWidget>
#include &lt;QTableWidget>
#include &lt;QHeaderView>
#include &lt;QLineEdit>
#include &lt;QPushButton>


// ‚Äî‚Äî class forward declaration ‚Äî‚Äî

class myQDialogGetFile;


// ‚Äî‚Äî class declaration ‚Äî‚Äî

class myQDialogGetFile : public QDialog
{
 Q_OBJECT

 private:
 QVBoxLayout *layoutMain, *layoutLeft, *layoutRight;
 QHBoxLayout *layoutTop, '''layoutBottom;
 QFileSystemModel''' filesystemmodel;
 QLabel *labelTreeview, '''labelListWidget;
 QTreeView''' treeview;
 QListWidget* listwidget;
 QString currentDirPath, filePath;
 QStringList suffixFilter;
 QLineEdit* edit;
 QPushButton* button;
 bool execution;

 public:
 myQDialogGetFile(QWidget '''parent = 0, const QString &amp;windowTitle = "Choose file:", const QString &amp;buttonText = "choose");
 void showEvent(QShowEvent''');
 void closeEvent(QCloseEvent*);
 void setButtonText(const QString &amp;);
 void setSuffixFilter(const QStringList &amp;);
 bool isExecuted();
 QString getData();

 private:
 QString adaptStringWidth(const QString &amp;, int);

 public slots:
 void treeviewClicked(const QModelIndex &amp;);
 void treeviewExpanded(const QModelIndex &amp;);
 void listwidgetitemClicked(QListWidgetItem*);
 void listwidgetitemDoubleClicked(QListWidgetItem*);
 void editTextChanged(QString);
 void buttonClicked();
};

#endif&lt;/code>

=== myQDialogGetFile.cpp ===
&lt;code>// Library - myQDialogGetFile.cpp

 // ‚Äî‚Äî header includes ‚Äî‚Äî

 #include "myQDialogGetFile.h"


 // ‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî-
 // ‚Äî‚Äî myQDialogGetFile ‚Äî‚Äî
 // ‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî
 // ‚Äî‚Äî constructors ‚Äî‚Äî

 myQDialogGetFile::myQDialogGetFile(QWidget *parent, const QString &amp;windowTitle, const QString &amp;buttonText) : QDialog(parent)
 {
 this->currentDirPath = QApplication::applicationDirPath().replace("", "/");
 this->filePath = "";
 this->suffixFilter.clear();

 this->layoutMain = new QVBoxLayout;
 this->layoutTop = new QHBoxLayout;
 this->filesystemmodel = new QFileSystemModel;
 this->filesystemmodel->setRootPath(QDir::rootPath());
 this->filesystemmodel->setFilter(QDir::Drives|QDir::AllDirs|QDir::Dirs|QDir::NoDotAndDotDot);

 this->layoutLeft = new QVBoxLayout;
 this->labelTreeview = new QLabel("Computer:");
 this->layoutLeft->addWidget(this->labelTreeview);
 this->treeview = new QTreeView;
 this->layoutLeft->addWidget(this->treeview);
 this->treeview->setFixedWidth(270);
 this->treeview->setMinimumHeight(320);
 this->treeview->setModel(this->filesystemmodel);
 this->treeview->setHeaderHidden(true);
 for(int i = 1; i &lt; this->filesystemmodel->columnCount(); i)
 this->treeview->hideColumn(i);
 this->treeview->resizeColumnToContents(0);
 this->treeview->header()->setStretchLastSection(false);
 this->treeview->setIndentation(20);
 this->treeview->setSortingEnabled(true);
 this->treeview->setAnimated(false);
 connect(this->treeview, SIGNAL (clicked(const QModelIndex &amp;)), this, SLOT (treeviewClicked(const QModelIndex &amp;)));
 connect(this->treeview, SIGNAL (expanded(const QModelIndex &amp;)), this, SLOT (treeviewExpanded(const QModelIndex &amp;)));
 this->layoutTop->addLayout(this->layoutLeft);

 this->layoutRight = new QVBoxLayout;
 this->labelListWidget = new QLabel;
 this->layoutRight->addWidget(this->labelListWidget);
 this->listwidget = new QListWidget;
 this->layoutRight->addWidget(listwidget);
 this->listwidget->setMinimumWidth(300);
 this->listwidget->setSelectionMode(QAbstractItemView::ExtendedSelection);
 connect(this->listwidget, SIGNAL (itemClicked(QListWidgetItem *)), this, SLOT (listwidgetitemClicked(QListWidgetItem *)));
 connect(this->listwidget, SIGNAL (itemDoubleClicked(QListWidgetItem *)), this, SLOT (listwidgetitemDoubleClicked(QListWidgetItem *)));
 this->layoutTop->addLayout(this->layoutRight);

 this->layoutBottom = new QHBoxLayout;
 this->edit = new QLineEdit;
 this->edit->setReadOnly(true);
 connect(this->edit, SIGNAL (textChanged(QString)), this, SLOT (editTextChanged(QString)));
 this->layoutBottom->addWidget(this->edit);
 this->button = new QPushButton(buttonText);
 this->layoutBottom->addWidget(this->button);
 connect(this->button, SIGNAL (clicked()), this, SLOT (buttonClicked()));
 this->layoutMain->addLayout(this->layoutTop);
 this->layoutMain->addLayout(this->layoutBottom);

 this->setLayout(layoutMain);
 this->setWindowTitle(windowTitle);
 }


 // ‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî
 // ‚Äî‚Äî public events ‚Äî‚Äî

 void myQDialogGetFile::showEvent(QShowEvent *event)
 {
 QDialog::showEvent(event);
 this->treeview->setCurrentIndex(this->filesystemmodel->index(this->currentDirPath));
 this->treeviewClicked(this->treeview->currentIndex());
 this->labelListWidget->setText(this->adaptStringWidth(this->currentDirPath, this->listwidget->width()-10));
 this->edit->setText(this->filePath);
 this->execution = false;
 }

 void myQDialogGetFile::closeEvent(QCloseEvent *event)
 {
 this->currentDirPath = this->filesystemmodel->filePath(this->treeview->currentIndex());
 QDialog::closeEvent(event);
 }


 // ‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî
 // ‚Äî‚Äî public slots ‚Äî‚Äî

 void myQDialogGetFile::treeviewClicked(const QModelIndex &amp;currentIndex)
 {
 if(!currentIndex.isValid())
 return;
 QString dirPath = this->filesystemmodel->filePath(currentIndex);
 dirPath.replace("", "/");
 this->currentDirPath = dirPath;
 this->labelListWidget->setText(this->adaptStringWidth(this->currentDirPath, this->listwidget->width()-10));

 QDir directory = QDir(dirPath);
 if(this->suffixFilter.count() > 0)
 directory.setNameFilters(this->suffixFilter);
 QStringList dirContents = directory.entryList(QDir::Files|QDir::NoDotAndDotDot, QDir::DirsFirst);
 if(this->listwidget->count() > 0)
 this->listwidget->clear();

 for(int i = 0; i &lt; dirContents.count(); i)
 {
 QFileInfo fileInfo;
 if(dirPath.right(1) == "/")
 fileInfo.setFile(dirPath+dirContents.at(i));
 else
 fileInfo.setFile(dirPath''"/"''dirContents.at(i));

 QFileIconProvider iconProvider;
 this->listwidget->addItem(new QListWidgetItem(iconProvider.icon(fileInfo), dirContents.at(i)));
 this->listwidget->item(this->listwidget->count()-1)->setFlags(Qt::ItemIsSelectable|Qt::ItemIsUserCheckable|Qt::ItemIsEnabled);
 }
 }

 void myQDialogGetFile::treeviewExpanded(const QModelIndex &amp;currentIndex)
 {
 if(!currentIndex.isValid())
 return;
 QString dirPath = this->filesystemmodel->filePath(currentIndex);
 dirPath.replace("", "/");
 this->currentDirPath = dirPath;
 this->labelListWidget->setText(this->adaptStringWidth(this->currentDirPath, this->listwidget->width()-10));

 QDir directory = QDir(dirPath);
 if(this->suffixFilter.count() > 0)
 directory.setNameFilters(this->suffixFilter);
 QStringList dirContents = directory.entryList(QDir::Files|QDir::NoDotAndDotDot, QDir::DirsFirst);
 if(this->listwidget->count() > 0)
 this->listwidget->clear();

 for(int i = 0; i &lt; dirContents.count(); i)
 {
 QFileInfo fileInfo;
 if(dirPath.right(1) == "/")
 fileInfo.setFile(dirPath+dirContents.at(i));
 else
 fileInfo.setFile(dirPath''"/"''dirContents.at(i));

 QFileIconProvider iconProvider;
 this->listwidget->addItem(new QListWidgetItem(iconProvider.icon(fileInfo), dirContents.at(i)));
 this->listwidget->item(this->listwidget->count()-1)->setFlags(Qt::ItemIsSelectable|Qt::ItemIsUserCheckable|Qt::ItemIsEnabled);
 }
 }

 void myQDialogGetFile::listwidgetitemClicked(QListWidgetItem *currentItem)
 {
 if(this->currentDirPath.right(1) == "/")
 this->edit->setText(this->currentDirPath+currentItem->text());
 else
 this->edit->setText(this->currentDirPath''"/"+currentItem->text());
 }

void myQDialogGetFile::listwidgetitemDoubleClicked(QListWidgetItem '''currentItem)
 {
 this->listwidgetitemClicked(currentItem);
 this->buttonClicked();
 }

 void myQDialogGetFile::editTextChanged(QString)
 {
 QString filePath = this->edit->text();
 filePath.replace("", "/");
 this->filePath = filePath;
 }

 void myQDialogGetFile::buttonClicked()
 {
 QString filePath = this->filePath;
 filePath.replace("", "/");
 if(filePath.contains(QRegExp("[|'''?quot;&lt;> ]")))
 {
 QMessageBox::information(this, "Error", "The specified file path contains illegal characters: '|'''?/quot;&lt;> '");
 return;
 }
 if(filePath.count(":") > 1)
 {
 QMessageBox::information(this, "Error", "Multiple occurence of charachter ':'");
 return;
 }
 if(!QFile::exists(filePath))
 {
 QMessageBox::information(this, "Error", "The specified file path doesn't exist or has been deleted.");
 return;
 }
 if(filePath.count() == 0)
 {
 QMessageBox::information(this, "Error", "No file selected.");
 return;
 }
 this->execution = true;
 this->close();
 }


 // ‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî
 // ‚Äî‚Äî private functions ‚Äî‚Äî

 QString myQDialogGetFile::adaptStringWidth(const QString &amp;stringOld, int width)
 {
 if(QLabel(stringOld).fontMetrics().boundingRect(stringOld).width() &lt;= width)
 return stringOld;
 QString stringNew = "";
 for(int i = 0; i &lt; stringOld.count(); i+'')
 {
 stringNew''= stringOld.at(i);
 if(QLabel(stringNew).fontMetrics().boundingRect(stringNew).width()''QLabel("‚Ä¶").fontMetrics().boundingRect("‚Ä¶").width() >= width)
 break;
 }
 return stringNew''"‚Ä¶";
 }


 // ‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî
 // ‚Äî‚Äî public functions ‚Äî‚Äî

 void myQDialogGetFile::setButtonText(const QString &amp;buttonText)
 {
 this->button->setText(buttonText);
 }

 void myQDialogGetFile::setSuffixFilter(const QStringList &amp;suffixFilter)
 {
 this->suffixFilter.clear();
 foreach(QString suffix, suffixFilter)
 {
 suffix.replace(QRegExp("['''. ]"), "");
 this->suffixFilter &lt;&lt; "*."''suffix;
 }
 }

 bool myQDialogGetFile::isExecuted()
 {
 return this->execution;
 }

 QString myQDialogGetFile::getData()
 {
 if(!this->execution)
 return "";
 return this->filePath;
 }&lt;/code>

=== myQDialogGetNewFile.h ===
&lt;code>// Library - myQDialogGetNewFile.h

#ifndef ''HEADER_MYQDIALOGGETNEWFILE''
#define ''HEADER_MYQDIALOGGETNEWFILE''

// ‚Äî‚Äî header includes ‚Äî‚Äî

#include &lt;QApplication>
#include &lt;QDebug>
#include &lt;QWidget>
#include &lt;QMessageBox>
#include &lt;QHBoxLayout>
#include &lt;QVBoxLayout>
#include &lt;QFileSystemModel>
#include &lt;QFileIconProvider>
#include &lt;QLabel>
#include &lt;QTreeView>
#include &lt;QListWidget>
#include &lt;QTableWidget>
#include &lt;QHeaderView>
#include &lt;QLineEdit>
#include &lt;QPushButton>


// ‚Äî‚Äî class forward declaration ‚Äî‚Äî

class myQDialogGetNewFile;


// ‚Äî‚Äî class declaration ‚Äî‚Äî

class myQDialogGetNewFile : public QDialog
{
 Q_OBJECT

 private:
 QVBoxLayout* layoutMain;
 QHBoxLayout* layoutBottom;
 QFileSystemModel* filesystemmodel;
 QLabel *labelTreeview, '''labelEdit;
 QTreeView''' treeview;
 QString currentDirPath, filePath, fileName, fileSuffix;
 QByteArray* fileData;
 QLineEdit* edit;
 QPushButton* button;
 bool execution;

 public:
 myQDialogGetNewFile(const QString &amp;fileSuffix, QWidget* parent = 0, const QString &amp;fileName = "untitled", const QString &amp;windowTitle = "Choose file destination:", const QString &amp;buttonText = "choose");
 void showEvent(QShowEvent*);
 void closeEvent(QCloseEvent*);
 void setFileSuffix(const QString &amp;);
 void setFileName(const QString &amp;);
 void setButtonText(const QString &amp;);
 bool isExecuted();
 QString getData();

 private:
 QString adaptStringWidth(const QString &amp;, int);

 public slots:
 void treeviewClicked(const QModelIndex &amp;);
 void treeviewExpanded(const QModelIndex &amp;);
 void editTextChanged(QString);
 void buttonClicked();
};

#endif&lt;/code>

=== myQDialogGetNewFile.cpp ===
&lt;code>// Library - myQDialogGetNewFile.cpp

 // ‚Äî‚Äî header includes ‚Äî‚Äî

 #include "myQDialogGetNewFile.h"


 // ‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî-
 // ‚Äî‚Äî myQDialogGetNewFile ‚Äî‚Äî
 // ‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî
 // ‚Äî‚Äî constructors ‚Äî‚Äî

 myQDialogGetNewFile::myQDialogGetNewFile(const QString &amp;fileSuffix, QWidget *parent, const QString &amp;fileName, const QString &amp;windowTitle, const QString &amp;buttonText) : QDialog(parent)
 {
 this->currentDirPath = QApplication::applicationDirPath().replace("", "/");
 this->fileName = fileName;
 this->fileSuffix = fileSuffix;
 this->filePath = (this->currentDirPath.right(1) == "/") ? this->currentDirPath+this->fileName''"."''this->fileSuffix : this->currentDirPath''"/"''this->fileName''"."''this->fileSuffix;

 this->layoutMain = new QVBoxLayout;
 this->filesystemmodel = new QFileSystemModel;
 this->filesystemmodel->setRootPath(QDir::rootPath());
 this->filesystemmodel->setFilter(QDir::Drives|QDir::AllDirs|QDir::Dirs|QDir::NoDotAndDotDot);

 this->labelTreeview = new QLabel;
 this->layoutMain->addWidget(this->labelTreeview);
 this->treeview = new QTreeView;
 this->layoutMain->addWidget(this->treeview);
 this->treeview->setMinimumSize(270,320);
 this->treeview->setModel(this->filesystemmodel);
 this->treeview->setHeaderHidden(true);
 for(int i = 1; i &lt; this->filesystemmodel->columnCount(); i''+)
 this->treeview->hideColumn(i);
 this->treeview->resizeColumnToContents(0);
 this->treeview->header()->setStretchLastSection(false);
 this->treeview->setIndentation(20);
 this->treeview->setSortingEnabled(true);
 this->treeview->setAnimated(false);
 connect(this->treeview, SIGNAL (clicked(const QModelIndex &amp;)), this, SLOT (treeviewClicked(const QModelIndex &amp;)));
 connect(this->treeview, SIGNAL (expanded(const QModelIndex &amp;)), this, SLOT (treeviewExpanded(const QModelIndex &amp;)));

this->layoutBottom = new QHBoxLayout;
 this->edit = new QLineEdit;
 this->edit->setText(this->fileName);
 connect(this->edit, SIGNAL (textChanged(QString)), this, SLOT (editTextChanged(QString)));
 this->layoutBottom->addWidget(this->edit);
 this->labelEdit = new QLabel;
 this->layoutBottom->addWidget(this->labelEdit);
 this->labelEdit->setText("."''this->fileSuffix);
 this->button = new QPushButton(buttonText);
 this->layoutBottom->addWidget(this->button);
 connect(this->button, SIGNAL (clicked()), this, SLOT (buttonClicked()));
 this->layoutMain->addLayout(this->layoutBottom);

 this->setLayout(layoutMain);
 this->setWindowTitle(windowTitle);
 }


 // ‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî
 // ‚Äî‚Äî public events ‚Äî‚Äî

 void myQDialogGetNewFile::showEvent(QShowEvent *event)
 {
 QDialog::showEvent(event);
 this->labelTreeview->setText(this->adaptStringWidth(this->currentDirPath, this->treeview->width()-10));
 this->treeview->setCurrentIndex(this->filesystemmodel->index(this->currentDirPath));
 this->treeviewClicked(this->treeview->currentIndex());
 this->edit->setText(this->fileName);
 this->execution = false;
 }

 void myQDialogGetNewFile::closeEvent(QCloseEvent *event)
 {
 this->currentDirPath = this->filesystemmodel->filePath(this->treeview->currentIndex());
 QDialog::closeEvent(event);
 }


 // ‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî
 // ‚Äî‚Äî public slots ‚Äî‚Äî

 void myQDialogGetNewFile::treeviewClicked(const QModelIndex &amp;currentIndex)
 {
 if(!currentIndex.isValid())
 return;
 QString dirPath = this->filesystemmodel->filePath(currentIndex);
 dirPath.replace("", "/");
 this->currentDirPath = dirPath;
 this->labelTreeview->setText(this->adaptStringWidth(this->currentDirPath, this->treeview->width()-10));
 this->filePath = (this->currentDirPath.right(1) == "/") ? this->currentDirPath+this->fileName''"."''this->fileSuffix : this->currentDirPath''"/"''this->fileName''"."''this->fileSuffix;
 }

 void myQDialogGetNewFile::treeviewExpanded(const QModelIndex &amp;currentIndex)
 {
 if(!currentIndex.isValid())
 return;
 QString dirPath = this->filesystemmodel->filePath(currentIndex);
 dirPath.replace("", "/");
 this->currentDirPath = dirPath;
 this->labelTreeview->setText(this->adaptStringWidth(this->currentDirPath, this->treeview->width()-10));
 this->filePath = (this->currentDirPath.right(1) == "/") ? this->currentDirPath+this->fileName''"."''this->fileSuffix : this->currentDirPath''"/"''this->fileName''"."''this->fileSuffix;
 }

 void myQDialogGetNewFile::editTextChanged(QString)
 {
 QString fileName = this->edit->text();
 fileName.replace("", "/");
 this->fileName = fileName;
 this->filePath = (this->currentDirPath.right(1) == "/") ? this->currentDirPath+this->fileName''"."''this->fileSuffix : this->currentDirPath''"/"''this->fileName''"."''this->fileSuffix;
 }

 void myQDialogGetNewFile::buttonClicked()
 {
 QString dirPath = this->currentDirPath, fileName = this->fileName, filePath = this->filePath;
 dirPath.replace("", "/");
 fileName.replace("", "/");
 filePath.replace("", "/");
 if(dirPath.contains(QRegExp("[|'''?quot;&lt;> ]")))
 {
 QMessageBox::information(this, "Error", "The specified file path contains illegal characters: '|'''?/quot;&lt;> '");
 return;
 }
 if(dirPath.count(":") > 1)
 {
 QMessageBox::information(this, "Error", "Multiple occurence of charachter ':'");
 return;
 }
 if(!QFile::exists(dirPath))
 {
 QMessageBox::information(this, "Error", "The specified file path doesn't exist or has been deleted.");
 return;
 }

 if(fileName.contains(QRegExp("[|'''?/quot;&lt;>: ]")))
 {
 QMessageBox::information(this, "Error", "The specified file name contains illegal characters: '|'''?/quot;&lt;>: '");
 return;
 }
 if(fileName.count() == 0)
 {
 QMessageBox::information(this, "Error", "Please type a valid file name.");
 return;
 }

 if(QFile::exists(filePath))
 {
 if(QMessageBox::information(this, "Warning", "The specified file already exists.existing file?", QMessageBox::Yes | QMessageBox::No, QMessageBox::No) == QMessageBox::No)
 return;
 }
 this->execution = true;
 this->close();
 }


 // ‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî
 // ‚Äî‚Äî private functions ‚Äî‚Äî

 QString myQDialogGetNewFile::adaptStringWidth(const QString &amp;stringOld, int width)
 {
 if(QLabel(stringOld).fontMetrics().boundingRect(stringOld).width() &lt;= width)
 return stringOld;
 QString stringNew = "";
 for(int i = 0; i &lt; stringOld.count(); i)
 {
 stringNew''= stringOld.at(i);
 if(QLabel(stringNew).fontMetrics().boundingRect(stringNew).width()''QLabel("‚Ä¶").fontMetrics().boundingRect("‚Ä¶").width() >= width)
 break;
 }
 return stringNew''"‚Ä¶";
 }

// ‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî
 // ‚Äî‚Äî public functions ‚Äî‚Äî

void myQDialogGetNewFile::setFileSuffix(const QString &amp;fileSuffix)
 {
 this->fileSuffix = fileSuffix;
 }

void myQDialogGetNewFile::setFileName(const QString &amp;fileName)
 {
 this->fileName = fileName;
 }

void myQDialogGetNewFile::setButtonText(const QString &amp;buttonText)
 {
 this->button->setText(buttonText);
 }

bool myQDialogGetNewFile::isExecuted()
 {
 return this->execution;
 }

QString myQDialogGetNewFile::getData()
 {
 if(!this->execution)
 return "";
 return this->filePath;
 }&lt;/code>

== Feedback ==

I would really appreciate it to get some feedback from you, so I can improve my own skills and make the algorithms better.
</textarea><div class="templatesUsed"><div class="mw-templatesUsedExplanation"><p>Templates used on this page:
</p></div><ul>
<li><a href="http://wiki.qt.io/Template:Ambox" title="Template:Ambox">Template:Ambox</a> (<a href="http://wiki.qt.io/index.php?title=Template:Ambox&amp;action=edit" title="Template:Ambox">view source</a>) </li><li><a href="http://wiki.qt.io/Template:Cleanup" title="Template:Cleanup">Template:Cleanup</a> (<a href="http://wiki.qt.io/index.php?title=Template:Cleanup&amp;action=edit" title="Template:Cleanup">view source</a>) </li></ul></div><p id="mw-returnto">Return to <a href="http://wiki.qt.io/Import-Export-resources-for-setup-creation" title="Import-Export-resources-for-setup-creation">Import-Export-resources-for-setup-creation</a>.</p>
</div>								<div class="printfooter">
				Retrieved from "<a href="http://wiki.qt.io/Import-Export-resources-for-setup-creation">http://wiki.qt.io/Import-Export-resources-for-setup-creation</a>"				</div>
												<div id='catlinks' class='catlinks catlinks-allhidden'></div>												<div class="visualClear"></div>
							</div>
		</div>
		<div id="mw-navigation">
			<h2>Navigation menu</h2>
			<div id="mw-head">
				<div id="p-personal" role="navigation" class="" aria-labelledby="p-personal-label">
	<h3 id="p-personal-label">Personal tools</h3>
	<ul>
<li id="pt-anonuserpage"><a href="http://wiki.qt.io/User:10.0.113.70" class="new" title="The user page for the IP address you are editing as [.]" accesskey=".">10.0.113.70</a></li><li id="pt-anontalk"><a href="http://wiki.qt.io/User_talk:10.0.113.70" class="new" title="Discussion about edits from this IP address [n]" accesskey="n">Talk for this IP address</a></li><li id="pt-login"><a href="http://wiki.qt.io/index.php?title=Special:QtLogin&amp;returnto=Import-Export-resources-for-setup-creation" title="You are encouraged to log in; however, it is not mandatory [o]" accesskey="o">Sign in</a></li>	</ul>
</div>
				<div id="left-navigation">
					<div id="p-namespaces" role="navigation" class="vectorTabs" aria-labelledby="p-namespaces-label">
	<h3 id="p-namespaces-label">Namespaces</h3>
	<ul>
					<li  id="ca-nstab-main" class="selected"><span><a href="http://wiki.qt.io/Import-Export-resources-for-setup-creation"  title="View the content page [c]" accesskey="c">Page</a></span></li>
					<li  id="ca-talk" class="new"><span><a href="http://wiki.qt.io/index.php?title=Talk:Import-Export-resources-for-setup-creation&amp;action=edit&amp;redlink=1"  title="Discussion about the content page [t]" accesskey="t">Discussion</a></span></li>
			</ul>
</div>
<div id="p-variants" role="navigation" class="vectorMenu emptyPortlet" aria-labelledby="p-variants-label">
	<h3 id="mw-vector-current-variant">
		</h3>
	<h3 id="p-variants-label"><span>Variants</span><a href="#"></a></h3>
	<div class="menu">
		<ul>
					</ul>
	</div>
</div>
				</div>
				<div id="right-navigation">
					<div id="p-views" role="navigation" class="vectorTabs" aria-labelledby="p-views-label">
	<h3 id="p-views-label">Views</h3>
	<ul>
					<li id="ca-view"><span><a href="http://wiki.qt.io/Import-Export-resources-for-setup-creation" >Read</a></span></li>
					<li id="ca-viewsource" class="selected"><span><a href="http://wiki.qt.io/index.php?title=Import-Export-resources-for-setup-creation&amp;action=edit"  title="This page is protected.&#10;You can view its source [e]" accesskey="e">View source</a></span></li>
					<li id="ca-history" class="collapsible"><span><a href="http://wiki.qt.io/index.php?title=Import-Export-resources-for-setup-creation&amp;action=history"  title="Past revisions of this page [h]" accesskey="h">View history</a></span></li>
			</ul>
</div>
<div id="p-cactions" role="navigation" class="vectorMenu emptyPortlet" aria-labelledby="p-cactions-label">
	<h3 id="p-cactions-label"><span>Actions</span><a href="#"></a></h3>
	<div class="menu">
		<ul>
					</ul>
	</div>
</div>
<div id="p-search" role="search">
	<h3><label for="searchInput">Search</label></h3>
	<form action="http://wiki.qt.io/index.php" id="searchform">
					<div id="simpleSearch">
					<input type="search" name="search" placeholder="Search" title="Search Qt Wiki [f]" accesskey="f" id="searchInput" /><input type="hidden" value="Special:Search" name="title" /><input type="submit" name="fulltext" value="Search" title="Search the pages for this text" id="mw-searchButton" class="searchButton mw-fallbackSearchButton" /><input type="submit" name="go" value="Go" title="Go to a page with this exact name if exists" id="searchButton" class="searchButton" />		</div>
	</form>
</div>
				</div>
			</div>
			<div id="mw-panel">
					<div id="p-logo" role="banner"><a style="background-image: url(http://wiki.qt.io/skins/common/images/wiki.png);" href="http://wiki.qt.io/Main_Page"  title="Visit the main page"></a></div>
				<div class="portal" role="navigation" id='p-navigation' aria-labelledby='p-navigation-label'>
	<h3 id='p-navigation-label'>Navigation</h3>
	<div class="body">
		<ul>
			<li id="n-mainpage-description"><a href="http://wiki.qt.io/Main_Page" title="Visit the main page [z]" accesskey="z">Main page</a></li>
			<li id="n-recentchanges"><a href="http://wiki.qt.io/Special:RecentChanges" title="A list of recent changes in the wiki [r]" accesskey="r">Recent changes</a></li>
			<li id="n-randompage"><a href="http://wiki.qt.io/Special:Random" title="Load a random page [x]" accesskey="x">Random page</a></li>
			<li id="n-help"><a href="https://www.mediawiki.org/wiki/Special:MyLanguage/Help:Contents" title="The place to find out">Help</a></li>
		</ul>
	</div>
</div>
<div class="portal" role="navigation" id='p-tb' aria-labelledby='p-tb-label'>
	<h3 id='p-tb-label'>Tools</h3>
	<div class="body">
		<ul>
			<li id="t-whatlinkshere"><a href="http://wiki.qt.io/Special:WhatLinksHere/Import-Export-resources-for-setup-creation" title="A list of all wiki pages that link here [j]" accesskey="j">What links here</a></li>
			<li id="t-recentchangeslinked"><a href="http://wiki.qt.io/Special:RecentChangesLinked/Import-Export-resources-for-setup-creation" title="Recent changes in pages linked from this page [k]" accesskey="k">Related changes</a></li>
			<li id="t-specialpages"><a href="http://wiki.qt.io/Special:SpecialPages" title="A list of all special pages [q]" accesskey="q">Special pages</a></li>
			<li id="t-info"><a href="http://wiki.qt.io/index.php?title=Import-Export-resources-for-setup-creation&amp;action=info">Page information</a></li>
		</ul>
	</div>
</div>
			</div>
		</div>
		<div id="footer" role="contentinfo">
							<ul id="footer-places">
											<li id="footer-places-terms"><a href='https://developer.qtcloudservices.com/legal/terms'>K√§ytt√∂ehdot</a></li>
									</ul>
										<ul id="footer-icons" class="noprint">
					<li id="footer-poweredbyico">
						<a href="http://www.mediawiki.org/"><img src="http://wiki.qt.io/skins/common/images/poweredby_mediawiki_88x31.png" alt="Powered by MediaWiki" width="88" height="31" /></a>
					</li>
				</ul>
						<div style="clear:both"></div>
		</div>
		<script>/*<![CDATA[*/window.jQuery && jQuery.ready();/*]]>*/</script><script>if(window.mw){
mw.loader.state({"site":"loading","user":"ready","user.groups":"ready"});
}</script>
<script>if(window.mw){
mw.loader.load(["mediawiki.action.edit.collapsibleFooter","mediawiki.user","mediawiki.hidpi","mediawiki.page.ready","mediawiki.searchSuggest","skins.vector.collapsibleNav"],null,true);
}</script>
<script src="http://wiki.qt.io/load.php?debug=false&amp;lang=en&amp;modules=site&amp;only=scripts&amp;skin=vector&amp;*"></script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','http://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-54043535-2', 'auto');
  ga('send', 'pageview');

</script>
<script>if(window.mw){
mw.config.set({"wgBackendResponseTime":272});
}</script>
	</body>

<!-- Mirrored from wiki.qt.io/index.php?title=Import-Export-resources-for-setup-creation&action=edit by HTTrack Website Copier/3.x [XR&CO'2013], Thu, 05 Nov 2015 12:36:46 GMT -->
</html>
