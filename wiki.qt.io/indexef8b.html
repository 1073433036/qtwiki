<!DOCTYPE html>
<html lang="en" dir="ltr" class="client-nojs">

<!-- Mirrored from wiki.qt.io/index.php?title=Updating-QML-content-from-Python-threads&oldid=15002 by HTTrack Website Copier/3.x [XR&CO'2013], Thu, 05 Nov 2015 13:15:52 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<meta charset="UTF-8" />
<title>Updating-QML-content-from-Python-threads - Qt Wiki</title>
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />
<meta name="generator" content="MediaWiki 1.23.3" />
<meta name="robots" content="noindex,nofollow" />
<link rel="shortcut icon" href="http://wiki.qt.io/favicon.ico" />
<link rel="search" type="application/opensearchdescription+xml" href="http://wiki.qt.io/opensearch_desc.php" title="Qt Wiki (en)" />
<link rel="EditURI" type="application/rsd+xml" href="http://wiki.qt.io/api.php?action=rsd" />
<link rel="alternate" type="application/atom+xml" title="Qt Wiki Atom feed" href="http://wiki.qt.io/index.php?title=Special:RecentChanges&amp;feed=atom" />
<link rel="stylesheet" href="http://wiki.qt.io/load.php?debug=false&amp;lang=en&amp;modules=mediawiki.legacy.commonPrint%2Cshared%7Cmediawiki.skinning.interface%7Cmediawiki.ui.button%7Cskins.vector.styles&amp;only=styles&amp;skin=vector&amp;*" />
<meta name="ResourceLoaderDynamicStyles" content="" />
<link rel="stylesheet" href="http://wiki.qt.io/load.php?debug=false&amp;lang=en&amp;modules=site&amp;only=styles&amp;skin=vector&amp;*" />
<style>a:lang(ar),a:lang(kk-arab),a:lang(mzn),a:lang(ps),a:lang(ur){text-decoration:none}
/* cache key: qtio_wiki:resourceloader:filter:minify-css:7:e91d7bc946738c8892a88ad5616a59ba */</style>
<script src="http://wiki.qt.io/load.php?debug=false&amp;lang=en&amp;modules=startup&amp;only=scripts&amp;skin=vector&amp;*"></script>
<script>if(window.mw){
mw.config.set({"wgCanonicalNamespace":"","wgCanonicalSpecialPageName":false,"wgNamespaceNumber":0,"wgPageName":"Updating-QML-content-from-Python-threads","wgTitle":"Updating-QML-content-from-Python-threads","wgCurRevisionId":15002,"wgRevisionId":15002,"wgArticleId":2087,"wgIsArticle":true,"wgIsRedirect":false,"wgAction":"view","wgUserName":null,"wgUserGroups":["*"],"wgCategories":["LanguageBindings::PySide","Snippets","Developing with Qt::Qt Quick","Developing with Qt::Qt Quick::QML","Developing with Qt::Qt Quick::Tutorial"],"wgBreakFrames":false,"wgPageContentLanguage":"en","wgPageContentModel":"wikitext","wgSeparatorTransformTable":["",""],"wgDigitTransformTable":["",""],"wgDefaultDateFormat":"dmy","wgMonthNames":["","January","February","March","April","May","June","July","August","September","October","November","December"],"wgMonthNamesShort":["","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"wgRelevantPageName":"Updating-QML-content-from-Python-threads","wgIsProbablyEditable":false,"wgRestrictionEdit":[],"wgRestrictionMove":[],"wgWikiEditorEnabledModules":{"toolbar":true,"dialogs":true,"hidesig":true,"preview":true,"previewDialog":false,"publish":true}});
}</script><script>if(window.mw){
mw.loader.implement("user.options",function($,jQuery){mw.user.options.set({"ccmeonemails":0,"cols":80,"date":"default","diffonly":0,"disablemail":0,"editfont":"default","editondblclick":0,"editsectiononrightclick":0,"enotifminoredits":0,"enotifrevealaddr":0,"enotifusertalkpages":1,"enotifwatchlistpages":1,"extendwatchlist":0,"fancysig":0,"forceeditsummary":0,"gender":"unknown","hideminor":0,"hidepatrolled":0,"imagesize":2,"math":1,"minordefault":0,"newpageshidepatrolled":0,"nickname":"","norollbackdiff":0,"numberheadings":0,"previewonfirst":0,"previewontop":1,"rcdays":7,"rclimit":50,"rows":25,"showhiddencats":0,"shownumberswatching":1,"showtoolbar":1,"skin":"vector","stubthreshold":0,"thumbsize":2,"underline":2,"uselivepreview":0,"usenewrc":0,"watchcreations":1,"watchdefault":1,"watchdeletion":0,"watchlistdays":3,"watchlisthideanons":0,"watchlisthidebots":0,"watchlisthideliu":0,"watchlisthideminor":0,"watchlisthideown":0,"watchlisthidepatrolled":0,"watchmoves":0,"wllimit":250,
"useeditwarning":1,"prefershttps":1,"usebetatoolbar":1,"usebetatoolbar-cgd":1,"wikieditor-preview":1,"wikieditor-publish":1,"language":"en","variant-gan":"gan","variant-iu":"iu","variant-kk":"kk","variant-ku":"ku","variant-shi":"shi","variant-sr":"sr","variant-tg":"tg","variant-uz":"uz","variant-zh":"zh","searchNs0":true,"searchNs1":false,"searchNs2":false,"searchNs3":false,"searchNs4":false,"searchNs5":false,"searchNs6":false,"searchNs7":false,"searchNs8":false,"searchNs9":false,"searchNs10":false,"searchNs11":false,"searchNs12":false,"searchNs13":false,"searchNs14":false,"searchNs15":false,"searchNs500":false,"searchNs501":false,"searchNs700":false,"searchNs701":false,"variant":"en"});},{},{});mw.loader.implement("user.tokens",function($,jQuery){mw.user.tokens.set({"editToken":"+\\","patrolToken":false,"watchToken":false});},{},{});
/* cache key: qtio_wiki:resourceloader:filter:minify-js:7:9743cb8b8019d46de5946bfe6dfa04d7 */
}</script>
<script>if(window.mw){
mw.loader.load(["mediawiki.page.startup","mediawiki.legacy.wikibits","mediawiki.legacy.ajax","skins.vector.js"]);
}</script>
<style type="text/css">/*<![CDATA[*/
.source-cpp-qt {line-height: normal;}
.source-cpp-qt li, .source-cpp-qt pre {
	line-height: normal; border: 0px none white;
}
/**
 * GeSHi Dynamically Generated Stylesheet
 * --------------------------------------
 * Dynamically generated stylesheet for cpp-qt
 * CSS class: source-cpp-qt, CSS id: 
 * GeSHi (C) 2004 - 2007 Nigel McNie, 2007 - 2008 Benny Baumann
 * (http://qbnz.com/highlighter/ and http://geshi.org/)
 * --------------------------------------
 */
.cpp-qt.source-cpp-qt .de1, .cpp-qt.source-cpp-qt .de2 {font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;font-family: monospace, monospace;}
.cpp-qt.source-cpp-qt  {font-family:monospace;}
.cpp-qt.source-cpp-qt .imp {font-weight: bold; color: red;}
.cpp-qt.source-cpp-qt li, .cpp-qt.source-cpp-qt .li1 {font-weight: normal; vertical-align:top;}
.cpp-qt.source-cpp-qt .ln {width:1px;text-align:right;margin:0;padding:0 2px;vertical-align:top;}
.cpp-qt.source-cpp-qt .li2 {font-weight: bold; vertical-align:top;}
.cpp-qt.source-cpp-qt .kw1 {color: #000000; font-weight:bold;}
.cpp-qt.source-cpp-qt .kw2 {color: #0057AE;}
.cpp-qt.source-cpp-qt .kw3 {color: #2B74C7;}
.cpp-qt.source-cpp-qt .kw4 {color: #0057AE;}
.cpp-qt.source-cpp-qt .kw5 {color: #22aadd;}
.cpp-qt.source-cpp-qt .co1 {color: #888888;}
.cpp-qt.source-cpp-qt .co2 {color: #006E28;}
.cpp-qt.source-cpp-qt .coMULTI {color: #888888; font-style: italic;}
.cpp-qt.source-cpp-qt .es0 {color: #000099; font-weight: bold;}
.cpp-qt.source-cpp-qt .es1 {color: #000099; font-weight: bold;}
.cpp-qt.source-cpp-qt .es2 {color: #660099; font-weight: bold;}
.cpp-qt.source-cpp-qt .es3 {color: #660099; font-weight: bold;}
.cpp-qt.source-cpp-qt .es4 {color: #660099; font-weight: bold;}
.cpp-qt.source-cpp-qt .es5 {color: #006699; font-weight: bold;}
.cpp-qt.source-cpp-qt .br0 {color: #006E28;}
.cpp-qt.source-cpp-qt .sy0 {color: #006E28;}
.cpp-qt.source-cpp-qt .st0 {color: #BF0303;}
.cpp-qt.source-cpp-qt .nu0 {color: #B08000;}
.cpp-qt.source-cpp-qt .nu6 {color: #208080;}
.cpp-qt.source-cpp-qt .nu8 {color: #208080;}
.cpp-qt.source-cpp-qt .nu12 {color: #208080;}
.cpp-qt.source-cpp-qt .nu16 {color:#800080;}
.cpp-qt.source-cpp-qt .nu17 {color:#800080;}
.cpp-qt.source-cpp-qt .nu18 {color:#800080;}
.cpp-qt.source-cpp-qt .nu19 {color:#800080;}
.cpp-qt.source-cpp-qt .me1 {color: #2B74C7;}
.cpp-qt.source-cpp-qt .me2 {color: #2B74C7;}
.cpp-qt.source-cpp-qt .me3 {color: #2B74C7;}
.cpp-qt.source-cpp-qt .ln-xtra, .cpp-qt.source-cpp-qt li.ln-xtra, .cpp-qt.source-cpp-qt div.ln-xtra {background-color: #ffc;}
.cpp-qt.source-cpp-qt span.xtra { display:block; }

/*]]>*/
</style><!--[if lt IE 7]><style type="text/css">body{behavior:url("/skins/vector/csshover.min.htc")}</style><![endif]--></head>
<body class="mediawiki ltr sitedir-ltr ns-0 ns-subject page-Updating-QML-content-from-Python-threads skin-vector action-view vector-animateLayout">
		<div id="mw-page-base" class="noprint"></div>
		<div id="mw-head-base" class="noprint"></div>
		<div id="content" class="mw-body" role="main">
			<a id="top"></a>
			<div id="mw-js-message" style="display:none;"></div>
						<h1 id="firstHeading" class="firstHeading" lang="en"><span dir="auto">Updating-QML-content-from-Python-threads</span></h1>
						<div id="bodyContent">
								<div id="siteSub">From Qt Wiki</div>
								<div id="contentSub"><div id="mw-revision-info">Revision as of 08:33, 26 March 2015 by <a href="http://wiki.qt.io/index.php?title=User:Henri_Vikki&amp;action=edit&amp;redlink=1" class="new mw-userlink" title="User:Henri Vikki (page does not exist)">Henri Vikki</a>  <span class="mw-usertoollinks">(<a href="http://wiki.qt.io/index.php?title=User_talk:Henri_Vikki&amp;action=edit&amp;redlink=1" class="new" title="User talk:Henri Vikki (page does not exist)">Talk</a> | <a href="http://wiki.qt.io/Special:Contributions/Henri_Vikki" title="Special:Contributions/Henri Vikki">contribs</a>)</span></div><br />
				<div id="mw-revision-nav">(<a href="http://wiki.qt.io/index.php?title=Updating-QML-content-from-Python-threads&amp;diff=prev&amp;oldid=15002" title="Updating-QML-content-from-Python-threads">diff</a>) <a href="http://wiki.qt.io/index.php?title=Updating-QML-content-from-Python-threads&amp;direction=prev&amp;oldid=15002" title="Updating-QML-content-from-Python-threads">← Older revision</a> | Latest revision (diff) | Newer revision → (diff)</div></div>
												<div id="jump-to-nav" class="mw-jump">
					Jump to:					<a href="#mw-navigation">navigation</a>, 					<a href="#p-search">search</a>
				</div>
				<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr"><p><br />
</p><p>This <a href="http://wiki.qt.io/PySide" title="PySide" class="mw-redirect">PySide</a> tutorial shows you how to use native Python threads (non-QThread, i.e. <b>threading.Thread</b>) to carry out work in the background (e.g. downloading files). In the special case of downloading, you might want to use <b>QNetworkAccessManager</b> and friends, but in this case, we assume that you can't use it for whatever reason (e.g. because you want to use Twisted or because you already have your special download code that you want to reuse).
</p>
<div id="toc" class="toc"><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#WorkingOnIt.py"><span class="tocnumber">1</span> <span class="toctext">WorkingOnIt.py</span></a>
<ul>
<li class="toclevel-2 tocsection-2"><a href="#Importing_required_modules"><span class="tocnumber">1.1</span> <span class="toctext">Importing required modules</span></a></li>
<li class="toclevel-2 tocsection-3"><a href="#The_Downloader_object"><span class="tocnumber">1.2</span> <span class="toctext">The Downloader object</span></a></li>
<li class="toclevel-2 tocsection-4"><a href="#Creating_a_new_Downloader_instance"><span class="tocnumber">1.3</span> <span class="toctext">Creating a new Downloader instance</span></a></li>
<li class="toclevel-2 tocsection-5"><a href="#QApplication.2C_QDeclarativeView_and_context_properties"><span class="tocnumber">1.4</span> <span class="toctext">QApplication, QDeclarativeView and context properties</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-6"><a href="#WorkingOnIt.qml"><span class="tocnumber">2</span> <span class="toctext">WorkingOnIt.qml</span></a></li>
<li class="toclevel-1 tocsection-7"><a href="#How_the_example_app_looks"><span class="tocnumber">3</span> <span class="toctext">How the example app looks</span></a></li>
</ul>
</div>

<h2><span class="mw-headline" id="WorkingOnIt.py">WorkingOnIt.py</span></h2>
<h3><span class="mw-headline" id="Importing_required_modules">Importing required modules</span></h3>
<p>We will be using standard Python modules for threading (<b>threading</b>) and for downloading (<b>urllib</b>). From PySide, we need the standard module <b>QtCore</b>, <b>QtGui</b> and <b>QtDeclarative</b>:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="cpp-qt source-cpp-qt"><pre class="de1">import os
import sys
import threading
import urllib
&#160;
from PySide import <span class="kw5">QtCore</span><span class="sy0">,</span> <span class="kw5">QtGui</span><span class="sy0">,</span> QtDeclarative</pre></div></div>
<h3><span class="mw-headline" id="The_Downloader_object">The Downloader object</span></h3>
<p>We now subclass <b>QObject</b> (so we can have Signals, Slots and Properties in our downloader) and implement all the properties that we need for downloading the file and also for displaying the current status in the UI:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="cpp-qt source-cpp-qt"><pre class="de1"><span class="kw2">class</span> Downloader<span class="br0">&#40;</span><span class="kw5">QtCore</span>.<span class="kw5">QObject</span><span class="br0">&#41;</span><span class="sy0">:</span>
 def <span class="st0">''</span>init<span class="st0">''</span><span class="br0">&#40;</span>self<span class="sy0">,</span> url<span class="sy0">,</span> filename<span class="sy0">=</span>None<span class="br0">&#41;</span><span class="sy0">:</span>
 <span class="kw5">QtCore</span>.<span class="kw5">QObject</span>.<span class="st0">''</span>init<span class="st0">''</span><span class="br0">&#40;</span>self<span class="br0">&#41;</span>
 self._url <span class="sy0">=</span> url
 <span class="kw1">if</span> filename is None<span class="sy0">:</span>
 filename <span class="sy0">=</span> os.<span class="me1">path</span>.<span class="me1">basename</span><span class="br0">&#40;</span>self._url<span class="br0">&#41;</span>
 self._filename <span class="sy0">=</span> filename
 self._progress <span class="sy0">=</span> <span class="nu0">0</span>.
 <span class="me1">self</span>._running <span class="sy0">=</span> False
 self._size <span class="sy0">=</span> <span class="sy0">-</span><span class="nu0">1</span>
&#160;
 def _download<span class="br0">&#40;</span>self<span class="br0">&#41;</span><span class="sy0">:</span>
 def reporthook<span class="br0">&#40;</span>pos<span class="sy0">,</span> block<span class="sy0">,</span> total<span class="br0">&#41;</span><span class="sy0">:</span>
 <span class="kw1">if</span> self.<span class="me1">size</span> <span class="sy0">!=</span> total<span class="sy0">:</span>
 self._size <span class="sy0">=</span> total
 self.<span class="me1">on_size</span>.<span class="me1">emit</span><span class="br0">&#40;</span><span class="br0">&#41;</span>
 self.<span class="me1">progress</span> <span class="sy0">=</span> <span class="kw4">float</span><span class="br0">&#40;</span>pos<span class="sy0">*</span>block<span class="br0">&#41;</span><span class="sy0">/</span><span class="kw4">float</span><span class="br0">&#40;</span>total<span class="br0">&#41;</span>
 urllib.<span class="me1">urlretrieve</span><span class="br0">&#40;</span>self._url<span class="sy0">,</span> self._filename<span class="sy0">,</span> reporthook<span class="br0">&#41;</span>
 self.<span class="me1">running</span> <span class="sy0">=</span> False
&#160;
 @<span class="kw5">QtCore</span>.<span class="me1">Slot</span><span class="br0">&#40;</span><span class="br0">&#41;</span>
 def start_download<span class="br0">&#40;</span>self<span class="br0">&#41;</span><span class="sy0">:</span>
 <span class="kw1">if</span> not self.<span class="me1">running</span><span class="sy0">:</span>
 self.<span class="me1">running</span> <span class="sy0">=</span> True
 thread <span class="sy0">=</span> threading.<span class="me1">Thread</span><span class="br0">&#40;</span>target<span class="sy0">=</span>self._download<span class="br0">&#41;</span>
 thread.<span class="me1">start</span><span class="br0">&#40;</span><span class="br0">&#41;</span>
&#160;
 def _get_progress<span class="br0">&#40;</span>self<span class="br0">&#41;</span><span class="sy0">:</span>
 <span class="kw1">return</span> self._progress
&#160;
 def _set_progress<span class="br0">&#40;</span>self<span class="sy0">,</span> progress<span class="br0">&#41;</span><span class="sy0">:</span>
 self._progress <span class="sy0">=</span> progress
 self.<span class="me1">on_progress</span>.<span class="me1">emit</span><span class="br0">&#40;</span><span class="br0">&#41;</span>
&#160;
 def _get_running<span class="br0">&#40;</span>self<span class="br0">&#41;</span><span class="sy0">:</span>
 <span class="kw1">return</span> self._running
&#160;
 def _set_running<span class="br0">&#40;</span>self<span class="sy0">,</span> running<span class="br0">&#41;</span><span class="sy0">:</span>
 self._running <span class="sy0">=</span> running
 self.<span class="me1">on_running</span>.<span class="me1">emit</span><span class="br0">&#40;</span><span class="br0">&#41;</span>
&#160;
 def _get_filename<span class="br0">&#40;</span>self<span class="br0">&#41;</span><span class="sy0">:</span>
 <span class="kw1">return</span> self._filename
&#160;
 def _get_size<span class="br0">&#40;</span>self<span class="br0">&#41;</span><span class="sy0">:</span>
 <span class="kw1">return</span> self._size
&#160;
 on_progress <span class="sy0">=</span> <span class="kw5">QtCore</span>.<span class="me1">Signal</span><span class="br0">&#40;</span><span class="br0">&#41;</span>
 on_running <span class="sy0">=</span> <span class="kw5">QtCore</span>.<span class="me1">Signal</span><span class="br0">&#40;</span><span class="br0">&#41;</span>
 on_filename <span class="sy0">=</span> <span class="kw5">QtCore</span>.<span class="me1">Signal</span><span class="br0">&#40;</span><span class="br0">&#41;</span>
 on_size <span class="sy0">=</span> <span class="kw5">QtCore</span>.<span class="me1">Signal</span><span class="br0">&#40;</span><span class="br0">&#41;</span>
&#160;
 progress <span class="sy0">=</span> <span class="kw5">QtCore</span>.<span class="me1">Property</span><span class="br0">&#40;</span><span class="kw4">float</span><span class="sy0">,</span> _get_progress<span class="sy0">,</span> _set_progress<span class="sy0">,</span>
 notify<span class="sy0">=</span>on_progress<span class="br0">&#41;</span>
 running <span class="sy0">=</span> <span class="kw5">QtCore</span>.<span class="me1">Property</span><span class="br0">&#40;</span><span class="kw4">bool</span><span class="sy0">,</span> _get_running<span class="sy0">,</span> _set_running<span class="sy0">,</span>
 notify<span class="sy0">=</span>on_running<span class="br0">&#41;</span>
 filename <span class="sy0">=</span> <span class="kw5">QtCore</span>.<span class="me1">Property</span><span class="br0">&#40;</span>str<span class="sy0">,</span> _get_filename<span class="sy0">,</span> notify<span class="sy0">=</span>on_filename<span class="br0">&#41;</span>
 size <span class="sy0">=</span> <span class="kw5">QtCore</span>.<span class="me1">Property</span><span class="br0">&#40;</span><span class="kw4">int</span><span class="sy0">,</span> <span class="st0">''</span>get_size<span class="sy0">,</span> notify<span class="sy0">=</span>on_size<span class="br0">&#41;</span></pre></div></div>
<h3><span class="mw-headline" id="Creating_a_new_Downloader_instance">Creating a new Downloader instance</span></h3>
<p>As an example, we create a new Downloader here that downloads a kernel image for the N900 from the MeeGo repository:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="cpp-qt source-cpp-qt"><pre class="de1">downloader <span class="sy0">=</span> Downloader
<span class="br0">&#40;</span><span class="st0">'http://repo.meego.com/MeeGo/builds/trunk/1.1.80.8.20101130.1/handset/images/meego-handset-armv7l-n900/meego-handset-armv7l-
n900-1.1.80.8.20101130.1-vmlinuz-2.6.35.3-13.6-n900'</span><span class="br0">&#41;</span></pre></div></div>
<h3><span class="mw-headline" id="QApplication.2C_QDeclarativeView_and_context_properties">QApplication, QDeclarativeView and context properties</span></h3>
<p>As usual, we simply instantiate a new <b>QApplication</b> and a <b>QDeclarativeView</b>. Our Downloader is exposed to the QML context by setting it as context property <b>downloader</b> on the rootContext of our view. We then simply load the QML file via <b>setSource</b>, <b>show</b> the view and execute the application:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="cpp-qt source-cpp-qt"><pre class="de1">app <span class="sy0">=</span> <span class="kw5">QtGui</span>.<span class="kw5">QApplication</span><span class="br0">&#40;</span>sys.<span class="me1">argv</span><span class="br0">&#41;</span>
view <span class="sy0">=</span> QtDeclarative.<span class="me1">QDeclarativeView</span><span class="br0">&#40;</span><span class="br0">&#41;</span>
view.<span class="me1">rootContext</span><span class="br0">&#40;</span><span class="br0">&#41;</span>.<span class="me1">setContextProperty</span><span class="br0">&#40;</span><span class="st0">'downloader'</span><span class="sy0">,</span> downloader<span class="br0">&#41;</span>
view.<span class="me1">setSource</span><span class="br0">&#40;</span>file.<span class="me1">replace</span><span class="br0">&#40;</span><span class="st0">'.py'</span><span class="sy0">,</span> <span class="st0">'.qml'</span><span class="br0">&#41;</span><span class="br0">&#41;</span>
view.<span class="me1">show</span><span class="br0">&#40;</span><span class="br0">&#41;</span>
app.<span class="me1">exec</span><span class="st0">''</span><span class="br0">&#40;</span><span class="br0">&#41;</span></pre></div></div>
<h2><span class="mw-headline" id="WorkingOnIt.qml">WorkingOnIt.qml</span></h2>
<p>This is the QML UI for our downloader example. The interesting parts here are:
</p>
<ul>
<li> When the button is clicked, <b>downloader.start_download()</b> (a PySide Slot) is called, which starts the thread
</li>
<li> The UI elements use properties of the downloader to determine visiblity and content- they are automatically updated when the properties are notified to be updated
</li>
</ul>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="cpp-qt source-cpp-qt"><pre class="de1">import <span class="kw5">Qt</span> <span class="nu16">4.7</span>
&#160;
Rectangle <span class="br0">&#123;</span>
 width<span class="sy0">:</span> <span class="nu0">200</span><span class="sy0">;</span> height<span class="sy0">:</span> <span class="nu0">160</span>
&#160;
function formatProgress<span class="br0">&#40;</span>size<span class="sy0">,</span> progress<span class="br0">&#41;</span> <span class="br0">&#123;</span>
 <span class="kw1">return</span> <span class="st0">&quot;&quot;</span> <span class="sy0">+</span> parseInt<span class="br0">&#40;</span>progress<span class="sy0">*</span>size<span class="sy0">/</span><span class="nu0">1024</span><span class="br0">&#41;</span> <span class="sy0">+</span>
 <span class="st0">&quot; KiB (&quot;</span><span class="st0">''</span>parseInt<span class="br0">&#40;</span>progress<span class="sy0">*</span><span class="nu0">100</span>.<span class="br0">&#41;</span><span class="st0">''</span> <span class="st0">&quot;%)&quot;</span><span class="sy0">;</span>
 <span class="br0">&#125;</span>
&#160;
Text <span class="br0">&#123;</span>
 x<span class="sy0">:</span> progressBar.<span class="me1">x</span><span class="sy0">;</span> y<span class="sy0">:</span> <span class="nu0">20</span>
 width<span class="sy0">:</span> progressBar.<span class="me1">width</span>
 font.<span class="me1">pixelSize</span><span class="sy0">:</span> <span class="nu0">8</span>
 text<span class="sy0">:</span> downloader.<span class="me1">filename</span>
 elide<span class="sy0">:</span> Text.<span class="me1">ElideRight</span>
 <span class="br0">&#125;</span>
&#160;
Rectangle <span class="br0">&#123;</span>
 id<span class="sy0">:</span> progressBar
 color<span class="sy0">:</span> <span class="st0">&quot;#aaa&quot;</span>
&#160;
x<span class="sy0">:</span> <span class="nu0">20</span><span class="sy0">;</span> y<span class="sy0">:</span> <span class="nu0">60</span>
 width<span class="sy0">:</span> parent.<span class="me1">width</span><span class="sy0">-</span><span class="nu0">40</span>
 height<span class="sy0">:</span> <span class="nu0">20</span>
&#160;
Rectangle <span class="br0">&#123;</span>
 color<span class="sy0">:</span> downloader.<span class="me1">progress</span><span class="sy0">&lt;</span><span class="nu0">1</span>?<span class="st0">&quot;#ee8&quot;</span><span class="sy0">:</span><span class="st0">&quot;#8e8&quot;</span>
 clip<span class="sy0">:</span> <span class="kw2">true</span>
&#160;
anchors <span class="br0">&#123;</span>
 top<span class="sy0">:</span> parent.<span class="me1">top</span>
 bottom<span class="sy0">:</span> parent.<span class="me1">bottom</span>
 left<span class="sy0">:</span> parent.<span class="me1">left</span>
 <span class="br0">&#125;</span>
&#160;
width<span class="sy0">:</span> parent.<span class="me1">width</span><span class="sy0">*</span>downloader.<span class="me1">progress</span>
&#160;
Text <span class="br0">&#123;</span>
 anchors <span class="br0">&#123;</span>
 fill<span class="sy0">:</span> parent
 rightMargin<span class="sy0">:</span> <span class="nu0">5</span>
 <span class="br0">&#125;</span>
 color<span class="sy0">:</span> <span class="st0">&quot;black&quot;</span>
 text<span class="sy0">:</span> formatProgress<span class="br0">&#40;</span>downloader.<span class="me1">size</span><span class="sy0">,</span> downloader.<span class="me1">progress</span><span class="br0">&#41;</span>
 verticalAlignment<span class="sy0">:</span> Text.<span class="me1">AlignVCenter</span>
 horizontalAlignment<span class="sy0">:</span> Text.<span class="me1">AlignRight</span>
 <span class="br0">&#125;</span>
 <span class="br0">&#125;</span>
 <span class="br0">&#125;</span>
&#160;
Rectangle <span class="br0">&#123;</span>
 anchors.<span class="me1">left</span><span class="sy0">:</span> progressBar.<span class="me1">left</span>
 anchors.<span class="me1">right</span><span class="sy0">:</span> progressBar.<span class="me1">right</span>
&#160;
color<span class="sy0">:</span> <span class="st0">&quot;#aad&quot;</span>
 y<span class="sy0">:</span> progressBar.<span class="me1">y</span> <span class="sy0">+</span> progressBar.<span class="me1">height</span> <span class="sy0">+</span> <span class="nu0">20</span>
 height<span class="sy0">:</span> <span class="nu0">40</span>
&#160;
Text <span class="br0">&#123;</span>
 anchors.<span class="me1">fill</span><span class="sy0">:</span> parent
 color<span class="sy0">:</span> <span class="st0">&quot;#003&quot;</span>
 text<span class="sy0">:</span> downloader.<span class="me1">running</span>?<span class="st0">&quot;Please wait…&quot;</span><span class="sy0">:</span><span class="st0">&quot;Start download&quot;</span>
&#160;
verticalAlignment<span class="sy0">:</span> Text.<span class="me1">AlignVCenter</span>
 horizontalAlignment<span class="sy0">:</span> Text.<span class="me1">AlignHCenter</span>
 <span class="br0">&#125;</span>
&#160;
MouseArea <span class="br0">&#123;</span>
 anchors.<span class="me1">fill</span><span class="sy0">:</span> parent
 onClicked<span class="sy0">:</span> <span class="br0">&#123;</span> downloader.<span class="me1">start_download</span><span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#125;</span>
 <span class="br0">&#125;</span>
 <span class="br0">&#125;</span>
<span class="br0">&#125;</span></pre></div></div>
<h2><span class="mw-headline" id="How_the_example_app_looks">How the example app looks</span></h2>
<p>Save the files <b>WorkingOnIt.py</b> and <b>WorkingOnIt.qml</b> in the same folder and start the app using <b>python WorkingOnIt.py</b>:
<a href="http://wiki.qt.io/File:Screenshotupdate.jpg" class="image"><img alt="Screenshotupdate.jpg" src="http://wiki.qt.io/images/9/90/Screenshotupdate.jpg" width="500" height="341" /></a>
</p>
<!-- 
NewPP limit report
CPU time usage: 0.101 seconds
Real time usage: 0.420 seconds
Preprocessor visited node count: 72/1000000
Preprocessor generated node count: 132/1000000
Post‐expand include size: 0/2097152 bytes
Template argument size: 0/2097152 bytes
Highest expansion depth: 2/40
Expensive parser function count: 0/100
-->

<!-- Saved in parser cache with key qtio_wiki:pcache:idhash:2087-0!*!0!!en!2!* and timestamp 20151105120937 and revision id 15002
 -->
</div>								<div class="printfooter">
				Retrieved from "<a href="http://wiki.qt.io/index.php?title=Updating-QML-content-from-Python-threads&amp;oldid=15002">http://wiki.qt.io/index.php?title=Updating-QML-content-from-Python-threads&amp;oldid=15002</a>"				</div>
												<div id='catlinks' class='catlinks'><div id="mw-normal-catlinks" class="mw-normal-catlinks"><a href="http://wiki.qt.io/Special:Categories" title="Special:Categories">Categories</a>: <ul><li><a href="http://wiki.qt.io/Category:LanguageBindings::PySide" title="Category:LanguageBindings::PySide">LanguageBindings::PySide</a></li><li><a href="http://wiki.qt.io/Category:Snippets" title="Category:Snippets">Snippets</a></li><li><a href="http://wiki.qt.io/Category:Developing_with_Qt::Qt_Quick" title="Category:Developing with Qt::Qt Quick">Developing with Qt::Qt Quick</a></li><li><a href="http://wiki.qt.io/Category:Developing_with_Qt::Qt_Quick::QML" title="Category:Developing with Qt::Qt Quick::QML">Developing with Qt::Qt Quick::QML</a></li><li><a href="http://wiki.qt.io/Category:Developing_with_Qt::Qt_Quick::Tutorial" title="Category:Developing with Qt::Qt Quick::Tutorial">Developing with Qt::Qt Quick::Tutorial</a></li></ul></div></div>												<div class="visualClear"></div>
							</div>
		</div>
		<div id="mw-navigation">
			<h2>Navigation menu</h2>
			<div id="mw-head">
				<div id="p-personal" role="navigation" class="" aria-labelledby="p-personal-label">
	<h3 id="p-personal-label">Personal tools</h3>
	<ul>
<li id="pt-anonuserpage"><a href="http://wiki.qt.io/User:10.0.113.70" class="new" title="The user page for the IP address you are editing as [.]" accesskey=".">10.0.113.70</a></li><li id="pt-anontalk"><a href="http://wiki.qt.io/User_talk:10.0.113.70" class="new" title="Discussion about edits from this IP address [n]" accesskey="n">Talk for this IP address</a></li><li id="pt-login"><a href="http://wiki.qt.io/index.php?title=Special:QtLogin&amp;returnto=Updating-QML-content-from-Python-threads" title="You are encouraged to log in; however, it is not mandatory [o]" accesskey="o">Sign in</a></li>	</ul>
</div>
				<div id="left-navigation">
					<div id="p-namespaces" role="navigation" class="vectorTabs" aria-labelledby="p-namespaces-label">
	<h3 id="p-namespaces-label">Namespaces</h3>
	<ul>
					<li  id="ca-nstab-main" class="selected"><span><a href="http://wiki.qt.io/Updating-QML-content-from-Python-threads"  title="View the content page [c]" accesskey="c">Page</a></span></li>
					<li  id="ca-talk" class="new"><span><a href="http://wiki.qt.io/index.php?title=Talk:Updating-QML-content-from-Python-threads&amp;action=edit&amp;redlink=1"  title="Discussion about the content page [t]" accesskey="t">Discussion</a></span></li>
			</ul>
</div>
<div id="p-variants" role="navigation" class="vectorMenu emptyPortlet" aria-labelledby="p-variants-label">
	<h3 id="mw-vector-current-variant">
		</h3>
	<h3 id="p-variants-label"><span>Variants</span><a href="#"></a></h3>
	<div class="menu">
		<ul>
					</ul>
	</div>
</div>
				</div>
				<div id="right-navigation">
					<div id="p-views" role="navigation" class="vectorTabs" aria-labelledby="p-views-label">
	<h3 id="p-views-label">Views</h3>
	<ul>
					<li id="ca-view" class="selected"><span><a href="http://wiki.qt.io/Updating-QML-content-from-Python-threads" >Read</a></span></li>
					<li id="ca-viewsource"><span><a href="http://wiki.qt.io/index.php?title=Updating-QML-content-from-Python-threads&amp;action=edit"  title="This page is protected.&#10;You can view its source [e]" accesskey="e">View source</a></span></li>
					<li id="ca-history" class="collapsible"><span><a href="http://wiki.qt.io/index.php?title=Updating-QML-content-from-Python-threads&amp;action=history"  title="Past revisions of this page [h]" accesskey="h">View history</a></span></li>
			</ul>
</div>
<div id="p-cactions" role="navigation" class="vectorMenu emptyPortlet" aria-labelledby="p-cactions-label">
	<h3 id="p-cactions-label"><span>Actions</span><a href="#"></a></h3>
	<div class="menu">
		<ul>
					</ul>
	</div>
</div>
<div id="p-search" role="search">
	<h3><label for="searchInput">Search</label></h3>
	<form action="http://wiki.qt.io/index.php" id="searchform">
					<div id="simpleSearch">
					<input type="search" name="search" placeholder="Search" title="Search Qt Wiki [f]" accesskey="f" id="searchInput" /><input type="hidden" value="Special:Search" name="title" /><input type="submit" name="fulltext" value="Search" title="Search the pages for this text" id="mw-searchButton" class="searchButton mw-fallbackSearchButton" /><input type="submit" name="go" value="Go" title="Go to a page with this exact name if exists" id="searchButton" class="searchButton" />		</div>
	</form>
</div>
				</div>
			</div>
			<div id="mw-panel">
					<div id="p-logo" role="banner"><a style="background-image: url(http://wiki.qt.io/skins/common/images/wiki.png);" href="http://wiki.qt.io/Main_Page"  title="Visit the main page"></a></div>
				<div class="portal" role="navigation" id='p-navigation' aria-labelledby='p-navigation-label'>
	<h3 id='p-navigation-label'>Navigation</h3>
	<div class="body">
		<ul>
			<li id="n-mainpage-description"><a href="http://wiki.qt.io/Main_Page" title="Visit the main page [z]" accesskey="z">Main page</a></li>
			<li id="n-recentchanges"><a href="http://wiki.qt.io/Special:RecentChanges" title="A list of recent changes in the wiki [r]" accesskey="r">Recent changes</a></li>
			<li id="n-randompage"><a href="http://wiki.qt.io/Special:Random" title="Load a random page [x]" accesskey="x">Random page</a></li>
			<li id="n-help"><a href="https://www.mediawiki.org/wiki/Special:MyLanguage/Help:Contents" title="The place to find out">Help</a></li>
		</ul>
	</div>
</div>
<div class="portal" role="navigation" id='p-tb' aria-labelledby='p-tb-label'>
	<h3 id='p-tb-label'>Tools</h3>
	<div class="body">
		<ul>
			<li id="t-whatlinkshere"><a href="http://wiki.qt.io/Special:WhatLinksHere/Updating-QML-content-from-Python-threads" title="A list of all wiki pages that link here [j]" accesskey="j">What links here</a></li>
			<li id="t-recentchangeslinked"><a href="http://wiki.qt.io/Special:RecentChangesLinked/Updating-QML-content-from-Python-threads" title="Recent changes in pages linked from this page [k]" accesskey="k">Related changes</a></li>
			<li id="t-specialpages"><a href="http://wiki.qt.io/Special:SpecialPages" title="A list of all special pages [q]" accesskey="q">Special pages</a></li>
			<li id="t-print"><a href="http://wiki.qt.io/index.php?title=Updating-QML-content-from-Python-threads&amp;oldid=15002&amp;printable=yes" rel="alternate" title="Printable version of this page [p]" accesskey="p">Printable version</a></li>
			<li id="t-permalink"><a href="http://wiki.qt.io/index.php?title=Updating-QML-content-from-Python-threads&amp;oldid=15002" title="Permanent link to this revision of the page">Permanent link</a></li>
			<li id="t-info"><a href="http://wiki.qt.io/index.php?title=Updating-QML-content-from-Python-threads&amp;action=info">Page information</a></li>
		</ul>
	</div>
</div>
			</div>
		</div>
		<div id="footer" role="contentinfo">
							<ul id="footer-info">
											<li id="footer-info-lastmod"> This page was last modified on 26 March 2015, at 08:33.</li>
											<li id="footer-info-viewcount">This page has been accessed 983 times.</li>
									</ul>
							<ul id="footer-places">
											<li id="footer-places-terms"><a href='https://developer.qtcloudservices.com/legal/terms'>Käyttöehdot</a></li>
									</ul>
										<ul id="footer-icons" class="noprint">
					<li id="footer-poweredbyico">
						<a href="http://www.mediawiki.org/"><img src="http://wiki.qt.io/skins/common/images/poweredby_mediawiki_88x31.png" alt="Powered by MediaWiki" width="88" height="31" /></a>
					</li>
				</ul>
						<div style="clear:both"></div>
		</div>
		<script>/*<![CDATA[*/window.jQuery && jQuery.ready();/*]]>*/</script><script>if(window.mw){
mw.loader.state({"site":"loading","user":"ready","user.groups":"ready"});
}</script>
<script>if(window.mw){
mw.loader.load(["mediawiki.action.view.postEdit","mediawiki.user","mediawiki.hidpi","mediawiki.page.ready","mediawiki.searchSuggest","skins.vector.collapsibleNav"],null,true);
}</script>
<script src="http://wiki.qt.io/load.php?debug=false&amp;lang=en&amp;modules=site&amp;only=scripts&amp;skin=vector&amp;*"></script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','http://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-54043535-2', 'auto');
  ga('send', 'pageview');

</script>
<script>if(window.mw){
mw.config.set({"wgBackendResponseTime":499});
}</script>
	</body>

<!-- Mirrored from wiki.qt.io/index.php?title=Updating-QML-content-from-Python-threads&oldid=15002 by HTTrack Website Copier/3.x [XR&CO'2013], Thu, 05 Nov 2015 13:15:52 GMT -->
</html>
