<!DOCTYPE html>
<html lang="en" dir="ltr" class="client-nojs">

<!-- Mirrored from wiki.qt.io/index.php?title=Basic_Programming/cs&oldid=17516 by HTTrack Website Copier/3.x [XR&CO'2013], Thu, 05 Nov 2015 10:55:00 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<meta charset="UTF-8" />
<title>Basic Programming/cs - Qt Wiki</title>
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />
<meta name="generator" content="MediaWiki 1.23.3" />
<meta name="robots" content="noindex,nofollow" />
<link rel="shortcut icon" href="http://wiki.qt.io/favicon.ico" />
<link rel="search" type="application/opensearchdescription+xml" href="http://wiki.qt.io/opensearch_desc.php" title="Qt Wiki (en)" />
<link rel="EditURI" type="application/rsd+xml" href="http://wiki.qt.io/api.php?action=rsd" />
<link rel="alternate" type="application/atom+xml" title="Qt Wiki Atom feed" href="http://wiki.qt.io/index.php?title=Special:RecentChanges&amp;feed=atom" />
<link rel="stylesheet" href="http://wiki.qt.io/load.php?debug=false&amp;lang=en&amp;modules=mediawiki.legacy.commonPrint%2Cshared%7Cmediawiki.skinning.interface%7Cmediawiki.ui.button%7Cskins.vector.styles&amp;only=styles&amp;skin=vector&amp;*" />
<meta name="ResourceLoaderDynamicStyles" content="" />
<link rel="stylesheet" href="http://wiki.qt.io/load.php?debug=false&amp;lang=en&amp;modules=site&amp;only=styles&amp;skin=vector&amp;*" />
<style>a:lang(ar),a:lang(kk-arab),a:lang(mzn),a:lang(ps),a:lang(ur){text-decoration:none}
/* cache key: qtio_wiki:resourceloader:filter:minify-css:7:e91d7bc946738c8892a88ad5616a59ba */</style>
<script src="http://wiki.qt.io/load.php?debug=false&amp;lang=en&amp;modules=startup&amp;only=scripts&amp;skin=vector&amp;*"></script>
<script>if(window.mw){
mw.config.set({"wgCanonicalNamespace":"","wgCanonicalSpecialPageName":false,"wgNamespaceNumber":0,"wgPageName":"Basic_Programming/cs","wgTitle":"Basic Programming/cs","wgCurRevisionId":17516,"wgRevisionId":17516,"wgArticleId":2198,"wgIsArticle":true,"wgIsRedirect":false,"wgAction":"view","wgUserName":null,"wgUserGroups":["*"],"wgCategories":["Articles needing cleanup","Pages with broken file links"],"wgBreakFrames":false,"wgPageContentLanguage":"en","wgPageContentModel":"wikitext","wgSeparatorTransformTable":["",""],"wgDigitTransformTable":["",""],"wgDefaultDateFormat":"dmy","wgMonthNames":["","January","February","March","April","May","June","July","August","September","October","November","December"],"wgMonthNamesShort":["","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"wgRelevantPageName":"Basic_Programming/cs","wgIsProbablyEditable":false,"wgRestrictionEdit":[],"wgRestrictionMove":[],"wgWikiEditorEnabledModules":{"toolbar":true,"dialogs":true,"hidesig":true,"preview":true,"previewDialog":false,"publish":true}});
}</script><script>if(window.mw){
mw.loader.implement("user.options",function($,jQuery){mw.user.options.set({"ccmeonemails":0,"cols":80,"date":"default","diffonly":0,"disablemail":0,"editfont":"default","editondblclick":0,"editsectiononrightclick":0,"enotifminoredits":0,"enotifrevealaddr":0,"enotifusertalkpages":1,"enotifwatchlistpages":1,"extendwatchlist":0,"fancysig":0,"forceeditsummary":0,"gender":"unknown","hideminor":0,"hidepatrolled":0,"imagesize":2,"math":1,"minordefault":0,"newpageshidepatrolled":0,"nickname":"","norollbackdiff":0,"numberheadings":0,"previewonfirst":0,"previewontop":1,"rcdays":7,"rclimit":50,"rows":25,"showhiddencats":0,"shownumberswatching":1,"showtoolbar":1,"skin":"vector","stubthreshold":0,"thumbsize":2,"underline":2,"uselivepreview":0,"usenewrc":0,"watchcreations":1,"watchdefault":1,"watchdeletion":0,"watchlistdays":3,"watchlisthideanons":0,"watchlisthidebots":0,"watchlisthideliu":0,"watchlisthideminor":0,"watchlisthideown":0,"watchlisthidepatrolled":0,"watchmoves":0,"wllimit":250,
"useeditwarning":1,"prefershttps":1,"usebetatoolbar":1,"usebetatoolbar-cgd":1,"wikieditor-preview":1,"wikieditor-publish":1,"language":"en","variant-gan":"gan","variant-iu":"iu","variant-kk":"kk","variant-ku":"ku","variant-shi":"shi","variant-sr":"sr","variant-tg":"tg","variant-uz":"uz","variant-zh":"zh","searchNs0":true,"searchNs1":false,"searchNs2":false,"searchNs3":false,"searchNs4":false,"searchNs5":false,"searchNs6":false,"searchNs7":false,"searchNs8":false,"searchNs9":false,"searchNs10":false,"searchNs11":false,"searchNs12":false,"searchNs13":false,"searchNs14":false,"searchNs15":false,"searchNs500":false,"searchNs501":false,"searchNs700":false,"searchNs701":false,"variant":"en"});},{},{});mw.loader.implement("user.tokens",function($,jQuery){mw.user.tokens.set({"editToken":"+\\","patrolToken":false,"watchToken":false});},{},{});
/* cache key: qtio_wiki:resourceloader:filter:minify-js:7:9743cb8b8019d46de5946bfe6dfa04d7 */
}</script>
<script>if(window.mw){
mw.loader.load(["mediawiki.page.startup","mediawiki.legacy.wikibits","mediawiki.legacy.ajax","skins.vector.js"]);
}</script>
<style type="text/css">/*<![CDATA[*/
.source-cpp-qt {line-height: normal;}
.source-cpp-qt li, .source-cpp-qt pre {
	line-height: normal; border: 0px none white;
}
/**
 * GeSHi Dynamically Generated Stylesheet
 * --------------------------------------
 * Dynamically generated stylesheet for cpp-qt
 * CSS class: source-cpp-qt, CSS id: 
 * GeSHi (C) 2004 - 2007 Nigel McNie, 2007 - 2008 Benny Baumann
 * (http://qbnz.com/highlighter/ and http://geshi.org/)
 * --------------------------------------
 */
.cpp-qt.source-cpp-qt .de1, .cpp-qt.source-cpp-qt .de2 {font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;font-family: monospace, monospace;}
.cpp-qt.source-cpp-qt  {font-family:monospace;}
.cpp-qt.source-cpp-qt .imp {font-weight: bold; color: red;}
.cpp-qt.source-cpp-qt li, .cpp-qt.source-cpp-qt .li1 {font-weight: normal; vertical-align:top;}
.cpp-qt.source-cpp-qt .ln {width:1px;text-align:right;margin:0;padding:0 2px;vertical-align:top;}
.cpp-qt.source-cpp-qt .li2 {font-weight: bold; vertical-align:top;}
.cpp-qt.source-cpp-qt .kw1 {color: #000000; font-weight:bold;}
.cpp-qt.source-cpp-qt .kw2 {color: #0057AE;}
.cpp-qt.source-cpp-qt .kw3 {color: #2B74C7;}
.cpp-qt.source-cpp-qt .kw4 {color: #0057AE;}
.cpp-qt.source-cpp-qt .kw5 {color: #22aadd;}
.cpp-qt.source-cpp-qt .co1 {color: #888888;}
.cpp-qt.source-cpp-qt .co2 {color: #006E28;}
.cpp-qt.source-cpp-qt .coMULTI {color: #888888; font-style: italic;}
.cpp-qt.source-cpp-qt .es0 {color: #000099; font-weight: bold;}
.cpp-qt.source-cpp-qt .es1 {color: #000099; font-weight: bold;}
.cpp-qt.source-cpp-qt .es2 {color: #660099; font-weight: bold;}
.cpp-qt.source-cpp-qt .es3 {color: #660099; font-weight: bold;}
.cpp-qt.source-cpp-qt .es4 {color: #660099; font-weight: bold;}
.cpp-qt.source-cpp-qt .es5 {color: #006699; font-weight: bold;}
.cpp-qt.source-cpp-qt .br0 {color: #006E28;}
.cpp-qt.source-cpp-qt .sy0 {color: #006E28;}
.cpp-qt.source-cpp-qt .st0 {color: #BF0303;}
.cpp-qt.source-cpp-qt .nu0 {color: #B08000;}
.cpp-qt.source-cpp-qt .nu6 {color: #208080;}
.cpp-qt.source-cpp-qt .nu8 {color: #208080;}
.cpp-qt.source-cpp-qt .nu12 {color: #208080;}
.cpp-qt.source-cpp-qt .nu16 {color:#800080;}
.cpp-qt.source-cpp-qt .nu17 {color:#800080;}
.cpp-qt.source-cpp-qt .nu18 {color:#800080;}
.cpp-qt.source-cpp-qt .nu19 {color:#800080;}
.cpp-qt.source-cpp-qt .me1 {color: #2B74C7;}
.cpp-qt.source-cpp-qt .me2 {color: #2B74C7;}
.cpp-qt.source-cpp-qt .me3 {color: #2B74C7;}
.cpp-qt.source-cpp-qt .ln-xtra, .cpp-qt.source-cpp-qt li.ln-xtra, .cpp-qt.source-cpp-qt div.ln-xtra {background-color: #ffc;}
.cpp-qt.source-cpp-qt span.xtra { display:block; }

/*]]>*/
</style><!--[if lt IE 7]><style type="text/css">body{behavior:url("/skins/vector/csshover.min.htc")}</style><![endif]--></head>
<body class="mediawiki ltr sitedir-ltr ns-0 ns-subject page-Basic_Programming_cs skin-vector action-view vector-animateLayout">
		<div id="mw-page-base" class="noprint"></div>
		<div id="mw-head-base" class="noprint"></div>
		<div id="content" class="mw-body" role="main">
			<a id="top"></a>
			<div id="mw-js-message" style="display:none;"></div>
						<h1 id="firstHeading" class="firstHeading" lang="en"><span dir="auto">Basic Programming/cs</span></h1>
						<div id="bodyContent">
								<div id="siteSub">From Qt Wiki</div>
								<div id="contentSub"><div id="mw-revision-info">Revision as of 13:48, 26 May 2015 by <a href="http://wiki.qt.io/User:Wieland" title="User:Wieland" class="mw-userlink">Wieland</a>  <span class="mw-usertoollinks">(<a href="http://wiki.qt.io/User_talk:Wieland" title="User talk:Wieland">Talk</a> | <a href="http://wiki.qt.io/Special:Contributions/Wieland" title="Special:Contributions/Wieland">contribs</a>)</span></div><br />
				<div id="mw-revision-nav">(<a href="http://wiki.qt.io/index.php?title=Basic_Programming/cs&amp;diff=prev&amp;oldid=17516" title="Basic Programming/cs">diff</a>) <a href="http://wiki.qt.io/index.php?title=Basic_Programming/cs&amp;direction=prev&amp;oldid=17516" title="Basic Programming/cs">← Older revision</a> | Latest revision (diff) | Newer revision → (diff)</div></div>
												<div id="jump-to-nav" class="mw-jump">
					Jump to:					<a href="#mw-navigation">navigation</a>, 					<a href="#p-search">search</a>
				</div>
				<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr"><table style="center; margin: -1px auto 0px;border: 1px solid rgb(127, 194, 66); border-left: 10px solid rgb(127, 194, 66); background:rgb(250,250,250); width:600px">

<tr>
<td style="padding: 0.25em 0.5em;"> <b>This article may require cleanup to meet the Qt Wiki's quality standards.</b> Reason: Auto-imported from ExpressionEngine.<br /><small>Please <b><a rel="nofollow" class="external text" href="http://wiki.qt.io/index.php?title=Basic_Programming/cs&amp;action=edit">improve this article</a></b> if you can. Remove the {{cleanup}} tag and add this page to <b><a href="http://wiki.qt.io/Updated_pages" title="Updated pages">Updated pages</a></b> list after it's clean.</small>
</td></tr></table>
<p><br />
</p>
<div id="toc" class="toc"><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Za.C4.8D.C3.ADn.C3.A1me_programovat_s_Qt"><span class="tocnumber">1</span> <span class="toctext">Začínáme programovat s Qt</span></a>
<ul>
<li class="toclevel-2 tocsection-2"><a href="#Ahoj_Notepade"><span class="tocnumber">1.1</span> <span class="toctext">Ahoj Notepade</span></a></li>
<li class="toclevel-2 tocsection-4"><a href="#P.C5.99.C3.ADd.C3.A1n.C3.AD_tla.C4.8D.C3.ADtka_.27Quit.27"><span class="tocnumber">1.2</span> <span class="toctext">Přídání tlačítka 'Quit'</span></a></li>
<li class="toclevel-2 tocsection-6"><a href="#Odvozov.C3.A1n.C3.AD_vlastn.C3.ADch_widget.C5.AF_od_QWidgetu"><span class="tocnumber">1.3</span> <span class="toctext">Odvozování vlastních widgetů od QWidgetu</span></a></li>
<li class="toclevel-2 tocsection-8"><a href="#Vytv.C3.A1.C5.99en.C3.AD_.pro_souboru"><span class="tocnumber">1.4</span> <span class="toctext">Vytváření .pro souboru</span></a></li>
<li class="toclevel-2 tocsection-9"><a href="#Pou.C5.BE.C3.ADv.C3.A1n.C3.AD_t.C5.99.C3.ADdy_QMainWindow"><span class="tocnumber">1.5</span> <span class="toctext">Používání třídy QMainWindow</span></a></li>
<li class="toclevel-2 tocsection-11"><a href="#Ukl.C3.A1d.C3.A1n.C3.AD_a_na.C4.8D.C3.ADt.C3.A1n.C3.AD"><span class="tocnumber">1.6</span> <span class="toctext">Ukládání a načítání</span></a></li>
</ul>
</li>
</ul>
</div>

<h1><span class="mw-headline" id="Za.C4.8D.C3.ADn.C3.A1me_programovat_s_Qt">Začínáme programovat s Qt</span></h1>
<p>Vítejte ve světe Qt — ve světe multiplatformního GUI toolkitu. V tomto tutoriálu si krok za krokem ukážeme jak naprogramovat aplikaci jako je Notepad, tímto způsobem vás naučíme základních dovedností. Po přečtení tohoto návodu byste měli být připraveni na čtení našich přehledů a API dokumentace a zároveň být schopni nalézt informace, které můžete uplatnit ve vámi vyvíjených aplikacích.
</p>
<h2><span class="mw-headline" id="Ahoj_Notepade">Ahoj Notepade</span></h2>
<p>V tomto úvodním příkladu vytvoříme a zobrazíme oblast pro úpravu textu. Takto vypadá nejjednodušší možný Qt program.
</p><p><a href="http://wiki.qt.io/index.php?title=Special:Upload&amp;wpDestFile=Http://doc.qt.nokia.com/4.7/images/gs1.png" class="new" title="File:Http://doc.qt.nokia.com/4.7/images/gs1.png">Ahoj Notepade</a>
</p><p>A toto je jeho zdrojový kód:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="cpp-qt source-cpp-qt"><pre class="de1"><span class="co2">#include &lt;QApplication&gt;</span>
<span class="co2">#include &lt;QTextEdit&gt;</span>
&#160;
<span class="kw4">int</span> main<span class="br0">&#40;</span><span class="kw4">int</span> argv<span class="sy0">,</span> <span class="kw4">char</span> <span class="sy0">*</span><span class="st0">''</span><span class="st0">'args)
{
 QApplication app(argv, args);
&#160;
 QTextEdit textEdit;
 textEdit.show();
&#160;
 return app.exec();
}</span></pre></div></div>
<p>Nyní si tento zdrojový kód řádek po řádku projdeme. V prvních dvou řádcích vkládáme hlavičkové soubory pro <a rel="nofollow" class="external text" href="http://doc.qt.nokia.com/4.7/qapplication.html">QApplication</a> a <a rel="nofollow" class="external text" href="http://doc.qt.nokia.com/4.7/qtextedit.html">QTextEdit</a>, což jsou přávě ty třídy, které pro tento příklad potřebujeme. Názvy všech Qt hlavičkových souborů se shodují s názvy tříd které jsou v nich deklarovány.
</p><p>Na řádku 6 vytváříme objekt třídy <a rel="nofollow" class="external text" href="http://doc.qt.nokia.com/4.7/qapplication.html">QApplication</a>. Tento objekt spravuje prostředky celé aplikace a je vyžadován pro funkčnost všech Qt programů mající GUI. Jako parametry potřebuje argv a args, potože Qt samo od sebe přijímá několik argumentů příkazové řádky.
</p><p>Řádek 8 vytváří objekt třídy <a rel="nofollow" class="external text" href="http://doc.qt.nokia.com/4.7/qtextedit.html">QTextEdit</a>. Oblast pro úpravu textu je vizuální prvek GUI. V Qt takovéto elementy nazýváme widgety. Příklady dalších widgetů jsou například posuvníky, štítky, přepínače, atp. Widget může být zároveň kontejnerem pro další widgety; příkladem budiž hlavní okno aplikace či dialog.
</p><p>Řádek 9 zobrazí oblast pro úpravu textu na obrazovce ve vlastním okně. Vzhledem k tomu, že widgety mohou složit i jako kontejnery (například <a rel="nofollow" class="external text" href="http://doc.qt.nokia.com/4.7/qmainwindow.html">QMainWindow</a>, který obsahuje nástrojovou lištu, menu, stavový řádek a několik dalších widgetů), je možné zobrazit widget ve vlastním okně. Widgety jsou implicitně skryty; o zobrazení se stará právě metoda <a rel="nofollow" class="external text" href="http://doc.qt.nokia.com/4.7/qwidget.html#show">show()</a>).
</p><p>Řádek 11 spustí hlavní smyčku eventů aplikace. Dokud aplikace beží, jejím widgetům jsou zasílány eventy. Příkladem eventů jsou stisknutí tlačítek myši a klávesnice. Jakmile napíšete text do dříve zmíněné oblasti pro úpravu textu, ta obdrží eventy informující o stisknutí kláves a reaguje vykreslením příslušného textu.
</p><p>Pro spuštění aplikace, otevřete příkazovou řádku, přejděte do adresáře kde máte její zdrojový soubor a napište následující příkazy.
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="cpp-qt source-cpp-qt"><pre class="de1">qmake <span class="sy0">-</span>project
qmake
make</pre></div></div>
<p>Ty vytvoří spustitelný soubor v daném adresáři (na systémech windows bude možná třeba použít nmake namísto make. Také spustitelné soubory se budou nacházet buďto v podadresáři release nebo debug). qmake je Qt nástroj pro sestavování projektů vyžadující konfigurační soubor. Tento konfigurační soubor za nás qmake sám vygeneruje, když ho spustíme s přepínačem -project. Z daného konfiguračního souboru (s příponou .pro) qmake vytvoří makefile, která za vás program sestaví. Na to jak si můžete vytvořit vlastní .pro soubor se podíváme později.
</p>
<h3><span class="mw-headline" id="Roz.C5.A1i.C5.99uj.C3.ADc.C3.AD_informace">Rozšiřující informace</span></h3>
<p>|Téma|Odkaz|
|Widgety a gemoetrie okna|<a rel="nofollow" class="external text" href="http://doc.qt.nokia.com/4.7/application-windows.html%7C">Window and Dialog Widgets</a>
|Eventy a jejich zpracování|<a rel="nofollow" class="external text" href="http://doc.qt.nokia.com/4.7/eventsandfilters.html%7C">The Event System</a>
</p>
<h2><span class="mw-headline" id="P.C5.99.C3.ADd.C3.A1n.C3.AD_tla.C4.8D.C3.ADtka_.27Quit.27">Přídání tlačítka 'Quit'</span></h2>
<p>V reálné aplikaci budete běžně potřebovat více než jen jeden widget. Nyní přidáme <a rel="nofollow" class="external text" href="http://doc.qt.nokia.com/4.7/qpushbutton.html">QPushButton</a> pod oblast pro úpravu textu. Toto tlačítko bude plnit funkci vypínače aplikace (společně se zavřením okna).
</p><p><a href="http://wiki.qt.io/index.php?title=Special:Upload&amp;wpDestFile=Http://doc.qt.nokia.com/4.7/images/gs2.png" class="new" title="File:Http://doc.qt.nokia.com/4.7/images/gs2.png">Ahoj Notepade</a>
</p><p>Nyní se podívejme na zdrojový kód
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="cpp-qt source-cpp-qt"><pre class="de1"><span class="co2">#include &lt;QtGui&gt;</span>
&#160;
<span class="kw4">int</span> main<span class="br0">&#40;</span><span class="kw4">int</span> argv<span class="sy0">,</span> <span class="kw4">char</span><span class="st0">''</span><span class="st0">'*args)
{
 QApplication app(argv, args);
&#160;
QTextEdit textEdit;
 QPushButton quitButton(&quot;Quit&quot;);
&#160;
QObject::connect(&amp;quitButton, SIGNAL (clicked()), qApp, SLOT (quit()));
&#160;
QVBoxLayout layout;
 layout.addWidget(&amp;textEdit);
 layout.addWidget(&amp;quitButton);
&#160;
QWidget window;
 window.setLayout(&amp;layout);
&#160;
window.show();
&#160;
return app.exec();
}</span></pre></div></div>
<p>Na řádku 1 vkládáme <a rel="nofollow" class="external text" href="http://doc.qt.nokia.com/4.7/qtgui.html">QtGui</a>, které obsahuje všechny Qt GUI třídy.
</p><p>Řádek 10 používá Qt systém signálů a slotů a zajišťuje, že stisknutí tlačítka 'Quit' ukončí aplikaci. Slot je funkce, která může být vyvolána za běhu použitím jejího jména (jako doslovný řetězec). Signál je funkce, která když zavolána zavolá všechny sloty s ní propojené; tyto procedury nazýváme propojení slotu se signálem (to connect the slot to the signal) a vyslání signálu (to emit the signal).
</p><p><a rel="nofollow" class="external text" href="http://doc.qt.nokia.com/4.7/qcoreapplication.html#quit">quit()</a> je slot třídy <a rel="nofollow" class="external text" href="http://doc.qt.nokia.com/4.7/qapplication.html">QApplication</a> , který při zavolání ukončí aplikaci. <a rel="nofollow" class="external text" href="http://doc.qt.nokia.com/4.7/qabstractbutton.html#clicked">clicked()</a> je signál třídy, který <a rel="nofollow" class="external text" href="http://doc.qt.nokia.com/4.7/qpushbutton.html">QPushButton</a> vyšle poté co je stisknut. Statická funkce <a rel="nofollow" class="external text" href="http://doc.qt.nokia.com/4.7/qobject.html#connect">QObject::connect()</a> se stará o propojení signálu se slotem. SIGNAL () a SLOT() jsou dvě makra, která přebírají prototyp (type-signature) signálu a slotu k propojení.
</p><p>Řádek 12 vytváří objekt třídy <a rel="nofollow" class="external text" href="http://doc.qt.nokia.com/4.7/qvboxlayout.html">QVBoxLayout</a>. Jak již bylo zmíňeno, widgety mohou obsahovat další wigety. Je také možné přímo nastavit meze (umístění a velikost) potomků widgetu (widgetů, které daný widget obsahuje). Layout spravuje meze svých potomků automaticky. Například <a rel="nofollow" class="external text" href="http://doc.qt.nokia.com/4.7/qvboxlayout.html">QVBoxLayout</a> umístí potomky vertikálně pod sebe.
</p><p>Řádky 13 a 14 přidávájí do layoutu oblast na úpravu textu a tlačítko. Řádek 17 nastavuje nastaví widgetu hlavní layout.
</p>
<h3><span class="mw-headline" id="Roz.C5.A1i.C5.99uj.C3.ADc.C3.AD_informace_2">Rozšiřující informace</span></h3>
<table>
<tr>
<td>Téma
</td>
<td>Odkaz
</td></tr>
<tr>
<td>Signály a Sloty
</td>
<td><a rel="nofollow" class="external text" href="http://doc.qt.nokia.com/4.7/signalsandslots.html">Signals &amp; Slots</a>
</td></tr>
<tr>
<td>Layouty
</td>
<td><a rel="nofollow" class="external text" href="http://doc.qt.nokia.com/4.7/layout.html">Layout Management</a>, <a rel="nofollow" class="external text" href="http://doc.qt.nokia.com/4.7/widgets-and-layouts.html">Widgets and Layouts</a>, <a rel="nofollow" class="external text" href="http://doc.qt.nokia.com/4.7/examples-layouts.html">Layout Examples</a>
</td></tr>
<tr>
<td>Widgety které Qt nabízí
</td>
<td><a rel="nofollow" class="external text" href="http://doc.qt.nokia.com/4.7/gallery.html">Qt Widget Gallery</a>, <a rel="nofollow" class="external text" href="http://doc.qt.nokia.com/4.7/examples-widgets.html">Widget Examples</a>
</td></tr></table>
<h2><span class="mw-headline" id="Odvozov.C3.A1n.C3.AD_vlastn.C3.ADch_widget.C5.AF_od_QWidgetu">Odvozování vlastních widgetů od QWidgetu</span></h2>
<p>Možná by bylo hezké dotázat se uživatele před ukončením aplikace, zdali opravdu chce aplikaci opustit. V tomto příkladě vytvoříme podtřídu <a rel="nofollow" class="external text" href="http://doc.qt.nokia.com/4.7/qwidget.html">QWidgetu</a>, které přidáme vlastní slot a následně ho napojíme na naše tlačítko 'Quit'.
</p><p><a href="http://wiki.qt.io/index.php?title=Special:Upload&amp;wpDestFile=Http://doc.qt.nokia.com/4.7/images/gs3.png" class="new" title="File:Http://doc.qt.nokia.com/4.7/images/gs3.png">Odvozujeme od QWidgetu</a>
</p><p>Podívejme se nyní na zdrojový kód
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="cpp-qt source-cpp-qt"><pre class="de1"><span class="kw2">class</span> Notepad <span class="sy0">:</span> <span class="kw2">public</span> <span class="kw5">QWidget</span>
<span class="br0">&#123;</span>
 <span class="kw2">Q_OBJECT</span>
&#160;
<span class="kw2">public</span><span class="sy0">:</span>
 Notepad<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
&#160;
<span class="kw2">private</span> <span class="kw2">slots</span><span class="sy0">:</span>
 <span class="kw4">void</span> quit<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
&#160;
<span class="kw2">private</span><span class="sy0">:</span>
 <span class="kw5">QTextEdit</span> <span class="sy0">*</span>textEdit<span class="sy0">;</span>
 <span class="kw5">QPushButton</span> <span class="sy0">*</span>quitButton<span class="sy0">;</span>
<span class="br0">&#125;</span><span class="sy0">;</span></pre></div></div>
<p>Na začátku definice naší třídy (která přirozeně musí být podtřídou třídy <a rel="nofollow" class="external text" href="http://doc.qt.nokia.com/4.7/qobject.html">QObject</a>. <a rel="nofollow" class="external text" href="http://doc.qt.nokia.com/4.7/qobject.html">QObject</a>) musí být makro Q_OBJECT, to z ní učiní plnohotnotný QObject. To že je třída QObjectem jí dává specielní vlastnosti. Například se můžeme dotázat na název třídy či slotu za běhu programu. Je také možné zjistit parametry slotu a zavolat ho.
</p><p>Řádek 13 deklaruje slot quit(). Nyní můžeme quit() propojit se signály s odpovídajícím prototypem (libovolným bezparametrickým signálem).
</p><p>Namísto nastavování GUI a propojení slotu ve funkci main() provádíme tuto práci v konstruktoru třídy Notepad.
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="cpp-qt source-cpp-qt"><pre class="de1">Notepad<span class="sy0">::</span><span class="me2">Notepad</span><span class="br0">&#40;</span><span class="br0">&#41;</span>
<span class="br0">&#123;</span>
 textEdit <span class="sy0">=</span> <span class="kw1">new</span> QTextEdit<span class="sy0">;</span>
 quitButton <span class="sy0">=</span> <span class="kw1">new</span> <span class="kw5">QPushButton</span><span class="br0">&#40;</span>tr<span class="br0">&#40;</span><span class="st0">&quot;Quit&quot;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span>
&#160;
<span class="kw2">connect</span><span class="br0">&#40;</span>quitButton<span class="sy0">,</span> SIGNAL <span class="br0">&#40;</span>clicked<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">,</span> <span class="kw1">this</span><span class="sy0">,</span> SLOT <span class="br0">&#40;</span>quit<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span>
&#160;
<span class="kw5">QVBoxLayout</span> <span class="st0">''</span><span class="st0">'layout = new QVBoxLayout;
 layout-&gt;addWidget(textEdit);
 layout-&gt;addWidget(quitButton);
&#160;
 setLayout(layout);
&#160;
 setWindowTitle(tr(&quot;Notepad&quot;));
}</span></pre></div></div>
<p>Jak jste mohli vidět v definici třídy, používáme ukazatele na naše <a rel="nofollow" class="external text" href="http://doc.qt.nokia.com/4.7/qobject.html">QObjekty</a> (textEdit a quitButton). Zpravidla byste měli <a rel="nofollow" class="external text" href="http://doc.qt.nokia.com/4.7/qobject.html">QObjekty</a> vždy alokovat na heapu a nikdy je kopírovat.
</p><p>Viditelné stringy "obalujeme" do funkce <a rel="nofollow" class="external text" href="http://doc.qt.nokia.com/4.7/qobject.html#tr">&gt; tr()</a> a to z toho důvodu, kdybychom se v budoucnu rozhodli poskytovat naší aplikaci ve více jazykových mutacích. Nebudeme zacházet do detailů, ovšem pokud vás téma zajímá, můžete se podívat na odkaz Qt Linguist z následující tabulky.
</p>
<h3><span class="mw-headline" id="Roz.C5.A1i.C5.99uj.C3.ADc.C3.AD_informace_3">Rozšiřující informace</span></h3>
<p>|Téma|Odkaz|
|tr() a internacionalizace|<a rel="nofollow" class="external text" href="http://doc.qt.nokia.com/4.7/linguist-manual.html">Qt Linguist Manual</a>, <a rel="nofollow" class="external text" href="http://doc.qt.nokia.com/4.7/i18n-source-translation.html">Writing SOurce Code for Translation</a>, <a rel="nofollow" class="external text" href="http://doc.qt.nokia.com/4.7/linguist-hellotr.html">Hello tr()</a> Example, <a rel="nofollow" class="external text" href="http://doc.qt.nokia.com/4.7/internationalization.html%7C">Internationalization with Qt</a>
|QObjekty a objektový model Qt (Základ pro porozumění Qt)|<a rel="nofollow" class="external text" href="http://doc.qt.nokia.com/4.7/object.html%7C">Object Model</a>
|qmake a systém překladu Qt|<a rel="nofollow" class="external text" href="http://doc.qt.nokia.com/4.7/qmake-manual.html%7C">qmake Manual</a>
</p>
<h2><span class="mw-headline" id="Vytv.C3.A1.C5.99en.C3.AD_.pro_souboru">Vytváření .pro souboru</span></h2>
<p>Na ukázku si vytvoříme vlastní .pro soubor namísto toho, který za nás vygenerovalo qmake -project.
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="cpp-qt source-cpp-qt"><pre class="de1">HEADERS <span class="sy0">=</span> notepad.<span class="me1">h</span>
SOURCES <span class="sy0">=</span> notepad.<span class="me1">cpp</span>  main.<span class="me1">cpp</span></pre></div></div>
<p>Následující příkazy přeloží náš ukázkový projekt.
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="cpp-qt source-cpp-qt"><pre class="de1">qmake
make</pre></div></div>
<h2><span class="mw-headline" id="Pou.C5.BE.C3.ADv.C3.A1n.C3.AD_t.C5.99.C3.ADdy_QMainWindow">Používání třídy QMainWindow</span></h2>
<p>Mnoho aplikací bude mít prospěch z používání <a rel="nofollow" class="external text" href="http://doc.qt.nokia.com/4.7/qmainwindow.html">QMainWindow</a>, které má svůj vlastní layout kam můžete přidat menu, dokovací widgety, nástrojovou lištu a stavovou lištu. <a rel="nofollow" class="external text" href="http://doc.qt.nokia.com/4.7/qmainwindow.html">QMainWindow</a> má centrální oblast která může obsahovat libovolný widget. V Našem případě tam umístíme naši oblast pro úpravu textu.
</p><p><a href="http://wiki.qt.io/index.php?title=Special:Upload&amp;wpDestFile=Http://doc.qt.nokia.com/4.7/images/gs4.png" class="new" title="File:Http://doc.qt.nokia.com/4.7/images/gs4.png">Používání třídy QMainWindow</a>
</p><p>Nyní se podívejme na novou definici třídy Notepad
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="cpp-qt source-cpp-qt"><pre class="de1"><span class="co2">#include &lt;QtGui&gt;</span>
&#160;
<span class="kw2">class</span> Notepad <span class="sy0">:</span> <span class="kw2">public</span> <span class="kw5">QMainWindow</span>
<span class="br0">&#123;</span>
 <span class="kw2">Q_OBJECT</span>
&#160;
<span class="kw2">public</span><span class="sy0">:</span>
 Notepad<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
&#160;
<span class="kw2">private</span> <span class="kw2">slots</span><span class="sy0">:</span>
 <span class="kw4">void</span> open<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
 <span class="kw4">void</span> save<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
 <span class="kw4">void</span> quit<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
&#160;
<span class="kw2">private</span><span class="sy0">:</span>
 <span class="kw5">QTextEdit</span> <span class="sy0">*</span>textEdit<span class="sy0">;</span>
&#160;
 <span class="kw5">QAction</span> <span class="sy0">*</span>openAction<span class="sy0">;</span>
 <span class="kw5">QAction</span> <span class="sy0">*</span>saveAction<span class="sy0">;</span>
 <span class="kw5">QAction</span> <span class="sy0">*</span>exitAction<span class="sy0">;</span>
&#160;
 <span class="kw5">QMenu</span> <span class="st0">''</span><span class="st0">'fileMenu;
};</span></pre></div></div>
<p>Přidáváme další dva sloty pro otevření a uložení dokumentu. Budou implementovány v následující sekci.
</p><p>Často chceme, aby bylo možné vyvolat jediný slot několika widgety. Typický příklad představují položky menu a tlačítka na nástrojové liště. Pro usnadnění Qt nabízízí <a rel="nofollow" class="external text" href="http://doc.qt.nokia.com/4.7/qaction.html">QAction</a>, která může být předáná několika widgetům a být propojena se slotem. Například jak <a rel="nofollow" class="external text" href="http://doc.qt.nokia.com/4.7/qmenu.html">QMenu</a> tak i <a rel="nofollow" class="external text" href="http://doc.qt.nokia.com/4.7/qtoolbar.html">QToolBar</a> mohou vytvářet položky menu a nástrojová tlačítka z identických <a rel="nofollow" class="external text" href="http://doc.qt.nokia.com/4.7/qaction.html">QAction</a> objektů. Za moment se podíváme jak to funguje.
</p><p>Stejně jako v předchozí definici, nastavujeme GUI v konstruktoru třídy Notepad
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="cpp-qt source-cpp-qt"><pre class="de1">Notepad<span class="sy0">::</span><span class="me2">Notepad</span><span class="br0">&#40;</span><span class="br0">&#41;</span>
<span class="br0">&#123;</span>
 saveAction <span class="sy0">=</span> <span class="kw1">new</span> <span class="kw5">QAction</span><span class="br0">&#40;</span>tr<span class="br0">&#40;</span><span class="st0">&quot;&amp;Open&quot;</span><span class="br0">&#41;</span><span class="sy0">,</span> <span class="kw1">this</span><span class="br0">&#41;</span><span class="sy0">;</span>
 saveAction <span class="sy0">=</span> <span class="kw1">new</span> <span class="kw5">QAction</span><span class="br0">&#40;</span>tr<span class="br0">&#40;</span><span class="st0">&quot;&amp;Save&quot;</span><span class="br0">&#41;</span><span class="sy0">,</span> <span class="kw1">this</span><span class="br0">&#41;</span><span class="sy0">;</span>
 exitAction <span class="sy0">=</span> <span class="kw1">new</span> <span class="kw5">QAction</span><span class="br0">&#40;</span>tr<span class="br0">&#40;</span><span class="st0">&quot;E&amp;xit&quot;</span><span class="br0">&#41;</span><span class="sy0">,</span> <span class="kw1">this</span><span class="br0">&#41;</span><span class="sy0">;</span>
&#160;
 <span class="kw2">connect</span><span class="br0">&#40;</span>openAction<span class="sy0">,</span> SIGNAL <span class="br0">&#40;</span>triggered<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">,</span> <span class="kw1">this</span><span class="sy0">,</span> SLOT <span class="br0">&#40;</span>open<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span>
 <span class="kw2">connect</span><span class="br0">&#40;</span>saveAction<span class="sy0">,</span> SIGNAL <span class="br0">&#40;</span>triggered<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">,</span> <span class="kw1">this</span><span class="sy0">,</span> SLOT <span class="br0">&#40;</span>save<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span>
 <span class="kw2">connect</span><span class="br0">&#40;</span>exitAction<span class="sy0">,</span> SIGNAL <span class="br0">&#40;</span>triggered<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">,</span> qApp<span class="sy0">,</span> SLOT <span class="br0">&#40;</span>quit<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span>
&#160;
 fileMenu <span class="sy0">=</span> menuBar<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">-&gt;</span><span class="me3">addMenu</span><span class="br0">&#40;</span>tr<span class="br0">&#40;</span><span class="st0">&quot;&amp;File&quot;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span>
 fileMenu<span class="sy0">-&gt;</span><span class="me3">addAction</span><span class="br0">&#40;</span>openAction<span class="br0">&#41;</span><span class="sy0">;</span>
 fileMenu<span class="sy0">-&gt;</span><span class="me3">addAction</span><span class="br0">&#40;</span>saveAction<span class="br0">&#41;</span><span class="sy0">;</span>
 fileMenu<span class="sy0">-&gt;</span><span class="me3">addSeparator</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
 fileMenu<span class="sy0">-&gt;</span><span class="me3">addAction</span><span class="br0">&#40;</span>exitAction<span class="br0">&#41;</span><span class="sy0">;</span>
&#160;
 textEdit <span class="sy0">=</span> <span class="kw1">new</span> QTextEdit<span class="sy0">;</span>
 setCentralWidget<span class="br0">&#40;</span>textEdit<span class="br0">&#41;</span><span class="sy0">;</span>
&#160;
 setWindowTitle<span class="br0">&#40;</span>tr<span class="br0">&#40;</span><span class="st0">&quot;Notepad&quot;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span>
<span class="br0">&#125;</span></pre></div></div>
<p>Naše <a rel="nofollow" class="external text" href="http://doc.qt.nokia.com/4.7/qaction.html">QAction</a> objekty jsou vytvořeny s textem který chceme zobrazit na widgetech kterým je předáme (v našem případě se jedná o položky v menu). Pokud bychom je zároveň chtěli přidat do nástrojové lišty, mohli bychom jim nastavit i <a rel="nofollow" class="external text" href="http://doc.qt.nokia.com/4.7/qicon.html">ikony</a>.
</p><p>Pokud nyní stiskneme položku v menu, spustí to danou akci a ta vyvolá příslušný slot.
</p>
<h3><span class="mw-headline" id="Roz.C5.A1i.C5.99uj.C3.ADc.C3.AD_informace_4">Rozšiřující informace</span></h3>
<p>|Téma|Odkaz|
|Hlavní okna a jejich třídy|<a rel="nofollow" class="external text" href="http://doc.qt.nokia.com/4.7/mainwindow.html">Application Main Window</a>, <a rel="nofollow" class="external text" href="http://doc.qt.nokia.com/4.7/examples-mainwindow.html%7C">Main Window Examples</a>
|MDI aplikace|<a rel="nofollow" class="external text" href="http://doc.qt.nokia.com/4.7/qmdiarea.html">QMdiArea</a>, <a rel="nofollow" class="external text" href="http://doc.qt.nokia.com/4.7/mainwindows-mdi.html%7C">MDI Example</a>
</p>
<h2><span class="mw-headline" id="Ukl.C3.A1d.C3.A1n.C3.AD_a_na.C4.8D.C3.ADt.C3.A1n.C3.AD">Ukládání a načítání</span></h2>
<p>V tomto příkladě naimplementujeme funkčnost slotů open() a save(), které jsme přidali v předchozí definici.
</p><p><a href="http://wiki.qt.io/index.php?title=Special:Upload&amp;wpDestFile=Http://doc.qt.nokia.com/4.7/images/gs5.png" class="new" title="File:Http://doc.qt.nokia.com/4.7/images/gs5.png">Ukládání a načítání</a>
</p><p>Začneme se slotem open():
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="cpp-qt source-cpp-qt"><pre class="de1"><span class="kw5">QString</span> fileName <span class="sy0">=</span> <span class="kw5">QFileDialog</span><span class="sy0">::</span><span class="me2">getOpenFileName</span><span class="br0">&#40;</span><span class="kw1">this</span><span class="sy0">,</span> tr<span class="br0">&#40;</span><span class="st0">&quot;Open File&quot;</span><span class="br0">&#41;</span><span class="sy0">,</span> <span class="st0">&quot;&quot;</span><span class="sy0">,</span>
 tr<span class="br0">&#40;</span><span class="st0">&quot;Text Files ('''.txt);;C++ Files ('''.cpp'''.h)&quot;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span>
&#160;
<span class="kw1">if</span> <span class="br0">&#40;</span>fileName <span class="sy0">!=</span> <span class="st0">&quot;&quot;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
 <span class="kw5">QFile</span> file<span class="br0">&#40;</span>fileName<span class="br0">&#41;</span><span class="sy0">;</span>
 <span class="kw1">if</span> <span class="br0">&#40;</span><span class="sy0">!</span>file.<span class="me1">open</span><span class="br0">&#40;</span><span class="kw5">QIODevice</span><span class="sy0">::</span><span class="me2">ReadOnly</span><span class="br0">&#41;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
 <span class="kw5">QMessageBox</span><span class="sy0">::</span><span class="me2">critical</span><span class="br0">&#40;</span><span class="kw1">this</span><span class="sy0">,</span> tr<span class="br0">&#40;</span><span class="st0">&quot;Error&quot;</span><span class="br0">&#41;</span><span class="sy0">,</span>
 tr<span class="br0">&#40;</span><span class="st0">&quot;Could not open file&quot;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span>
 return<span class="sy0">;</span>
 <span class="br0">&#125;</span>
 <span class="kw5">QString</span> contents <span class="sy0">=</span> file.<span class="me1">readAll</span><span class="br0">&#40;</span><span class="br0">&#41;</span>.<span class="me1">constData</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
 textEdit<span class="sy0">-&gt;</span><span class="me3">setPlainText</span><span class="br0">&#40;</span>contents<span class="br0">&#41;</span><span class="sy0">;</span>
 file.<span class="me1">close</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
<span class="br0">&#125;</span></pre></div></div>
<p>Prvním krokem je dotázání se uživatele na název souboru, který chce otevřít. Qt nabízí <a rel="nofollow" class="external text" href="http://doc.qt.nokia.com/4.7/qfiledialog.html">QFileDialog</a>, což je dialog ve kterém uživatel může vybrat soubor. Obrázek výše zobrazuje tento dialog na Linuxové distribuci Kubuntu. Statická funkce <a rel="nofollow" class="external text" href="http://doc.qt.nokia.com/4.7/qfiledialog.html#getOpenFileName">&gt; getOpenFileName()</a> zobrazí modální souborový dialog a neskončí dokud uživatel nevybere soubor. Vrací cestu k vybranému souboru, případně prázdný řetězec pokud uživatel dialog zrušil.
</p><p>Pokud máme cestu k souboru, pokusíme se ho otevřít funkcí <a rel="nofollow" class="external text" href="http://doc.qt.nokia.com/4.7/qiodevice.html#open">&gt; open()</a>. Ta vrací true pokud bylo otevření úspěšné. Nebudeme zacházet do detailů co se zpracování chyb týče, ovšem můžete si přečíst články odkázané v sekci "Rozšiřující informace". Pokud soubor nemůže být otevřen, zobrazíme <a rel="nofollow" class="external text" href="http://doc.qt.nokia.com/4.7/qmessagebox.html">QMessageBox</a> a zobrazíme dialog s chybovým hlášením (pro více informací si přečtěte dokumentaci třídy <a rel="nofollow" class="external text" href="http://doc.qt.nokia.com/4.7/qmessagebox.html">QMessageBox</a>).
Čtení dat je díky funcki <a rel="nofollow" class="external text" href="http://doc.qt.nokia.com/4.7/qiodevice.html#readAll">&gt; readAll()</a> triviální, ta vrátí veškerá data obsažená v souboru v <a rel="nofollow" class="external text" href="http://doc.qt.nokia.com/4.7/qbytearray.html">QByteArray</a>. Funkce <a rel="nofollow" class="external text" href="http://doc.qt.nokia.com/4.7/qbytearray.html#constData">&gt; constData()</a> vrací veškerá data jako const char<b> jenž <a rel="nofollow" class="external text" href="http://doc.qt.nokia.com/4.7/qstring.html">QString</a> přebírá v jednom ze svých konstruktorů. Poté již obsah souboru snadno zobrazíme v oblasti pro úpravu textu. Po načtení soubor uzavřeme za použití <a rel="nofollow" class="external text" href="http://doc.qt.nokia.com/4.7/qiodevice.html#close">&gt; close()</a>, tím předáme souborový deskriptor zpět operačnímu systému.</b>
</p><p>Nyní se podívejme na slot save().
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="cpp-qt source-cpp-qt"><pre class="de1"><span class="kw5">QString</span> fileName <span class="sy0">=</span> <span class="kw5">QFileDialog</span><span class="sy0">::</span><span class="me2">getSaveFileName</span><span class="br0">&#40;</span><span class="kw1">this</span><span class="sy0">,</span> tr<span class="br0">&#40;</span><span class="st0">&quot;Save File&quot;</span><span class="br0">&#41;</span><span class="sy0">,</span> <span class="st0">&quot;&quot;</span><span class="sy0">,</span>
 tr<span class="br0">&#40;</span><span class="st0">&quot;Text Files ('''.txt);;C++ Files ('''.cpp '''.h)&quot;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span>
&#160;
<span class="kw1">if</span> <span class="br0">&#40;</span>fileName <span class="sy0">!=</span> <span class="st0">&quot;&quot;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
 <span class="kw5">QFile</span> file<span class="br0">&#40;</span>fileName<span class="br0">&#41;</span><span class="sy0">;</span>
 <span class="kw1">if</span> <span class="br0">&#40;</span><span class="sy0">!</span>file.<span class="me1">open</span><span class="br0">&#40;</span><span class="kw5">QIODevice</span><span class="sy0">::</span><span class="me2">WriteOnly</span><span class="br0">&#41;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
 <span class="co1">// error message</span>
 <span class="br0">&#125;</span> <span class="kw1">else</span> <span class="br0">&#123;</span>
 <span class="kw5">QTextStream</span> stream<span class="br0">&#40;</span><span class="sy0">&amp;</span>file<span class="br0">&#41;</span><span class="sy0">;</span>
 stream <span class="sy0">&lt;&lt;</span> textEdit<span class="sy0">-&gt;</span><span class="me3">toPlainText</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
 stream.<span class="me1">flush</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
 file.<span class="me1">close</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
 <span class="br0">&#125;</span>
<span class="br0">&#125;</span></pre></div></div>
<p>Při ukládání obsahu oblasti pro úpravu textu do textového souboru používáme třídy <a rel="nofollow" class="external text" href="http://doc.qt.nokia.com/4.7/qtextstream.html">QTextStream</a>, která zaobaluje objekt třídy <a rel="nofollow" class="external text" href="http://doc.qt.nokia.com/4.7/qfile.html">QFile</a>. Tento textový proud je schopen zapisovat <a rel="nofollow" class="external text" href="http://doc.qt.nokia.com/4.7/qstring.html">QString</a> přímo do souboru; <a rel="nofollow" class="external text" href="http://doc.qt.nokia.com/4.7/qfile.html">QFile</a> přijímá pouze surová data (typu char<b>) funkcí <a rel="nofollow" class="external text" href="http://doc.qt.nokia.com/4.7/qiodevice.html#write">&gt; write()</a> třídy <a rel="nofollow" class="external text" href="http://doc.qt.nokia.com/4.7/qiodevice.html">QIODevice</a></b>
</p>
<h3><span class="mw-headline" id="Roz.C5.A1i.C5.99uj.C3.ADc.C3.AD_informace_5">Rozšiřující informace</span></h3>
<table>
<tr>
<td>Téma
</td>
<td>Odkaz
</td></tr>
<tr>
<td>Soubory a zařízení vstupu a výstupu
</td>
<td><a rel="nofollow" class="external text" href="http://doc.qt.nokia.com/4.7/qfile.html">QFile</a>, <a rel="nofollow" class="external text" href="http://doc.qt.nokia.com/4.7/qiodevice.html">QIODevice</a>
</td></tr></table>

<!-- 
NewPP limit report
CPU time usage: 0.233 seconds
Real time usage: 0.257 seconds
Preprocessor visited node count: 164/1000000
Preprocessor generated node count: 344/1000000
Post‐expand include size: 1288/2097152 bytes
Template argument size: 417/2097152 bytes
Highest expansion depth: 5/40
Expensive parser function count: 0/100
-->

<!-- Saved in parser cache with key qtio_wiki:pcache:idhash:2198-0!*!0!!en!2!* and timestamp 20151104130710 and revision id 17516
 -->
</div>								<div class="printfooter">
				Retrieved from "<a href="http://wiki.qt.io/index.php?title=Basic_Programming/cs&amp;oldid=17516">http://wiki.qt.io/index.php?title=Basic_Programming/cs&amp;oldid=17516</a>"				</div>
												<div id='catlinks' class='catlinks'><div id="mw-normal-catlinks" class="mw-normal-catlinks"><a href="http://wiki.qt.io/Special:Categories" title="Special:Categories">Categories</a>: <ul><li><a href="http://wiki.qt.io/Category:Articles_needing_cleanup" title="Category:Articles needing cleanup">Articles needing cleanup</a></li><li><a href="http://wiki.qt.io/index.php?title=Category:Pages_with_broken_file_links&amp;action=edit&amp;redlink=1" class="new" title="Category:Pages with broken file links (page does not exist)">Pages with broken file links</a></li></ul></div></div>												<div class="visualClear"></div>
							</div>
		</div>
		<div id="mw-navigation">
			<h2>Navigation menu</h2>
			<div id="mw-head">
				<div id="p-personal" role="navigation" class="" aria-labelledby="p-personal-label">
	<h3 id="p-personal-label">Personal tools</h3>
	<ul>
<li id="pt-anonuserpage"><a href="http://wiki.qt.io/User:10.0.113.70" class="new" title="The user page for the IP address you are editing as [.]" accesskey=".">10.0.113.70</a></li><li id="pt-anontalk"><a href="http://wiki.qt.io/User_talk:10.0.113.70" class="new" title="Discussion about edits from this IP address [n]" accesskey="n">Talk for this IP address</a></li><li id="pt-login"><a href="http://wiki.qt.io/index.php?title=Special:QtLogin&amp;returnto=Basic+Programming%2Fcs" title="You are encouraged to log in; however, it is not mandatory [o]" accesskey="o">Sign in</a></li>	</ul>
</div>
				<div id="left-navigation">
					<div id="p-namespaces" role="navigation" class="vectorTabs" aria-labelledby="p-namespaces-label">
	<h3 id="p-namespaces-label">Namespaces</h3>
	<ul>
					<li  id="ca-nstab-main" class="selected"><span><a href="http://wiki.qt.io/Basic_Programming/cs"  title="View the content page [c]" accesskey="c">Page</a></span></li>
					<li  id="ca-talk" class="new"><span><a href="http://wiki.qt.io/index.php?title=Talk:Basic_Programming/cs&amp;action=edit&amp;redlink=1"  title="Discussion about the content page [t]" accesskey="t">Discussion</a></span></li>
			</ul>
</div>
<div id="p-variants" role="navigation" class="vectorMenu emptyPortlet" aria-labelledby="p-variants-label">
	<h3 id="mw-vector-current-variant">
		</h3>
	<h3 id="p-variants-label"><span>Variants</span><a href="#"></a></h3>
	<div class="menu">
		<ul>
					</ul>
	</div>
</div>
				</div>
				<div id="right-navigation">
					<div id="p-views" role="navigation" class="vectorTabs" aria-labelledby="p-views-label">
	<h3 id="p-views-label">Views</h3>
	<ul>
					<li id="ca-view" class="selected"><span><a href="http://wiki.qt.io/Basic_Programming/cs" >Read</a></span></li>
					<li id="ca-viewsource"><span><a href="http://wiki.qt.io/index.php?title=Basic_Programming/cs&amp;action=edit"  title="This page is protected.&#10;You can view its source [e]" accesskey="e">View source</a></span></li>
					<li id="ca-history" class="collapsible"><span><a href="http://wiki.qt.io/index.php?title=Basic_Programming/cs&amp;action=history"  title="Past revisions of this page [h]" accesskey="h">View history</a></span></li>
			</ul>
</div>
<div id="p-cactions" role="navigation" class="vectorMenu emptyPortlet" aria-labelledby="p-cactions-label">
	<h3 id="p-cactions-label"><span>Actions</span><a href="#"></a></h3>
	<div class="menu">
		<ul>
					</ul>
	</div>
</div>
<div id="p-search" role="search">
	<h3><label for="searchInput">Search</label></h3>
	<form action="http://wiki.qt.io/index.php" id="searchform">
					<div id="simpleSearch">
					<input type="search" name="search" placeholder="Search" title="Search Qt Wiki [f]" accesskey="f" id="searchInput" /><input type="hidden" value="Special:Search" name="title" /><input type="submit" name="fulltext" value="Search" title="Search the pages for this text" id="mw-searchButton" class="searchButton mw-fallbackSearchButton" /><input type="submit" name="go" value="Go" title="Go to a page with this exact name if exists" id="searchButton" class="searchButton" />		</div>
	</form>
</div>
				</div>
			</div>
			<div id="mw-panel">
					<div id="p-logo" role="banner"><a style="background-image: url(http://wiki.qt.io/skins/common/images/wiki.png);" href="http://wiki.qt.io/Main_Page"  title="Visit the main page"></a></div>
				<div class="portal" role="navigation" id='p-navigation' aria-labelledby='p-navigation-label'>
	<h3 id='p-navigation-label'>Navigation</h3>
	<div class="body">
		<ul>
			<li id="n-mainpage-description"><a href="http://wiki.qt.io/Main_Page" title="Visit the main page [z]" accesskey="z">Main page</a></li>
			<li id="n-recentchanges"><a href="http://wiki.qt.io/Special:RecentChanges" title="A list of recent changes in the wiki [r]" accesskey="r">Recent changes</a></li>
			<li id="n-randompage"><a href="http://wiki.qt.io/Special:Random" title="Load a random page [x]" accesskey="x">Random page</a></li>
			<li id="n-help"><a href="https://www.mediawiki.org/wiki/Special:MyLanguage/Help:Contents" title="The place to find out">Help</a></li>
		</ul>
	</div>
</div>
<div class="portal" role="navigation" id='p-tb' aria-labelledby='p-tb-label'>
	<h3 id='p-tb-label'>Tools</h3>
	<div class="body">
		<ul>
			<li id="t-whatlinkshere"><a href="http://wiki.qt.io/Special:WhatLinksHere/Basic_Programming/cs" title="A list of all wiki pages that link here [j]" accesskey="j">What links here</a></li>
			<li id="t-recentchangeslinked"><a href="http://wiki.qt.io/Special:RecentChangesLinked/Basic_Programming/cs" title="Recent changes in pages linked from this page [k]" accesskey="k">Related changes</a></li>
			<li id="t-specialpages"><a href="http://wiki.qt.io/Special:SpecialPages" title="A list of all special pages [q]" accesskey="q">Special pages</a></li>
			<li id="t-print"><a href="http://wiki.qt.io/index.php?title=Basic_Programming/cs&amp;oldid=17516&amp;printable=yes" rel="alternate" title="Printable version of this page [p]" accesskey="p">Printable version</a></li>
			<li id="t-permalink"><a href="http://wiki.qt.io/index.php?title=Basic_Programming/cs&amp;oldid=17516" title="Permanent link to this revision of the page">Permanent link</a></li>
			<li id="t-info"><a href="http://wiki.qt.io/index.php?title=Basic_Programming/cs&amp;action=info">Page information</a></li>
		</ul>
	</div>
</div>
			</div>
		</div>
		<div id="footer" role="contentinfo">
							<ul id="footer-info">
											<li id="footer-info-lastmod"> This page was last modified on 26 May 2015, at 13:48.</li>
											<li id="footer-info-viewcount">This page has been accessed 1,029 times.</li>
									</ul>
							<ul id="footer-places">
											<li id="footer-places-terms"><a href='https://developer.qtcloudservices.com/legal/terms'>Käyttöehdot</a></li>
									</ul>
										<ul id="footer-icons" class="noprint">
					<li id="footer-poweredbyico">
						<a href="http://www.mediawiki.org/"><img src="http://wiki.qt.io/skins/common/images/poweredby_mediawiki_88x31.png" alt="Powered by MediaWiki" width="88" height="31" /></a>
					</li>
				</ul>
						<div style="clear:both"></div>
		</div>
		<script>/*<![CDATA[*/window.jQuery && jQuery.ready();/*]]>*/</script><script>if(window.mw){
mw.loader.state({"site":"loading","user":"ready","user.groups":"ready"});
}</script>
<script>if(window.mw){
mw.loader.load(["mediawiki.action.view.postEdit","mediawiki.user","mediawiki.hidpi","mediawiki.page.ready","mediawiki.searchSuggest","skins.vector.collapsibleNav"],null,true);
}</script>
<script src="http://wiki.qt.io/load.php?debug=false&amp;lang=en&amp;modules=site&amp;only=scripts&amp;skin=vector&amp;*"></script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','http://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-54043535-2', 'auto');
  ga('send', 'pageview');

</script>
<script>if(window.mw){
mw.config.set({"wgBackendResponseTime":615});
}</script>
	</body>

<!-- Mirrored from wiki.qt.io/index.php?title=Basic_Programming/cs&oldid=17516 by HTTrack Website Copier/3.x [XR&CO'2013], Thu, 05 Nov 2015 10:55:00 GMT -->
</html>
