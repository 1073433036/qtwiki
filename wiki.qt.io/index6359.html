<!DOCTYPE html>
<html lang="en" dir="ltr" class="client-nojs">

<!-- Mirrored from wiki.qt.io/index.php?title=SUBDIRS_-_handling_dependencies&action=edit by HTTrack Website Copier/3.x [XR&CO'2013], Thu, 05 Nov 2015 12:05:31 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<meta charset="UTF-8" />
<title>View source for SUBDIRS - handling dependencies - Qt Wiki</title>
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />
<meta name="generator" content="MediaWiki 1.23.3" />
<meta name="robots" content="noindex,nofollow" />
<link rel="shortcut icon" href="http://wiki.qt.io/favicon.ico" />
<link rel="search" type="application/opensearchdescription+xml" href="http://wiki.qt.io/opensearch_desc.php" title="Qt Wiki (en)" />
<link rel="EditURI" type="application/rsd+xml" href="http://wiki.qt.io/api.php?action=rsd" />
<link rel="alternate" type="application/atom+xml" title="Qt Wiki Atom feed" href="http://wiki.qt.io/index.php?title=Special:RecentChanges&amp;feed=atom" />
<link rel="stylesheet" href="http://wiki.qt.io/load.php?debug=false&amp;lang=en&amp;modules=mediawiki.legacy.commonPrint%2Cshared%7Cmediawiki.skinning.interface%7Cmediawiki.ui.button%7Cskins.vector.styles&amp;only=styles&amp;skin=vector&amp;*" />
<meta name="ResourceLoaderDynamicStyles" content="" />
<link rel="stylesheet" href="http://wiki.qt.io/load.php?debug=false&amp;lang=en&amp;modules=site&amp;only=styles&amp;skin=vector&amp;*" />
<style>a:lang(ar),a:lang(kk-arab),a:lang(mzn),a:lang(ps),a:lang(ur){text-decoration:none}
/* cache key: qtio_wiki:resourceloader:filter:minify-css:7:e91d7bc946738c8892a88ad5616a59ba */</style>
<script src="http://wiki.qt.io/load.php?debug=false&amp;lang=en&amp;modules=startup&amp;only=scripts&amp;skin=vector&amp;*"></script>
<script>if(window.mw){
mw.config.set({"wgCanonicalNamespace":"","wgCanonicalSpecialPageName":false,"wgNamespaceNumber":0,"wgPageName":"SUBDIRS_-_handling_dependencies","wgTitle":"SUBDIRS - handling dependencies","wgCurRevisionId":19360,"wgRevisionId":0,"wgArticleId":3833,"wgIsArticle":false,"wgIsRedirect":false,"wgAction":"edit","wgUserName":null,"wgUserGroups":["*"],"wgCategories":[],"wgBreakFrames":true,"wgPageContentLanguage":"en","wgPageContentModel":"wikitext","wgSeparatorTransformTable":["",""],"wgDigitTransformTable":["",""],"wgDefaultDateFormat":"dmy","wgMonthNames":["","January","February","March","April","May","June","July","August","September","October","November","December"],"wgMonthNamesShort":["","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"wgRelevantPageName":"SUBDIRS_-_handling_dependencies","wgIsProbablyEditable":false,"wgRestrictionEdit":[],"wgRestrictionMove":[],"wgWikiEditorEnabledModules":{"toolbar":true,"dialogs":true,"hidesig":true,"preview":true,"previewDialog":false,"publish":true}});
}</script><script>if(window.mw){
mw.loader.implement("user.options",function($,jQuery){mw.user.options.set({"ccmeonemails":0,"cols":80,"date":"default","diffonly":0,"disablemail":0,"editfont":"default","editondblclick":0,"editsectiononrightclick":0,"enotifminoredits":0,"enotifrevealaddr":0,"enotifusertalkpages":1,"enotifwatchlistpages":1,"extendwatchlist":0,"fancysig":0,"forceeditsummary":0,"gender":"unknown","hideminor":0,"hidepatrolled":0,"imagesize":2,"math":1,"minordefault":0,"newpageshidepatrolled":0,"nickname":"","norollbackdiff":0,"numberheadings":0,"previewonfirst":0,"previewontop":1,"rcdays":7,"rclimit":50,"rows":25,"showhiddencats":0,"shownumberswatching":1,"showtoolbar":1,"skin":"vector","stubthreshold":0,"thumbsize":2,"underline":2,"uselivepreview":0,"usenewrc":0,"watchcreations":1,"watchdefault":1,"watchdeletion":0,"watchlistdays":3,"watchlisthideanons":0,"watchlisthidebots":0,"watchlisthideliu":0,"watchlisthideminor":0,"watchlisthideown":0,"watchlisthidepatrolled":0,"watchmoves":0,"wllimit":250,
"useeditwarning":1,"prefershttps":1,"usebetatoolbar":1,"usebetatoolbar-cgd":1,"wikieditor-preview":1,"wikieditor-publish":1,"language":"en","variant-gan":"gan","variant-iu":"iu","variant-kk":"kk","variant-ku":"ku","variant-shi":"shi","variant-sr":"sr","variant-tg":"tg","variant-uz":"uz","variant-zh":"zh","searchNs0":true,"searchNs1":false,"searchNs2":false,"searchNs3":false,"searchNs4":false,"searchNs5":false,"searchNs6":false,"searchNs7":false,"searchNs8":false,"searchNs9":false,"searchNs10":false,"searchNs11":false,"searchNs12":false,"searchNs13":false,"searchNs14":false,"searchNs15":false,"searchNs500":false,"searchNs501":false,"searchNs700":false,"searchNs701":false,"variant":"en"});},{},{});mw.loader.implement("user.tokens",function($,jQuery){mw.user.tokens.set({"editToken":"+\\","patrolToken":false,"watchToken":false});},{},{});
/* cache key: qtio_wiki:resourceloader:filter:minify-js:7:9743cb8b8019d46de5946bfe6dfa04d7 */
}</script>
<script>if(window.mw){
mw.loader.load(["mediawiki.page.startup","mediawiki.legacy.wikibits","mediawiki.legacy.ajax","skins.vector.js"]);
}</script>
<!--[if lt IE 7]><style type="text/css">body{behavior:url("/skins/vector/csshover.min.htc")}</style><![endif]--></head>
<body class="mediawiki ltr sitedir-ltr ns-0 ns-subject page-SUBDIRS_-_handling_dependencies skin-vector action-edit vector-animateLayout">
		<div id="mw-page-base" class="noprint"></div>
		<div id="mw-head-base" class="noprint"></div>
		<div id="content" class="mw-body" role="main">
			<a id="top"></a>
			<div id="mw-js-message" style="display:none;"></div>
						<h1 id="firstHeading" class="firstHeading" lang="en"><span dir="auto">View source for SUBDIRS - handling dependencies</span></h1>
						<div id="bodyContent">
								<div id="contentSub">← <a href="http://wiki.qt.io/SUBDIRS_-_handling_dependencies" title="SUBDIRS - handling dependencies">SUBDIRS - handling dependencies</a></div>
												<div id="jump-to-nav" class="mw-jump">
					Jump to:					<a href="#mw-navigation">navigation</a>, 					<a href="#p-search">search</a>
				</div>
				<div id="mw-content-text"><p>You do not have permission to edit this page, for the following reason:
</p>
<div class="permissions-errors">
<p>The action you have requested is limited to users in one of the groups: <a href="http://wiki.qt.io/index.php?title=Qt_Wiki:Users&amp;action=edit&amp;redlink=1" class="new" title="Qt Wiki:Users (page does not exist)">Users</a>, KnowledgeBase, QtWS.
</p>
</div>
<hr />
<p>You can view and copy the source of this page:
</p><textarea readonly="" accesskey="," id="wpTextbox1" cols="80" rows="25" style="" lang="en" dir="ltr" name="wpTextbox1">[[Category:Tools::qmake]]
== Introduction ==

It is common for larger software projects to separate its components into different topics. There might be components the are relevant to the GUI of a software, other might be in the topic of handling geometrical processing, others are in the topic of generating a report.

Typically the software components belonging to a topic are combined into a software library ([http://en.wikipedia.org/wiki/Library_%28computing%29 Wikipedia]). In Windows these libraries are often found as .lib or .dll files; under Linux there are .a and .so files; under MacOS X they are called .a or .dylib files.

Finally these libraries are linked to an executable application.

The following text uses a small example, consisting of an application: app and two libraries: lib and lib2.
The application app uses features of the libraries lib and lib2 while the libraries are in no direct relation.
So, to have a running application the toolchain must create the lib.lib and lib2.lib files and finally create the app.exe by linking the lib.lib and lib2.lib to the object files of the app components. (The following Text uses the Windows file name notations of the objects)

When the software project is in an early design and implementation phase, the libraries might change as often as the application using the libraries. In the Qt domain, each of the three topics: lib, lib2 and app will be handled bye one project each. Typically there will be three folders: lib, lib2 and app, each containing a specific .pro file, describing how to handle each project (which source files, compile parameters, ...). The profiles typically will be named after the folders they live in: lib.pro, lib2.pro and app.pro. For this example all three projects will live in one folder: src.

On the file system this can be seen as following hierarchy:
 &lt;nowiki>
 /src
 |--- app
 |    |--- app.pro
 |    `--- ... (source files of app)
 |--- lib
 |    |--- lib.pro
 |    `--- ... (source files of lib)
 `--- lib2
      |--- lib2.pro
      `--- ... (source files of lib2)
 &lt;/nowiki>

Each of this projects could for example be edited separately in three Microsoft Visual Studio 2010 IDEs (MSVS2010) or handled as three separate projects in one QtCreator. But this handling of the projects would mean to compile each by hand separately.
It gets tedious when taking into account the dependencies between the three projects: the libs must be compiled before the app can be created!

== template: subdirs ==

To handle this relation automatically qmake has a template type: subdirs ([http://doc.qt.io/qt-5/qmake-variable-reference.html#template template]). 

The basic idea of this template type is, to list all projects that belong to a kind of meta project.
A new .pro file is created for that meta project, that simply consists of the qmake system variable [http://doc.qt.io/qt-5/qmake-variable-reference.html#subdirs SUBDIRS]. This variable is filled with the names of the project folders by giving the
relative path to where the meta .pro file lies. In the following text this meta profile is names subdirs.pro.
For a better overview in the file hierarchy a new parent folder is introduced, named after the software project that is created:
FooApp.

 &lt;nowiki>
 /FooApp
 |--- subdirs.pro
 `--- src
      |
      |--- app
      |    |--- app.pro
      |    `--- ... (source files of app)
      |--- lib
      |    |--- lib.pro
      |    `--- ... (source files of lib)
      `--- lib2
           |--- lib2.pro
           `--- ... (source files of lib2)
 &lt;/nowiki>
The meta profile subdirs.pro is on the same level as the src folder.

The content of the subdirs.pro is
 &lt;nowiki>
 template = subdirs

 SUBDIRS = \
           src/app \   # relative paths
           src/lib \
           src/lib2
 &lt;/nowiki>

The subdirs.pro file can be opened by QtCreator. In QtCreator there will be just one project with child elements, the sub-project. The advantage is now that when compiling this meta project the sub-projects are compiled automatically. Asking for a qmake run within QtCreator on this meta project will also recurse into the sub-projects calling qmake for each.

To make this meta project available for MSVC2010, qmake must be called on the command line in the folder FooApp:
 qmake -tp vc -r

This will generate a solution file with the name subdirs.sln. When opening this file in MSVC2010 a solution will be opened that contain the three project: app, lib, and lib2. A compile on the solution will call compile for each of the contained projects.

'''Attention:''' The order in with the subproject are compiled is '''not''' defined by the SUBDIRS content. And this could lead to a wrong processing order. So, the app project could not be build if it is processed first; it would miss the libraries lib and lib2.
One could assume that the build order is given by the order of the entities in the SUBDIRS variable (so example given above would be wrong). But many modern compile tools offer parallel compilation. If the order of the entity would be forcing the build order, then parallel compilation on the projects level would not be possible. Per default the sub-projects are compiled in any order the used build-systems logic prefers.

=== Defining Project Dependencies: .depends attributes ===

'''Attention Visual Studio''' This method is very fragile implemented in qmake when generating the Windows Visual Studio files (.sln and .vcxproj).
Qt 4.8.x does not support it at all and Qt 5.4.1 must have special setting in the sub projects pro files.
A bug was filled in https://bugreports.qt.io/browse/QTBUG-45706.

To support parallel processing of the projects on modern computers, an additional information must be given: Which project must be finished before another project can be processed.

In the running example, we have noted that app can only be build, when lib and lib2 are build.

By telling the dependency explicitly in the meta project file, qmake can build processing instructions that allow a high degree of parallelism.

 &lt;nowiki>
 template = subdirs

 SUBDIRS = \
           lib2 \   # sub-project names
           lib  \
           app

 # where to find the sub projects - give the folders
 lib2.subdir = src/lib2
 lib.subdir  = src/lib
 app.subdir  = src/app

 # what subproject depends on others
 app.depends = lib lib2
 &lt;/nowiki>

The important addition to the file is the line &lt;tt>app.depends = lib lib2&lt;/tt>. Setting the .depends attribute of the project app tells qmake that app can only be build if lib and lib2 is processed.

This allows qmake to build processing instructions that can be executed in a high degree of parallelism. For example lib and lib2 can be build in parallel, while app is hold back until lib and lib2 processing is finished.

In addition there is an implicit introduction of projects names. In SUBDIRS the project names are given (not the path anymore). The path to the project directory is set below by setting the .subdir attribute to the relative path where the project folder is located.

=== Defining a processing sequence: CONFIG += ordered ===

'''Attention Visual Studio''': This feature is not supported under Qt 4.8.x ([http://doc.qt.io/qt-4.8/qmake-variable-reference.html#ordered-targets-and-visual-studio-solution-files Qt Docs 4.8]). Instead an automatic dependency detection scheme is used in the Microsoft Visual Studio file generation (.sln and .vcxproj). In the Qt5 documentation, the section describing the automatism is deleted! A small test showed that the ordered otption as show here does still not work for Qt 5.4.1.
A bug report was filled in https://bugreports.qt.io/browse/QTBUG-45706.

With this option the processing of the sub-project can be set to follow the order in which they are listed in the SUBDIRS variable.
 &lt;nowiki>
 template = subdirs

 SUBDIRS = \
           src/lib2\   
           src/lib \
           src/app

 # build the project sequentially as listed in SUBDIRS !
 CONFIG += ordered
 &lt;/nowiki>
By having the listing order: src/lib2, src/lib, src/app the build tool will follow that order and build the project one at a time. 
Due to processing in this strict project order the build dependencies are implicitly fulfilled, as long as the listing order is chosen right.

But the processing "one at a time" eliminates the possibility to process independent projects in parallel. However each projects might process in parallel in its local context - e.g. the .cpp files within lib2 might get compiled in parallel.

=== Background on Windows Build Systems ===
There are different ways to process a project (or meta project) under windows.

==== Makefiles ====
There are command line tools to compile project with the help of a compile rule file: a Makefile ([http://en.wikipedia.org/wiki/Makefile wikipedia]).

For a meta-project, qmake must be called with the recursive option in the FooApp folder, the one with the subdirs.pro file:
 qmake -r
This will generate a Makefile in the same directory. In addition qmake will process all the subdirs given in the SUBDIRS variable and create Makefiles in each of the sub-project folders, containing rules to create the sub-project.
 &lt;nowiki>
 /FooApp
 |--- Makefile
 |--- subdirs.pro
 `--- src
      |
      |--- app
      |    |--- app.pro
      |    |--- Makefile
      |    |--- Makefile.Debug
      |    |--- Makefile.Release
      |    `--- ... (source files of app)
      |--- lib
      |    |--- lib.pro
      |    |--- Makefile
      |    |--- Makefile.Debug
      |    |--- Makefile.Release
      |    `--- ... (source files of lib)
      `--- lib2
           |--- lib2.pro
           |--- Makefile
           |--- Makefile.Debug
           |--- Makefile.Release
           `--- ... (source files of lib2)
 &lt;/nowiki>

===== nmake =====
The windows nmake tool reads a Windows Makefile that was generated by qmake. nmake will understand the rules in the Makefile and will call the compiler and linker to build the libraries and application.

Calling nmake in the meta project folder FooApp via
 nmake
will find the Makefile and will process it. As this Makefile is one for a meta-project, it contains rules to process the Makefiles of the sub-project.

nmake has no feature to call compile or link in parallel. An option "-j &lt;n>" as known with Unix make or gnumake does not exist. So nmake start project after project and in each project compiles file after file. Probably the listing order of the sub-projects within the SUBDIRS variable will be used. But this is nothing to rely on! How to determine the processing order sufficiently is shown in the chapters above.

===== jom =====
The missing parallel execution feature of nmake is inefficient on modern computer architectures. With CPUs having many kernels for parallelism and fast storage units, a modern computer is bored by using nmake and project compilation takes longer as it could take. This lead to the creation of a new make tool: [[Jom]]. jom is basically an nmake clone extended with the '/J &lt;n>' option to compile in parallel. To compile a meta projects Makefile the call has to be
 jom
in the FooApp folder. jom will recurse automatically in the sub-project folders and use the Makefile of the sub-folders. But all in a parallel fashion.
To see the dependency graph that jom processes, the command
 jom /DUMPGRAPH
can be called.
For the insufficient and wrongly ordered example
 &lt;nowiki>
 template = subdirs

 SUBDIRS = \
           src/app \   # relative paths
           src/lib \
           src/lib2
 &lt;/nowiki>
the output of jom is
 &lt;nowiki>
first
 make_first
  sub-src-app-make_first
   FORCE
  sub-src-lib-make_first
   FORCE
  sub-src-lib2-make_first
   FORCE
  FORCE
 &lt;/nowiki>
All three sub-src-xxx-make_first are on the same level and they have no dependency under it (aside from FORCE).
So ''all'' is build in parallel if the number of kernels is high enough. 
The parallel processing might result in a build error due to race conditions: The linker of the app project could be started even though the necessary libraries are not build already!

For an example with dependency given explicitly:
 &lt;nowiki>
 template = subdirs

 SUBDIRS = \
           lib2 \   # sub-project names
           lib  \
           app

 # where to find the sub projects - give the folders
 lib2.subdir = src/lib2
 lib.subdir  = src/lib
 app.subdir  = src/app

 # what subproject depends on others
 app.depends = lib lib2
 &lt;/nowiki>
jom output for the graph:
 &lt;nowiki>
first
 make_first
  sub-src-lib-make_first
   FORCE
  sub-src-lib2-make_first
   FORCE
  sub-src-app-make_first
   sub-src-lib-make_first
    FORCE
   sub-src-lib2-make_first
    FORCE
   FORCE
  FORCE
 &lt;/nowiki>
Here sub-src-app-make_first depends on sub-src-lib-make_first and sub-src-lib2-make_first. So lib and lib2 must first be build before app can be processed. Here lib and lib2 can even be processed in parallel, they have no dependencies.

Finally for the sequential case
 &lt;nowiki>
 template = subdirs

 SUBDIRS = \
           src/lib2\   
           src/lib \
           src/app

 # build the project sequentially as listed in SUBDIRS !
 CONFIG += ordered
 &lt;/nowiki>
jom's output for the graph is:
 &lt;nowiki>
first
 make_first
  sub-src-lib2-make_first-ordered
   FORCE
  sub-src-lib-make_first-ordered
   sub-src-lib2-make_first-ordered
    FORCE
   FORCE
  sub-src-app-make_first-ordered
   sub-src-lib-make_first-ordered
    sub-src-lib2-make_first-ordered
     FORCE
    FORCE
   FORCE
  FORCE
 &lt;/nowiki>
So app can be build if lib was build and lib can be build if lib2 was build: first lib2, then lib, then app. No parallelism on the project level is possible.

With
 jom /J 10
ten parallel compiles will be started if enough independent compiles are found.

==== .sln files / .vcxproj files ====

The standard Microsoft Visual Studio toolchain does not use Makefiles. The toolchain needs a solution file (.sln) and one ore more project files (.vcxproj). The solution is again a kind of meta project collecting the project a solution consists of.
These files can be processed by the Microsoft Visual Studio C++ IDE (MSVC2010) or with the msbuild tool as a command line tool.

qmake can also generate these files, to make it possible to use this IDE. To have this generated
 &lt;nowiki>
 gmake -tp vc -r
 &lt;/nowiki>
must be called in the FooApp folder containing the meta project subdirs.pro project file. gmake will create a .sln file in the same FooApp folder. qmake will also go into the SUBDIRS project folders and generate .vcxproj files that are refered to in the .sln file. In MSVS2010 IDE the .sln file can be opened a a listing of subdir projects will be listed. For the running example the file would be names: subdirs.sln, app.vcxproj, lib.vcxproj, and lib2.vcxproj.

With the explicit dependency giving subdir.pro file
 &lt;nowiki>
 template = subdirs

 SUBDIRS = \
           lib2 \   # sub-project names
           lib  \
           app

 # where to find the sub projects - give the folders
 lib2.subdir = src/lib2
 lib.subdir  = src/lib
 app.subdir  = src/app

 # what subproject depends on others
 app.depends = lib lib2
 &lt;/nowiki>
solution and project files will be generated that reflect these dependencies.

===== Microsoft Visual Studio IDE =====

Within the IDE the solution properties contain a section "Common Properties" and in this a subsection "Project Dependencies". This subsection has a combo box to choose a project. All project this chosen on depends on are checked in the listing below.

[[File:MSVC2010 dependency property1.PNG|frame|center|app depends on lib and lib2]]

This dependency constellation can also be checked in the .sln file.
 &lt;nowiki>
Microsoft Visual Studio Solution File, Format Version 11.00
# Visual Studio 2010
Project("{8BC9CEB8-8B4A-11D0-8D11-00A0C91BC942}") = "lib", "C:/Users/Michael/QtProgramme/subdirs_test/src/lib\lib.vcxproj", "{BBD7705B-EE58-39F5-9DA4-17D53DE9F205}"
EndProject
Project("{8BC9CEB8-8B4A-11D0-8D11-00A0C91BC942}") = "lib2", "C:/Users/Michael/QtProgramme/subdirs_test/src/lib2\lib2.vcxproj", "{E2C38A45-30F3-3D3D-9D94-91EB9244EAF6}"
EndProject
Project("{8BC9CEB8-8B4A-11D0-8D11-00A0C91BC942}") = "app", "C:/Users/Michael/QtProgramme/subdirs_test/src/app\app.vcxproj", "{124A643E-E033-36E6-AA41-AD3E268A86DE}"
	ProjectSection(ProjectDependencies) = postProject
		{BBD7705B-EE58-39F5-9DA4-17D53DE9F205} = {BBD7705B-EE58-39F5-9DA4-17D53DE9F205}
		{E2C38A45-30F3-3D3D-9D94-91EB9244EAF6} = {E2C38A45-30F3-3D3D-9D94-91EB9244EAF6}
	EndProjectSection
EndProject
Global
	GlobalSection(SolutionConfigurationPlatforms) = preSolution
		Debug|Win32 = Debug|Win32
		Release|Win32 = Release|Win32
	EndGlobalSection
	GlobalSection(ProjectConfigurationPlatforms) = postSolution
		{BBD7705B-EE58-39F5-9DA4-17D53DE9F205}.Debug|Win32.ActiveCfg = Debug|Win32
		{BBD7705B-EE58-39F5-9DA4-17D53DE9F205}.Debug|Win32.Build.0 = Debug|Win32
		{BBD7705B-EE58-39F5-9DA4-17D53DE9F205}.Release|Win32.ActiveCfg = Release|Win32
		{BBD7705B-EE58-39F5-9DA4-17D53DE9F205}.Release|Win32.Build.0 = Release|Win32
		{E2C38A45-30F3-3D3D-9D94-91EB9244EAF6}.Debug|Win32.ActiveCfg = Debug|Win32
		{E2C38A45-30F3-3D3D-9D94-91EB9244EAF6}.Debug|Win32.Build.0 = Debug|Win32
		{E2C38A45-30F3-3D3D-9D94-91EB9244EAF6}.Release|Win32.ActiveCfg = Release|Win32
		{E2C38A45-30F3-3D3D-9D94-91EB9244EAF6}.Release|Win32.Build.0 = Release|Win32
		{124A643E-E033-36E6-AA41-AD3E268A86DE}.Debug|Win32.ActiveCfg = Debug|Win32
		{124A643E-E033-36E6-AA41-AD3E268A86DE}.Debug|Win32.Build.0 = Debug|Win32
		{124A643E-E033-36E6-AA41-AD3E268A86DE}.Release|Win32.ActiveCfg = Release|Win32
		{124A643E-E033-36E6-AA41-AD3E268A86DE}.Release|Win32.Build.0 = Release|Win32
	EndGlobalSection
	GlobalSection(ExtensibilityGlobals) = postSolution
	EndGlobalSection
	GlobalSection(ExtensibilityAddIns) = postSolution
	EndGlobalSection
EndGlobal
&lt;/nowiki>
In the project app there is a section to describe the dependency.
 &lt;nowiki>
ProjectSection(ProjectDependencies) = postProject
		{BBD7705B-EE58-39F5-9DA4-17D53DE9F205} = {BBD7705B-EE58-39F5-9DA4-17D53DE9F205}
		{E2C38A45-30F3-3D3D-9D94-91EB9244EAF6} = {E2C38A45-30F3-3D3D-9D94-91EB9244EAF6}
	EndProjectSection
&lt;/nowiki>

Such a solution can be build from within the IDE. Within the IDE the projects are processed in parallel, respecting the dependencies.

In the build output window there will be something like
 &lt;nowiki>
 1>------ Rebuild All started: Project: lib2, Configuration: Debug Win32 ------
 2>------ Rebuild All started: Project: lib, Configuration: Debug Win32 ------
 1>  lib2.cpp
 2>  lib.cpp
 1>     Creating library debug\\lib2d.lib and object debug\\lib2d.exp
 2>     Creating library debug\\libd.lib and object debug\\libd.exp
 1>  lib2.vcxproj -> C:\Users\Michael\QtProgramme\subdirs_test\src\lib2\debug\lib2d.dll
 2>  lib.vcxproj -> C:\Users\Michael\QtProgramme\subdirs_test\src\lib\debug\libd.dll
 3>------ Rebuild All started: Project: app, Configuration: Debug Win32 ------
 3>  main.cpp
 3>  app.vcxproj -> C:\Users\Michael\QtProgramme\subdirs_test\src\app\debug\app.exe
 &lt;/nowiki>
The parallelism in processing lib and lib2 can be seen very well. After lib and lib2 finishes processing of app starts.

===== msbuild =====

From the command line the tool msbuild can be used to process the solution. In the FooApp folder, where the .sln file was generated, a call
 &lt;nowiki>
 msbuild
&lt;/nowiki>
will process the solution file.

By default msbuild does not process in any parallel fashion. But similarly to joms "/J &lt;n>" option msbuild has the "/m:&lt;n>" option. When calling
 &lt;nowiki>
 msbuild /m:4
&lt;/nowiki>
maximal four cores of the computer will be used to parallelize the processing of the solution.
An output from such a call might look like this for the running example
 &lt;nowiki>
Microsoft (R)-Buildmodul, Version 4.0.30319.18408
[Microsoft .NET Framework, Version 4.0.30319.18408]
Copyright (C) Microsoft Corporation 2007. Alle Rechte vorbehalten.

Der Buildvorgang wurde am 19.04.2015 21:37:32 gestartet.
     1>Projekt "c:\Users\Michael\QtProgramme\subdirs_test\subdirs_test.sln" auf Knoten "1" (Standardziele).
     1>ValidateSolutionConfiguration:
         Die Projektmappenkonfiguration "Debug|Win32" wird erstellt.
     1>Das Projekt "c:\Users\Michael\QtProgramme\subdirs_test\subdirs_test.sln" (1) erstellt "c:\Users\Michael\QtProgramme\subdirs_test\src\lib2\lib2.vcxproj" (3) auf Knoten "2" (Standardziele).
     3>InitializeBuildStatus:
         "debug\lib2.unsuccessfulbuild" wird erstellt, da "AlwaysCreate" angegeben wurde.
       ClCompile:
         c:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\bin\CL.exe /c /I. /IC:\Qt_online\5.4\msvc2010_opengl\include /IC:\Qt_online\5.4\msvc2010_opengl\include\QtCore /Idebug /I"C:\Qt_online\5.4\msvc2010_opengl\mkspecs\win32-msvc2010" /Zi /nologo /W3 /WX- /Od /Oy- /D _WINDOWS /D UNICODE /D WIN32 /D LIB2_LIBRARY /D QT_CORE_LIB /D _WINDLL /Gm- /EHsc /MDd /GS /fp:precise /Zc:wchar_t /Zc:forScope /GR /Fo"debug\\" /Fd"debug\vc100.pdb" /Gd /TP /analyze- /errorReport:queue lib2.cpp -Zm200 -w34100 -w34189 
     1>Das Projekt "c:\Users\Michael\QtProgramme\subdirs_test\subdirs_test.sln" (1) erstellt "c:\Users\Michael\QtProgramme\subdirs_test\src\lib\lib.vcxproj" (2) auf Knoten "1" (Standardziele).
     2>InitializeBuildStatus:
         "debug\lib.unsuccessfulbuild" wird erstellt, da "AlwaysCreate" angegeben wurde.
     3>ClCompile:
         lib2.cpp
     2>ClCompile:
         c:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\bin\CL.exe /c /I. /IC:\Qt_online\5.4\msvc2010_opengl\include /IC:\Qt_online\5.4\msvc2010_opengl\include\QtCore /Idebug /I"C:\Qt_online\5.4\msvc2010_opengl\mkspecs\win32-msvc2010" /Zi /nologo /W3 /WX- /Od /Oy- /D _WINDOWS /D UNICODE /D WIN32 /D LIB_LIBRARY /D QT_CORE_LIB /D _WINDLL /Gm- /EHsc /MDd /GS /fp:precise /Zc:wchar_t /Zc:forScope /GR /Fo"debug\\" /Fd"debug\vc100.pdb" /Gd /TP /analyze- /errorReport:queue lib.cpp -Zm200 -w34100 -w34189 
         lib.cpp
     3>Link:
         c:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\bin\link.exe /ERRORREPORT:QUEUE /OUT:"debug\\lib2d.dll" /NOLOGO /LIBPATH:C:\Qt_online\5.4\msvc2010_opengl\lib C:\Qt_online\5.4\msvc2010_opengl\lib\Qt5Cored.lib kernel32.lib user32.lib gdi32.lib winspool.lib comdlg32.lib advapi32.lib shell32.lib ole32.lib oleaut32.lib uuid.lib odbc32.lib odbccp32.lib /MANIFEST /ManifestFile:"debug\lib2d.dll.intermediate.manifest" /MANIFESTUAC:"level='asInvoker' uiAccess='false'" /DEBUG /PDB:"c:\Users\Michael\QtProgramme\subdirs_test\src\lib2\debug\lib2d.pdb" /SUBSYSTEM:WINDOWS /TLBID:1 /DYNAMICBASE /NXCOMPAT /MACHINE:X86 /DLL debug\lib2.obj
            Creating library debug\\lib2d.lib and object debug\\lib2d.exp
         lib2.vcxproj -> c:\Users\Michael\QtProgramme\subdirs_test\src\lib2\debug\lib2d.dll
       Manifest:
         C:\Program Files (x86)\Microsoft SDKs\Windows\v7.0A\bin\mt.exe /nologo /verbose /outputresource:"debug\\lib2d.dll;#2" /manifest debug\lib2d.dll.intermediate.manifest
     2>Link:
         c:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\bin\link.exe /ERRORREPORT:QUEUE /OUT:"debug\\libd.dll" /NOLOGO /LIBPATH:C:\Qt_online\5.4\msvc2010_opengl\lib C:\Qt_online\5.4\msvc2010_opengl\lib\Qt5Cored.lib kernel32.lib user32.lib gdi32.lib winspool.lib comdlg32.lib advapi32.lib shell32.lib ole32.lib oleaut32.lib uuid.lib odbc32.lib odbccp32.lib /MANIFEST /ManifestFile:"debug\libd.dll.intermediate.manifest" /MANIFESTUAC:"level='asInvoker' uiAccess='false'" /DEBUG /PDB:"c:\Users\Michael\QtProgramme\subdirs_test\src\lib\debug\libd.pdb" /SUBSYSTEM:WINDOWS /TLBID:1 /DYNAMICBASE /NXCOMPAT /MACHINE:X86 /DLL debug\lib.obj
     3>FinalizeBuildStatus:
         Die Datei "debug\lib2.unsuccessfulbuild" wird gel"scht.
         Aktualisieren des Timestamps von "debug\lib2.lastbuildstate".
     3>Die Erstellung von Projekt "c:\Users\Michael\QtProgramme\subdirs_test\src\lib2\lib2.vcxproj" ist abgeschlossen (Standardziele).
     2>Link:
            Creating library debug\\libd.lib and object debug\\libd.exp
         lib.vcxproj -> c:\Users\Michael\QtProgramme\subdirs_test\src\lib\debug\libd.dll
       Manifest:
         C:\Program Files (x86)\Microsoft SDKs\Windows\v7.0A\bin\mt.exe /nologo /verbose /outputresource:"debug\\libd.dll;#2" /manifest debug\libd.dll.intermediate.manifest
       FinalizeBuildStatus:
         Die Datei "debug\lib.unsuccessfulbuild" wird gel"scht.
         Aktualisieren des Timestamps von "debug\lib.lastbuildstate".
     2>Die Erstellung von Projekt "c:\Users\Michael\QtProgramme\subdirs_test\src\lib\lib.vcxproj" ist abgeschlossen (Standardziele).
     1>Das Projekt "c:\Users\Michael\QtProgramme\subdirs_test\subdirs_test.sln" (1) erstellt "c:\Users\Michael\QtProgramme\subdirs_test\src\app\app.vcxproj.metaproj" (4) auf Knoten "1" (Standardziele).
     4>Das Projekt "c:\Users\Michael\QtProgramme\subdirs_test\src\app\app.vcxproj.metaproj" (4) erstellt "c:\Users\Michael\QtProgramme\subdirs_test\src\app\app.vcxproj" (5) auf Knoten "2" (Standardziele).
     5>InitializeBuildStatus:
         "debug\app.unsuccessfulbuild" wird erstellt, da "AlwaysCreate" angegeben wurde.
       ClCompile:
         c:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\bin\CL.exe /c /I. /I..\lib /IC:\Qt_online\5.4\msvc2010_opengl\include /IC:\Qt_online\5.4\msvc2010_opengl\include\QtCore /Idebug /I"C:\Qt_online\5.4\msvc2010_opengl\mkspecs\win32-msvc2010" /Zi /nologo /W3 /WX- /Od /Oy- /D _CONSOLE /D UNICODE /D WIN32 /D QT_CORE_LIB /Gm- /EHsc /MDd /GS /fp:precise /Zc:wchar_t /Zc:forScope /GR /Fo"debug\\" /Fd"debug\vc100.pdb" /Gd /TP /analyze- /errorReport:queue main.cpp -Zm200 -w34100 -w34189 
         main.cpp
       Link:
         c:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\bin\link.exe /ERRORREPORT:QUEUE /OUT:"debug\\app.exe" /NOLOGO /LIBPATH:C:\Users\Michael\QtProgramme\subdirs_test\src\app\..\lib\debug\ /LIBPATH:C:\Users\Michael\QtProgramme\subdirs_test\src\app\..\lib2\debug\ /LIBPATH:C:\Qt_online\5.4\msvc2010_opengl\lib C:\Users\Michael\QtProgramme\subdirs_test\src\app\..\lib\debug\\libd.lib C:\Users\Michael\QtProgramme\subdirs_test\src\app\..\lib2\debug\\lib2d.lib C:\Qt_online\5.4\msvc2010_opengl\lib\Qt5Cored.lib kernel32.lib user32.lib gdi32.lib winspool.lib comdlg32.lib advapi32.lib shell32.lib ole32.lib oleaut32.lib uuid.lib odbc32.lib odbccp32.lib /MANIFEST /ManifestFile:"debug\app.exe.intermediate.manifest" /MANIFESTUAC:"level='asInvoker' uiAccess='false'" /DEBUG /PDB:"c:\Users\Michael\QtProgramme\subdirs_test\src\app\debug\app.pdb" /SUBSYSTEM:CONSOLE /TLBID:1 /DYNAMICBASE /NXCOMPAT /MACHINE:X86 debug\main.obj "/MANIFESTDEPENDENCY:type='win32' name='Microsoft.Windows.Common-Controls' version='6.0.0.0' publicKeyToken='6595b64144ccf1df' language='*' processorArchitecture='*'" 
         app.vcxproj -> c:\Users\Michael\QtProgramme\subdirs_test\src\app\debug\app.exe
       Manifest:
         C:\Program Files (x86)\Microsoft SDKs\Windows\v7.0A\bin\mt.exe /nologo /verbose /outputresource:"debug\\app.exe;#1" /manifest debug\app.exe.intermediate.manifest
       FinalizeBuildStatus:
         Die Datei "debug\app.unsuccessfulbuild" wird gel"scht.
         Aktualisieren des Timestamps von "debug\app.lastbuildstate".
     5>Die Erstellung von Projekt "c:\Users\Michael\QtProgramme\subdirs_test\src\app\app.vcxproj" ist abgeschlossen (Standardziele).
     4>Die Erstellung von Projekt "c:\Users\Michael\QtProgramme\subdirs_test\src\app\app.vcxproj.metaproj" ist abgeschlossen (Standardziele).
     1>Die Erstellung von Projekt "c:\Users\Michael\QtProgramme\subdirs_test\subdirs_test.sln" ist abgeschlossen (Standardziele).

Der Buildvorgang wurde erfolgreich ausgefhrt.
    0 Warnung(en)
    0 Fehler

Verstrichene Zeit 00:00:02.23
&lt;/nowiki>



msbuild has many [https://msdn.microsoft.com/en-us/library/ms164311%28v=vs.100%29.aspx command line options].
For example, to let msbuild construct the release version the command
 &lt;nowiki>
 msbuild /p:Configuration=Release
&lt;/nowiki>
must be called.


to be continued....

--[[User:Moellney|Moellney]] ([[User talk:Moellney|talk]]) 21:48, 20 April 2015 (UTC)
</textarea><div class="templatesUsed"></div><p id="mw-returnto">Return to <a href="http://wiki.qt.io/SUBDIRS_-_handling_dependencies" title="SUBDIRS - handling dependencies">SUBDIRS - handling dependencies</a>.</p>
</div>								<div class="printfooter">
				Retrieved from "<a href="http://wiki.qt.io/SUBDIRS_-_handling_dependencies">http://wiki.qt.io/SUBDIRS_-_handling_dependencies</a>"				</div>
												<div id='catlinks' class='catlinks catlinks-allhidden'></div>												<div class="visualClear"></div>
							</div>
		</div>
		<div id="mw-navigation">
			<h2>Navigation menu</h2>
			<div id="mw-head">
				<div id="p-personal" role="navigation" class="" aria-labelledby="p-personal-label">
	<h3 id="p-personal-label">Personal tools</h3>
	<ul>
<li id="pt-anonuserpage"><a href="http://wiki.qt.io/User:10.0.113.70" class="new" title="The user page for the IP address you are editing as [.]" accesskey=".">10.0.113.70</a></li><li id="pt-anontalk"><a href="http://wiki.qt.io/User_talk:10.0.113.70" class="new" title="Discussion about edits from this IP address [n]" accesskey="n">Talk for this IP address</a></li><li id="pt-login"><a href="http://wiki.qt.io/index.php?title=Special:QtLogin&amp;returnto=SUBDIRS+-+handling+dependencies" title="You are encouraged to log in; however, it is not mandatory [o]" accesskey="o">Sign in</a></li>	</ul>
</div>
				<div id="left-navigation">
					<div id="p-namespaces" role="navigation" class="vectorTabs" aria-labelledby="p-namespaces-label">
	<h3 id="p-namespaces-label">Namespaces</h3>
	<ul>
					<li  id="ca-nstab-main" class="selected"><span><a href="http://wiki.qt.io/SUBDIRS_-_handling_dependencies"  title="View the content page [c]" accesskey="c">Page</a></span></li>
					<li  id="ca-talk" class="new"><span><a href="http://wiki.qt.io/index.php?title=Talk:SUBDIRS_-_handling_dependencies&amp;action=edit&amp;redlink=1"  title="Discussion about the content page [t]" accesskey="t">Discussion</a></span></li>
			</ul>
</div>
<div id="p-variants" role="navigation" class="vectorMenu emptyPortlet" aria-labelledby="p-variants-label">
	<h3 id="mw-vector-current-variant">
		</h3>
	<h3 id="p-variants-label"><span>Variants</span><a href="#"></a></h3>
	<div class="menu">
		<ul>
					</ul>
	</div>
</div>
				</div>
				<div id="right-navigation">
					<div id="p-views" role="navigation" class="vectorTabs" aria-labelledby="p-views-label">
	<h3 id="p-views-label">Views</h3>
	<ul>
					<li id="ca-view"><span><a href="http://wiki.qt.io/SUBDIRS_-_handling_dependencies" >Read</a></span></li>
					<li id="ca-viewsource" class="selected"><span><a href="http://wiki.qt.io/index.php?title=SUBDIRS_-_handling_dependencies&amp;action=edit"  title="This page is protected.&#10;You can view its source [e]" accesskey="e">View source</a></span></li>
					<li id="ca-history" class="collapsible"><span><a href="http://wiki.qt.io/index.php?title=SUBDIRS_-_handling_dependencies&amp;action=history"  title="Past revisions of this page [h]" accesskey="h">View history</a></span></li>
			</ul>
</div>
<div id="p-cactions" role="navigation" class="vectorMenu emptyPortlet" aria-labelledby="p-cactions-label">
	<h3 id="p-cactions-label"><span>Actions</span><a href="#"></a></h3>
	<div class="menu">
		<ul>
					</ul>
	</div>
</div>
<div id="p-search" role="search">
	<h3><label for="searchInput">Search</label></h3>
	<form action="http://wiki.qt.io/index.php" id="searchform">
					<div id="simpleSearch">
					<input type="search" name="search" placeholder="Search" title="Search Qt Wiki [f]" accesskey="f" id="searchInput" /><input type="hidden" value="Special:Search" name="title" /><input type="submit" name="fulltext" value="Search" title="Search the pages for this text" id="mw-searchButton" class="searchButton mw-fallbackSearchButton" /><input type="submit" name="go" value="Go" title="Go to a page with this exact name if exists" id="searchButton" class="searchButton" />		</div>
	</form>
</div>
				</div>
			</div>
			<div id="mw-panel">
					<div id="p-logo" role="banner"><a style="background-image: url(http://wiki.qt.io/skins/common/images/wiki.png);" href="http://wiki.qt.io/Main_Page"  title="Visit the main page"></a></div>
				<div class="portal" role="navigation" id='p-navigation' aria-labelledby='p-navigation-label'>
	<h3 id='p-navigation-label'>Navigation</h3>
	<div class="body">
		<ul>
			<li id="n-mainpage-description"><a href="http://wiki.qt.io/Main_Page" title="Visit the main page [z]" accesskey="z">Main page</a></li>
			<li id="n-recentchanges"><a href="http://wiki.qt.io/Special:RecentChanges" title="A list of recent changes in the wiki [r]" accesskey="r">Recent changes</a></li>
			<li id="n-randompage"><a href="http://wiki.qt.io/Special:Random" title="Load a random page [x]" accesskey="x">Random page</a></li>
			<li id="n-help"><a href="https://www.mediawiki.org/wiki/Special:MyLanguage/Help:Contents" title="The place to find out">Help</a></li>
		</ul>
	</div>
</div>
<div class="portal" role="navigation" id='p-tb' aria-labelledby='p-tb-label'>
	<h3 id='p-tb-label'>Tools</h3>
	<div class="body">
		<ul>
			<li id="t-whatlinkshere"><a href="http://wiki.qt.io/Special:WhatLinksHere/SUBDIRS_-_handling_dependencies" title="A list of all wiki pages that link here [j]" accesskey="j">What links here</a></li>
			<li id="t-recentchangeslinked"><a href="http://wiki.qt.io/Special:RecentChangesLinked/SUBDIRS_-_handling_dependencies" title="Recent changes in pages linked from this page [k]" accesskey="k">Related changes</a></li>
			<li id="t-specialpages"><a href="http://wiki.qt.io/Special:SpecialPages" title="A list of all special pages [q]" accesskey="q">Special pages</a></li>
			<li id="t-info"><a href="http://wiki.qt.io/index.php?title=SUBDIRS_-_handling_dependencies&amp;action=info">Page information</a></li>
		</ul>
	</div>
</div>
			</div>
		</div>
		<div id="footer" role="contentinfo">
							<ul id="footer-places">
											<li id="footer-places-terms"><a href='https://developer.qtcloudservices.com/legal/terms'>Käyttöehdot</a></li>
									</ul>
										<ul id="footer-icons" class="noprint">
					<li id="footer-poweredbyico">
						<a href="http://www.mediawiki.org/"><img src="http://wiki.qt.io/skins/common/images/poweredby_mediawiki_88x31.png" alt="Powered by MediaWiki" width="88" height="31" /></a>
					</li>
				</ul>
						<div style="clear:both"></div>
		</div>
		<script>/*<![CDATA[*/window.jQuery && jQuery.ready();/*]]>*/</script><script>if(window.mw){
mw.loader.state({"site":"loading","user":"ready","user.groups":"ready"});
}</script>
<script>if(window.mw){
mw.loader.load(["mediawiki.action.edit.collapsibleFooter","mediawiki.user","mediawiki.hidpi","mediawiki.page.ready","mediawiki.searchSuggest","skins.vector.collapsibleNav"],null,true);
}</script>
<script src="http://wiki.qt.io/load.php?debug=false&amp;lang=en&amp;modules=site&amp;only=scripts&amp;skin=vector&amp;*"></script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','http://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-54043535-2', 'auto');
  ga('send', 'pageview');

</script>
<script>if(window.mw){
mw.config.set({"wgBackendResponseTime":884});
}</script>
	</body>

<!-- Mirrored from wiki.qt.io/index.php?title=SUBDIRS_-_handling_dependencies&action=edit by HTTrack Website Copier/3.x [XR&CO'2013], Thu, 05 Nov 2015 12:05:31 GMT -->
</html>
