<!DOCTYPE html>
<html lang="en" dir="ltr" class="client-nojs">

<!-- Mirrored from wiki.qt.io/index.php?title=DatabaseConnectionDialog/de&oldid=14133 by HTTrack Website Copier/3.x [XR&CO'2013], Thu, 05 Nov 2015 10:57:57 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<meta charset="UTF-8" />
<title>DatabaseConnectionDialog/de - Qt Wiki</title>
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />
<meta name="generator" content="MediaWiki 1.23.3" />
<meta name="robots" content="noindex,nofollow" />
<link rel="shortcut icon" href="http://wiki.qt.io/favicon.ico" />
<link rel="search" type="application/opensearchdescription+xml" href="http://wiki.qt.io/opensearch_desc.php" title="Qt Wiki (en)" />
<link rel="EditURI" type="application/rsd+xml" href="http://wiki.qt.io/api.php?action=rsd" />
<link rel="alternate" type="application/atom+xml" title="Qt Wiki Atom feed" href="http://wiki.qt.io/index.php?title=Special:RecentChanges&amp;feed=atom" />
<link rel="stylesheet" href="http://wiki.qt.io/load.php?debug=false&amp;lang=en&amp;modules=mediawiki.legacy.commonPrint%2Cshared%7Cmediawiki.skinning.interface%7Cmediawiki.ui.button%7Cskins.vector.styles&amp;only=styles&amp;skin=vector&amp;*" />
<meta name="ResourceLoaderDynamicStyles" content="" />
<link rel="stylesheet" href="http://wiki.qt.io/load.php?debug=false&amp;lang=en&amp;modules=site&amp;only=styles&amp;skin=vector&amp;*" />
<style>a:lang(ar),a:lang(kk-arab),a:lang(mzn),a:lang(ps),a:lang(ur){text-decoration:none}
/* cache key: qtio_wiki:resourceloader:filter:minify-css:7:e91d7bc946738c8892a88ad5616a59ba */</style>
<script src="http://wiki.qt.io/load.php?debug=false&amp;lang=en&amp;modules=startup&amp;only=scripts&amp;skin=vector&amp;*"></script>
<script>if(window.mw){
mw.config.set({"wgCanonicalNamespace":"","wgCanonicalSpecialPageName":false,"wgNamespaceNumber":0,"wgPageName":"DatabaseConnectionDialog/de","wgTitle":"DatabaseConnectionDialog/de","wgCurRevisionId":14133,"wgRevisionId":14133,"wgArticleId":3125,"wgIsArticle":true,"wgIsRedirect":false,"wgAction":"view","wgUserName":null,"wgUserGroups":["*"],"wgCategories":["Articles needing cleanup","HowTo","Snippets","German"],"wgBreakFrames":false,"wgPageContentLanguage":"en","wgPageContentModel":"wikitext","wgSeparatorTransformTable":["",""],"wgDigitTransformTable":["",""],"wgDefaultDateFormat":"dmy","wgMonthNames":["","January","February","March","April","May","June","July","August","September","October","November","December"],"wgMonthNamesShort":["","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"wgRelevantPageName":"DatabaseConnectionDialog/de","wgIsProbablyEditable":false,"wgRestrictionEdit":[],"wgRestrictionMove":[],"wgWikiEditorEnabledModules":{"toolbar":true,"dialogs":true,"hidesig":true,"preview":true,"previewDialog":false,"publish":true}});
}</script><script>if(window.mw){
mw.loader.implement("user.options",function($,jQuery){mw.user.options.set({"ccmeonemails":0,"cols":80,"date":"default","diffonly":0,"disablemail":0,"editfont":"default","editondblclick":0,"editsectiononrightclick":0,"enotifminoredits":0,"enotifrevealaddr":0,"enotifusertalkpages":1,"enotifwatchlistpages":1,"extendwatchlist":0,"fancysig":0,"forceeditsummary":0,"gender":"unknown","hideminor":0,"hidepatrolled":0,"imagesize":2,"math":1,"minordefault":0,"newpageshidepatrolled":0,"nickname":"","norollbackdiff":0,"numberheadings":0,"previewonfirst":0,"previewontop":1,"rcdays":7,"rclimit":50,"rows":25,"showhiddencats":0,"shownumberswatching":1,"showtoolbar":1,"skin":"vector","stubthreshold":0,"thumbsize":2,"underline":2,"uselivepreview":0,"usenewrc":0,"watchcreations":1,"watchdefault":1,"watchdeletion":0,"watchlistdays":3,"watchlisthideanons":0,"watchlisthidebots":0,"watchlisthideliu":0,"watchlisthideminor":0,"watchlisthideown":0,"watchlisthidepatrolled":0,"watchmoves":0,"wllimit":250,
"useeditwarning":1,"prefershttps":1,"usebetatoolbar":1,"usebetatoolbar-cgd":1,"wikieditor-preview":1,"wikieditor-publish":1,"language":"en","variant-gan":"gan","variant-iu":"iu","variant-kk":"kk","variant-ku":"ku","variant-shi":"shi","variant-sr":"sr","variant-tg":"tg","variant-uz":"uz","variant-zh":"zh","searchNs0":true,"searchNs1":false,"searchNs2":false,"searchNs3":false,"searchNs4":false,"searchNs5":false,"searchNs6":false,"searchNs7":false,"searchNs8":false,"searchNs9":false,"searchNs10":false,"searchNs11":false,"searchNs12":false,"searchNs13":false,"searchNs14":false,"searchNs15":false,"searchNs500":false,"searchNs501":false,"searchNs700":false,"searchNs701":false,"variant":"en"});},{},{});mw.loader.implement("user.tokens",function($,jQuery){mw.user.tokens.set({"editToken":"+\\","patrolToken":false,"watchToken":false});},{},{});
/* cache key: qtio_wiki:resourceloader:filter:minify-js:7:9743cb8b8019d46de5946bfe6dfa04d7 */
}</script>
<script>if(window.mw){
mw.loader.load(["mediawiki.page.startup","mediawiki.legacy.wikibits","mediawiki.legacy.ajax","skins.vector.js"]);
}</script>
<style type="text/css">/*<![CDATA[*/
.source-cpp-qt {line-height: normal;}
.source-cpp-qt li, .source-cpp-qt pre {
	line-height: normal; border: 0px none white;
}
/**
 * GeSHi Dynamically Generated Stylesheet
 * --------------------------------------
 * Dynamically generated stylesheet for cpp-qt
 * CSS class: source-cpp-qt, CSS id: 
 * GeSHi (C) 2004 - 2007 Nigel McNie, 2007 - 2008 Benny Baumann
 * (http://qbnz.com/highlighter/ and http://geshi.org/)
 * --------------------------------------
 */
.cpp-qt.source-cpp-qt .de1, .cpp-qt.source-cpp-qt .de2 {font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;font-family: monospace, monospace;}
.cpp-qt.source-cpp-qt  {font-family:monospace;}
.cpp-qt.source-cpp-qt .imp {font-weight: bold; color: red;}
.cpp-qt.source-cpp-qt li, .cpp-qt.source-cpp-qt .li1 {font-weight: normal; vertical-align:top;}
.cpp-qt.source-cpp-qt .ln {width:1px;text-align:right;margin:0;padding:0 2px;vertical-align:top;}
.cpp-qt.source-cpp-qt .li2 {font-weight: bold; vertical-align:top;}
.cpp-qt.source-cpp-qt .kw1 {color: #000000; font-weight:bold;}
.cpp-qt.source-cpp-qt .kw2 {color: #0057AE;}
.cpp-qt.source-cpp-qt .kw3 {color: #2B74C7;}
.cpp-qt.source-cpp-qt .kw4 {color: #0057AE;}
.cpp-qt.source-cpp-qt .kw5 {color: #22aadd;}
.cpp-qt.source-cpp-qt .co1 {color: #888888;}
.cpp-qt.source-cpp-qt .co2 {color: #006E28;}
.cpp-qt.source-cpp-qt .coMULTI {color: #888888; font-style: italic;}
.cpp-qt.source-cpp-qt .es0 {color: #000099; font-weight: bold;}
.cpp-qt.source-cpp-qt .es1 {color: #000099; font-weight: bold;}
.cpp-qt.source-cpp-qt .es2 {color: #660099; font-weight: bold;}
.cpp-qt.source-cpp-qt .es3 {color: #660099; font-weight: bold;}
.cpp-qt.source-cpp-qt .es4 {color: #660099; font-weight: bold;}
.cpp-qt.source-cpp-qt .es5 {color: #006699; font-weight: bold;}
.cpp-qt.source-cpp-qt .br0 {color: #006E28;}
.cpp-qt.source-cpp-qt .sy0 {color: #006E28;}
.cpp-qt.source-cpp-qt .st0 {color: #BF0303;}
.cpp-qt.source-cpp-qt .nu0 {color: #B08000;}
.cpp-qt.source-cpp-qt .nu6 {color: #208080;}
.cpp-qt.source-cpp-qt .nu8 {color: #208080;}
.cpp-qt.source-cpp-qt .nu12 {color: #208080;}
.cpp-qt.source-cpp-qt .nu16 {color:#800080;}
.cpp-qt.source-cpp-qt .nu17 {color:#800080;}
.cpp-qt.source-cpp-qt .nu18 {color:#800080;}
.cpp-qt.source-cpp-qt .nu19 {color:#800080;}
.cpp-qt.source-cpp-qt .me1 {color: #2B74C7;}
.cpp-qt.source-cpp-qt .me2 {color: #2B74C7;}
.cpp-qt.source-cpp-qt .me3 {color: #2B74C7;}
.cpp-qt.source-cpp-qt .ln-xtra, .cpp-qt.source-cpp-qt li.ln-xtra, .cpp-qt.source-cpp-qt div.ln-xtra {background-color: #ffc;}
.cpp-qt.source-cpp-qt span.xtra { display:block; }

/*]]>*/
</style><!--[if lt IE 7]><style type="text/css">body{behavior:url("/skins/vector/csshover.min.htc")}</style><![endif]--></head>
<body class="mediawiki ltr sitedir-ltr ns-0 ns-subject page-DatabaseConnectionDialog_de skin-vector action-view vector-animateLayout">
		<div id="mw-page-base" class="noprint"></div>
		<div id="mw-head-base" class="noprint"></div>
		<div id="content" class="mw-body" role="main">
			<a id="top"></a>
			<div id="mw-js-message" style="display:none;"></div>
						<h1 id="firstHeading" class="firstHeading" lang="en"><span dir="auto">DatabaseConnectionDialog/de</span></h1>
						<div id="bodyContent">
								<div id="siteSub">From Qt Wiki</div>
								<div id="contentSub"><span class="subpages">&lt; <a href="http://wiki.qt.io/DatabaseConnectionDialog" title="DatabaseConnectionDialog">DatabaseConnectionDialog</a></span><div id="mw-revision-info">Revision as of 15:58, 16 March 2015 by <a href="http://wiki.qt.io/index.php?title=User:AutoSpider&amp;action=edit&amp;redlink=1" class="new mw-userlink" title="User:AutoSpider (page does not exist)">AutoSpider</a>  <span class="mw-usertoollinks">(<a href="http://wiki.qt.io/index.php?title=User_talk:AutoSpider&amp;action=edit&amp;redlink=1" class="new" title="User talk:AutoSpider (page does not exist)">Talk</a> | <a href="http://wiki.qt.io/Special:Contributions/AutoSpider" title="Special:Contributions/AutoSpider">contribs</a>)</span></div><br />
				<div id="mw-revision-nav">(<a href="http://wiki.qt.io/index.php?title=DatabaseConnectionDialog/de&amp;diff=prev&amp;oldid=14133" title="DatabaseConnectionDialog/de">diff</a>) <a href="http://wiki.qt.io/index.php?title=DatabaseConnectionDialog/de&amp;direction=prev&amp;oldid=14133" title="DatabaseConnectionDialog/de">← Older revision</a> | Latest revision (diff) | Newer revision → (diff)</div></div>
												<div id="jump-to-nav" class="mw-jump">
					Jump to:					<a href="#mw-navigation">navigation</a>, 					<a href="#p-search">search</a>
				</div>
				<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr"><table style="center; margin: -1px auto 0px;border: 1px solid rgb(127, 194, 66); border-left: 10px solid rgb(127, 194, 66); background:rgb(250,250,250); width:600px">

<tr>
<td style="padding: 0.25em 0.5em;"> <b>This article may require cleanup to meet the Qt Wiki's quality standards.</b> Reason: Auto-imported from ExpressionEngine.<br /><small>Please <b><a rel="nofollow" class="external text" href="http://wiki.qt.io/index.php?title=DatabaseConnectionDialog/de&amp;action=edit">improve this article</a></b> if you can. Remove the {{cleanup}} tag and add this page to <b><a href="http://wiki.qt.io/Updated_pages" title="Updated pages">Updated pages</a></b> list after it's clean.</small>
</td></tr></table>
<p><b>Deutsch</b> | <a href="http://wiki.qt.io/DatabaseConnectionDialog" title="DatabaseConnectionDialog" class="mw-redirect">English</a>
</p>
<div id="toc" class="toc"><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Allgemeiner_Datenbank-Verbindungs-Dialog"><span class="tocnumber">1</span> <span class="toctext">Allgemeiner Datenbank-Verbindungs-Dialog</span></a>
<ul>
<li class="toclevel-2 tocsection-2"><a href="#Benutzung"><span class="tocnumber">1.1</span> <span class="toctext">Benutzung</span></a></li>
</ul>
</li>
</ul>
</div>

<h1><span class="mw-headline" id="Allgemeiner_Datenbank-Verbindungs-Dialog">Allgemeiner Datenbank-Verbindungs-Dialog</span></h1>
<p>Dieser etwas längere Code-Schnipsel zeigt, wie man einen allgemeinen Datenbank-Verbindungs-Dialog implementiert, der den Benutzer zur Eingabe von allgemeinen Datenbank-Verbindung-Eigenschaften (Benutzername, Passwort, Hostname, etc) auffordert und eine Combo-Box mit allen verfügbaren Datenbanktreibern zeigt. Der Dialog stellt auch ein Signal mit der Datenbankverbindung (sofern sie hergestellt werden konnte) zur Verfügung, so dass die Verbindung von weiteren Komponenten genutzt werden kann.
</p>
<h2><span class="mw-headline" id="Benutzung">Benutzung</span></h2>
<p>Der Dialog wird wie folgt genutzt:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="cpp-qt source-cpp-qt"><pre class="de1">DatabaseConnectionDialog<span class="sy0">*</span> dialog <span class="sy0">=</span> <span class="kw1">new</span> DatabaseConnectionDialog<span class="br0">&#40;</span><span class="kw1">this</span><span class="br0">&#41;</span><span class="sy0">;</span>
&#160;
<span class="co1">// optional: set the data that will be presented to the user as auto-filled form</span>
 dialog<span class="sy0">-&gt;</span><span class="me3">setDatabaseName</span><span class="br0">&#40;</span> <span class="st0">&quot;mydb&quot;</span> <span class="br0">&#41;</span><span class="sy0">;</span>
 dialog<span class="sy0">-&gt;</span><span class="me3">setDatabasePortNumber</span><span class="br0">&#40;</span> <span class="nu0">1234</span> <span class="br0">&#41;</span><span class="sy0">;</span>
 dialog<span class="sy0">-&gt;</span><span class="me3">setDatabaseHostName</span><span class="br0">&#40;</span> <span class="st0">&quot;localhost&quot;</span> <span class="br0">&#41;</span><span class="sy0">;</span>
 dialog<span class="sy0">-&gt;</span><span class="me3">setDatabaseUsername</span><span class="br0">&#40;</span> <span class="st0">&quot;luca&quot;</span> <span class="br0">&#41;</span><span class="sy0">;</span>
 dialog<span class="sy0">-&gt;</span><span class="me3">setDatabaseDriverName</span><span class="br0">&#40;</span> <span class="st0">&quot;QPSQL&quot;</span> <span class="br0">&#41;</span><span class="sy0">;</span>
 dialog<span class="sy0">-&gt;</span><span class="me3">setDatabasePassword</span><span class="br0">&#40;</span> <span class="st0">&quot;pwd&quot;</span> <span class="br0">&#41;</span><span class="sy0">;</span>
&#160;
<span class="co1">// enable the connect button if all the data is correct</span>
 dialog<span class="sy0">-&gt;</span><span class="me3">checkFormData</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
 <span class="co1">// connect the dialog signal to a slot where I will use the connection</span>
 <span class="kw2">connect</span><span class="br0">&#40;</span> dialog<span class="sy0">,</span>
 SIGNAL <span class="br0">&#40;</span>databaseConnect<span class="br0">&#40;</span><span class="kw5">QSqlDatabase</span><span class="sy0">&amp;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">,</span>
 <span class="kw1">this</span><span class="sy0">,</span>
 SLOT <span class="br0">&#40;</span>slotHandleNewDatabaseConnection<span class="br0">&#40;</span><span class="kw5">QSqlDatabase</span><span class="sy0">&amp;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span>
&#160;
<span class="co1">// show the dialog (without auto-connection)</span>
 dialog<span class="sy0">-&gt;</span><span class="me3">run</span><span class="br0">&#40;</span> <span class="kw2">false</span> <span class="br0">&#41;</span><span class="sy0">;</span></pre></div></div>
<p>Die Felder des Dialogs können vor dem Anzeigen initialisiert werden. Darüber hinaus gibt es einen Automatik-Verbindungs-Modus (<i>Auto-Connect-Modus</i>), so dass die Verbindung automatisch hergestellt wird, sobald alle notwendigen Daten verfügbar sind.
</p><p>Der hier gezeigte Dialog ist natürlich noch lange nicht perfekt. Es gibt noch viel Spielraum für Verbbesserungen, aber es ist eine gute Vorlage, um loszulegen.
</p>
<h3><span class="mw-headline" id="Auto-Connect-Modus">Auto-Connect-Modus</span></h3>
Beim Aufruf der <div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="cpp-qt source-cpp-qt"><pre class="de1">run<span class="br0">&#40;</span><span class="br0">&#41;</span></pre></div></div>-Methode kann als Argument ein Boolean-Wert übergeben werden. Dabei steht <i>true</i> für den Auto-Connect-Modus. In diesem Modus wird die Verbindung automatisch hergestellt, sobald alle nötigen Verbindungsdaten vorliegen. Wenn das zusammen mit den Initialisierungsdaten erfolgreich war, wird der Dialog gar nicht erst angezeigt, stattdessen wird sofort das o.g. Signal ausgesendet. Wenn es aber nicht erfolgreich war, entweder weil die Formulardaten unvollständig waren oder weil die Verbindung nicht hergestellt werden konnte, wird der Dialog doch angezeigt. Wenn <div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="cpp-qt source-cpp-qt"><pre class="de1">run<span class="br0">&#40;</span><span class="br0">&#41;</span></pre></div></div> mit <i>false</i> aufgerufen wird, ist der Auto-Connect-Modus deaktiviert und der Dialog wird in jedem Fall angezeigt.
<h3><span class="mw-headline" id="Quelltext">Quelltext</span></h3>
<p>Dies ist die Header-Datei:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="cpp-qt source-cpp-qt"><pre class="de1"><span class="coMULTI">/*!
 * databasedialog.h
 */</span>
<span class="co2">#ifndef DATABASEDIALOG_H</span>
<span class="co2">#define DATABASEDIALOG_H</span>
&#160;
<span class="co2">#include &lt;QDialog&gt;</span>
<span class="co2">#include &lt;QLabel&gt;</span>
<span class="co2">#include &lt;QLineEdit&gt;</span>
<span class="co2">#include &lt;QComboBox&gt;</span>
<span class="co2">#include &lt;QSpinBox&gt;</span>
<span class="co2">#include &lt;QDialogButtonBox&gt;</span>
<span class="co2">#include &lt;QHBoxLayout&gt;</span>
<span class="co2">#include &lt;QVBoxLayout&gt;</span>
<span class="co2">#include &lt;QGridLayout&gt;</span>
<span class="co2">#include &lt;QSqlDatabase&gt;</span>
<span class="co2">#include &lt;QString&gt;</span>
<span class="co2">#include &lt;QMessageBox&gt;</span>
<span class="co2">#include &lt;QDebug&gt;</span>
<span class="co2">#include &lt;QSqlError&gt;</span>
<span class="co2">#include &lt;QPushButton&gt;</span>
<span class="co2">#include &lt;QGroupBox&gt;</span>
&#160;
<span class="kw2">class</span> DatabaseConnectionDialog <span class="sy0">:</span> <span class="kw2">public</span> <span class="kw5">QDialog</span>
<span class="br0">&#123;</span>
 <span class="kw2">Q_OBJECT</span>
&#160;
<span class="kw2">private</span><span class="sy0">:</span>
&#160;
 <span class="coMULTI">/*!
 * The display label for the database driver name.
 */</span>
 <span class="kw5">QLabel</span><span class="st0">''</span><span class="st0">' labelDatabaseDriverName;
&#160;
 /*!
 * The display label for the TCP/IP port the database
 * is listening for connections.
 */
 QLabel'</span><span class="st0">''</span> labelDatabasePort<span class="sy0">;</span>
&#160;
 <span class="coMULTI">/*!
 * The label for the database name.
 */</span>
 <span class="kw5">QLabel</span><span class="st0">''</span><span class="st0">' labelDatabaseName;
&#160;
 /*!
 * The label for the database host name.
 */
 QLabel'</span><span class="st0">''</span> labelDatabaseHostName<span class="sy0">;</span>
&#160;
 <span class="coMULTI">/*!
 * The label for the database username.
 */</span>
 <span class="kw5">QLabel</span><span class="st0">''</span><span class="st0">' labelDatabaseUsername;
&#160;
 /*!
 * The label for the database password.
 */
 QLabel'</span><span class="st0">''</span> labelDatabasePassword<span class="sy0">;</span>
&#160;
 <span class="coMULTI">/*!
 * A label to display the summary database URL
 * connection string.
 */</span>
 <span class="kw5">QLabel</span><span class="st0">''</span><span class="st0">' labelDatabaseURL;
&#160;
&#160;
 /*!
 * The editable name of the database to which the user
 * wants to connect to.
 */
 QLineEdit'</span><span class="st0">''</span> editDatabaseName<span class="sy0">;</span>
&#160;
 <span class="coMULTI">/*!
 * The editable name of the database name to which connect.
 */</span>
 <span class="kw5">QLineEdit</span><span class="st0">''</span><span class="st0">' editDatabaseHostName;
&#160;
 /*!
 * The database listening port.
 */
 QSpinBox'</span><span class="st0">''</span> spinBoxDatabasePort<span class="sy0">;</span>
&#160;
 <span class="coMULTI">/*!
 * The editable username to use for the connection.
 */</span>
 <span class="kw5">QLineEdit</span><span class="st0">''</span><span class="st0">' editDatabaseUsername;
&#160;
 /*!
 * The editable password to use for the connection.
 */
 QLineEdit'</span><span class="st0">''</span> editDatabasePassword<span class="sy0">;</span>
&#160;
 <span class="coMULTI">/*!
 * The combo from which the user can select the database
 * driver name and type
 */</span>
 <span class="kw5">QComboBox</span><span class="st0">''</span><span class="st0">' comboDatabaseDriverName;
&#160;
&#160;
 /*!
 * A Dialog button box for displaying the
 * connect/cancel buttons.
 */
 QDialogButtonBox'</span><span class="st0">''</span> buttons<span class="sy0">;</span>
&#160;
 <span class="coMULTI">/*!
 * A method to create all the components of this dialog window
 * and lay out them correctly.
 */</span>
 <span class="kw4">void</span> setUpGUI<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
&#160;
 <span class="coMULTI">/*!
 * Searches for and populates the combo box with the
 * available database drivers.
 */</span>
 <span class="kw4">void</span> findAvailableDrivers<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
&#160;
&#160;
 <span class="coMULTI">/*!
 * Performs the connection to the database
 * and emits the signal to pass the connection.
 */</span>
 <span class="kw4">void</span> doDatabaseConnection<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
&#160;
<span class="kw2">public</span><span class="sy0">:</span>
 <span class="kw2">explicit</span> DatabaseConnectionDialog<span class="br0">&#40;</span><span class="kw5">QWidget</span> <span class="st0">''</span><span class="st0">'parent = 0);
&#160;
 /*!
 * Sets the database name in the dialog.
 * dbName the name of the database
 */
 void setDatabaseName( const QString&amp; dbName );
&#160;
 /*!
 * Sets the port number for the database connection.
 * portNumber the port number the database is listening for
 * connections
 */
 void setDatabasePortNumber( int&amp; portNumber );
&#160;
 /*!
 * Sets the remote host name mnemonic name.
 * hostname the name of the host the database is running on
 */
 void setDatabaseHostName( const QString&amp; hostname );
&#160;
 /*!
 * Sets the username to use for the connection.
 * username the username to use for the connection
 */
 void setDatabaseUsername( const QString&amp; username );
&#160;
 /*!
 * Selects the driver name.
 * the driver name (therefore the database type) to
 * select in the combo box.
 */
 void setDatabaseDriverName( const QString&amp; drvName );
&#160;
 /*!
 * Sets the user password.
 * the password to use for the connection
 */
 void setDatabasePassword( const QString&amp; pwd );
&#160;
&#160;
 /*!
 * Performs a check against the user data and enables/disables
 * the connect button depending on the form fill status.
 '</span><span class="st0">''</span><span class="kw2">true</span> <span class="kw1">if</span> the data allows a database connection
<span class="sy0">*/</span>
 <span class="kw4">bool</span> checkFormData<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
&#160;
 <span class="coMULTI">/*!
 * Performs the database connection or prompt the user
 * showing this dialog in the case data is not completed
 * or should not perform the autoconnection.
 * autoConnect if set to true tries to perform an automatic
 * connection to the database, if the data is complete, or prompt the user
 * for missing data. If set to false, simply shows the dialog and waits.
 */</span>
 <span class="kw4">void</span> run<span class="br0">&#40;</span> <span class="kw4">bool</span> autoConnect <span class="br0">&#41;</span><span class="sy0">;</span>
&#160;
&#160;
<span class="kw2">signals</span><span class="sy0">:</span>
&#160;
 <span class="coMULTI">/*!
 * Passes the database connection in the case the connection
 * is succesful.
 * databaseConnection the connection object
 */</span>
 <span class="kw4">void</span> databaseConnect<span class="br0">&#40;</span> <span class="kw5">QSqlDatabase</span><span class="sy0">&amp;</span> databaseConnection <span class="br0">&#41;</span><span class="sy0">;</span>
&#160;
<span class="kw2">public</span> <span class="kw2">slots</span><span class="sy0">:</span>
&#160;
 <span class="coMULTI">/*!
 * Checks if the user has entered enough data to
 * try a database connection.
 */</span>
 <span class="kw4">bool</span> slotCheckFormData<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
&#160;
&#160;
 <span class="coMULTI">/*!
 * Performs the database connection.
 */</span>
 <span class="kw4">void</span> slotPerformConnection<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
&#160;
<span class="br0">&#125;</span><span class="sy0">;</span>
&#160;
<span class="co2">#endif // DATABASEDIALOG_H</span></pre></div></div>
<p><br />
Und hier folgt die Klassenimplementierung:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="cpp-qt source-cpp-qt"><pre class="de1"><span class="co2">#include &quot;databasedialog.h&quot;</span>
&#160;
DatabaseConnectionDialog<span class="sy0">::</span><span class="me2">DatabaseConnectionDialog</span><span class="br0">&#40;</span><span class="kw5">QWidget</span> <span class="st0">''</span><span class="st0">'parent)&#160;:
 QDialog(parent)
{
 // this dialog is modal
 setModal( true );
 // the title of this dialog
 setWindowTitle( tr(&quot;Database connection&quot;) );
 // place each GUI component
 setUpGUI();
 // load available drivers
 findAvailableDrivers();
}
&#160;
void DatabaseConnectionDialog::setUpGUI()
{
&#160;
&#160;
 // create all gui components
 labelDatabaseDriverName = new QLabel( tr(&quot;Database Type (driver name)&quot;), this );
 labelDatabasePort = new QLabel( tr(&quot;TCP/IP Port Number&quot;), this );
 labelDatabaseName = new QLabel( tr(&quot;Database Name&quot;), this );
 labelDatabaseHostName = new QLabel( tr(&quot;Host Name&quot;), this );
 labelDatabaseUsername = new QLabel( tr(&quot;Username&quot;), this );
 labelDatabasePassword = new QLabel( tr(&quot;Password&quot;), this );
 labelDatabaseURL = new QLabel( this );
 labelDatabaseURL-&gt;setAlignment( Qt::AlignCenter );
&#160;
 spinBoxDatabasePort = new QSpinBox( this );
 spinBoxDatabasePort-&gt;setMaximum( 9999 );
 spinBoxDatabasePort-&gt;setMinimum( 100 );
 spinBoxDatabasePort-&gt;setSingleStep( 1 );
&#160;
 comboDatabaseDriverName = new QComboBox( this );
 comboDatabaseDriverName-&gt;setEditable( false );
&#160;
&#160;
 editDatabaseName = new QLineEdit( this );
 editDatabaseHostName = new QLineEdit( this );
 editDatabaseUsername = new QLineEdit( this );
 editDatabasePassword = new QLineEdit( this );
 editDatabasePassword-&gt;setEchoMode( QLineEdit::Password );
 connect( editDatabaseName,
 SIGNAL (editingFinished()),
 this,
 SLOT (slotCheckFormData()) );
 connect( editDatabaseHostName,
 SIGNAL (editingFinished()),
 this,
 SLOT (slotCheckFormData()) );
 connect( editDatabaseUsername,
 SIGNAL (editingFinished()),
 this,
 SLOT (slotCheckFormData()) );
 connect( editDatabasePassword,
 SIGNAL (editingFinished()),
 this,
 SLOT (slotCheckFormData()) );
 connect( editDatabasePassword,
 SIGNAL (returnPressed()),
 this,
 SLOT (slotCheckFormData()) );
&#160;
&#160;
 // create the button box
 buttons = new QDialogButtonBox( this );
 buttons-&gt;addButton( QDialogButtonBox::Ok );
 buttons-&gt;addButton( QDialogButtonBox::Cancel );
 QPushButton'</span><span class="st0">''</span> okButton <span class="sy0">=</span> buttons<span class="sy0">-&gt;</span><span class="me3">button</span><span class="br0">&#40;</span> <span class="kw5">QDialogButtonBox</span><span class="sy0">::</span><span class="me2">Ok</span> <span class="br0">&#41;</span><span class="sy0">;</span>
 okButton<span class="sy0">-&gt;</span><span class="me3">setText</span><span class="br0">&#40;</span> tr<span class="br0">&#40;</span> <span class="st0">&quot;Connect!&quot;</span> <span class="br0">&#41;</span> <span class="br0">&#41;</span><span class="sy0">;</span>
 okButton<span class="sy0">-&gt;</span><span class="me3">setEnabled</span><span class="br0">&#40;</span> <span class="kw2">false</span> <span class="br0">&#41;</span><span class="sy0">;</span>
 <span class="kw2">connect</span><span class="br0">&#40;</span> buttons<span class="sy0">,</span>
 SIGNAL <span class="br0">&#40;</span>accepted<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">,</span>
 <span class="kw1">this</span><span class="sy0">,</span>
 SLOT <span class="br0">&#40;</span>slotPerformConnection<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span>
 <span class="kw2">connect</span><span class="br0">&#40;</span> buttons<span class="sy0">,</span>
 SIGNAL <span class="br0">&#40;</span>rejected<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">,</span>
 <span class="kw1">this</span><span class="sy0">,</span>
 SLOT <span class="br0">&#40;</span>close<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span>
&#160;
<span class="co1">// create a vertical layout to display components</span>
 <span class="kw5">QVBoxLayout</span><span class="sy0">*</span> verticalLayout <span class="sy0">=</span> <span class="kw1">new</span> <span class="kw5">QVBoxLayout</span><span class="br0">&#40;</span> <span class="kw1">this</span> <span class="br0">&#41;</span><span class="sy0">;</span>
&#160;
<span class="co1">// create a grid layout to add all the components</span>
 <span class="kw5">QGridLayout</span><span class="sy0">*</span> formGridLayout <span class="sy0">=</span> <span class="kw1">new</span> <span class="kw5">QGridLayout</span><span class="br0">&#40;</span> <span class="kw1">this</span> <span class="br0">&#41;</span><span class="sy0">;</span>
 <span class="kw5">QGroupBox</span><span class="sy0">*</span> gridGroupBox <span class="sy0">=</span> <span class="kw1">new</span> <span class="kw5">QGroupBox</span><span class="br0">&#40;</span> <span class="kw1">this</span> <span class="br0">&#41;</span><span class="sy0">;</span>
 gridGroupBox<span class="sy0">-&gt;</span><span class="me3">setTitle</span><span class="br0">&#40;</span> tr<span class="br0">&#40;</span><span class="st0">&quot;Database connection properties&quot;</span> <span class="br0">&#41;</span> <span class="br0">&#41;</span><span class="sy0">;</span>
 formGridLayout<span class="sy0">-&gt;</span><span class="me3">addWidget</span><span class="br0">&#40;</span> labelDatabaseDriverName<span class="sy0">,</span> <span class="nu0">0</span><span class="sy0">,</span> <span class="nu0">0</span> <span class="br0">&#41;</span><span class="sy0">;</span>
 formGridLayout<span class="sy0">-&gt;</span><span class="me3">addWidget</span><span class="br0">&#40;</span> comboDatabaseDriverName<span class="sy0">,</span> <span class="nu0">0</span><span class="sy0">,</span> <span class="nu0">1</span> <span class="br0">&#41;</span><span class="sy0">;</span>
 labelDatabaseDriverName<span class="sy0">-&gt;</span><span class="me3">setBuddy</span><span class="br0">&#40;</span> comboDatabaseDriverName <span class="br0">&#41;</span><span class="sy0">;</span>
 formGridLayout<span class="sy0">-&gt;</span><span class="me3">addWidget</span><span class="br0">&#40;</span> labelDatabaseHostName<span class="sy0">,</span> <span class="nu0">1</span><span class="sy0">,</span> <span class="nu0">0</span> <span class="br0">&#41;</span><span class="sy0">;</span>
 formGridLayout<span class="sy0">-&gt;</span><span class="me3">addWidget</span><span class="br0">&#40;</span> editDatabaseHostName<span class="sy0">,</span> <span class="nu0">1</span><span class="sy0">,</span> <span class="nu0">1</span><span class="br0">&#41;</span><span class="sy0">;</span>
 labelDatabaseHostName<span class="sy0">-&gt;</span><span class="me3">setBuddy</span><span class="br0">&#40;</span> editDatabaseHostName <span class="br0">&#41;</span><span class="sy0">;</span>
 formGridLayout<span class="sy0">-&gt;</span><span class="me3">addWidget</span><span class="br0">&#40;</span> labelDatabasePort<span class="sy0">,</span> <span class="nu0">2</span><span class="sy0">,</span> <span class="nu0">0</span> <span class="br0">&#41;</span><span class="sy0">;</span>
 formGridLayout<span class="sy0">-&gt;</span><span class="me3">addWidget</span><span class="br0">&#40;</span> spinBoxDatabasePort<span class="sy0">,</span> <span class="nu0">2</span><span class="sy0">,</span> <span class="nu0">1</span> <span class="br0">&#41;</span><span class="sy0">;</span>
 labelDatabasePort<span class="sy0">-&gt;</span><span class="me3">setBuddy</span><span class="br0">&#40;</span> spinBoxDatabasePort <span class="br0">&#41;</span><span class="sy0">;</span>
 formGridLayout<span class="sy0">-&gt;</span><span class="me3">addWidget</span><span class="br0">&#40;</span> labelDatabaseName<span class="sy0">,</span> <span class="nu0">3</span><span class="sy0">,</span> <span class="nu0">0</span> <span class="br0">&#41;</span><span class="sy0">;</span>
 formGridLayout<span class="sy0">-&gt;</span><span class="me3">addWidget</span><span class="br0">&#40;</span> editDatabaseName <span class="sy0">,</span> <span class="nu0">3</span><span class="sy0">,</span> <span class="nu0">1</span> <span class="br0">&#41;</span><span class="sy0">;</span>
 labelDatabaseName<span class="sy0">-&gt;</span><span class="me3">setBuddy</span><span class="br0">&#40;</span> editDatabaseName <span class="br0">&#41;</span><span class="sy0">;</span>
 formGridLayout<span class="sy0">-&gt;</span><span class="me3">addWidget</span><span class="br0">&#40;</span> labelDatabaseUsername<span class="sy0">,</span> <span class="nu0">4</span><span class="sy0">,</span> <span class="nu0">0</span> <span class="br0">&#41;</span><span class="sy0">;</span>
 formGridLayout<span class="sy0">-&gt;</span><span class="me3">addWidget</span><span class="br0">&#40;</span> editDatabaseUsername<span class="sy0">,</span> <span class="nu0">4</span><span class="sy0">,</span> <span class="nu0">1</span> <span class="br0">&#41;</span><span class="sy0">;</span>
 labelDatabaseUsername<span class="sy0">-&gt;</span><span class="me3">setBuddy</span><span class="br0">&#40;</span> editDatabaseUsername <span class="br0">&#41;</span><span class="sy0">;</span>
 formGridLayout<span class="sy0">-&gt;</span><span class="me3">addWidget</span><span class="br0">&#40;</span> labelDatabasePassword<span class="sy0">,</span> <span class="nu0">5</span><span class="sy0">,</span> <span class="nu0">0</span> <span class="br0">&#41;</span><span class="sy0">;</span>
 formGridLayout<span class="sy0">-&gt;</span><span class="me3">addWidget</span><span class="br0">&#40;</span> editDatabasePassword<span class="sy0">,</span> <span class="nu0">5</span><span class="sy0">,</span> <span class="nu0">1</span> <span class="br0">&#41;</span><span class="sy0">;</span>
 labelDatabasePassword<span class="sy0">-&gt;</span><span class="me3">setBuddy</span><span class="br0">&#40;</span> editDatabasePassword <span class="br0">&#41;</span><span class="sy0">;</span>
 <span class="co1">// add all the elements to groupbox</span>
 gridGroupBox<span class="sy0">-&gt;</span><span class="me3">setLayout</span><span class="br0">&#40;</span> formGridLayout <span class="br0">&#41;</span><span class="sy0">;</span>
&#160;
<span class="co1">// place a new groupbox to contain the database connection URL</span>
 <span class="kw5">QGroupBox</span><span class="sy0">*</span> urlGroupBox <span class="sy0">=</span> <span class="kw1">new</span> <span class="kw5">QGroupBox</span><span class="br0">&#40;</span> <span class="kw1">this</span> <span class="br0">&#41;</span><span class="sy0">;</span>
 urlGroupBox<span class="sy0">-&gt;</span><span class="me3">setTitle</span><span class="br0">&#40;</span> tr<span class="br0">&#40;</span> <span class="st0">&quot;Database URL&quot;</span> <span class="br0">&#41;</span> <span class="br0">&#41;</span><span class="sy0">;</span>
 <span class="kw5">QHBoxLayout</span><span class="sy0">*</span> urlLayout <span class="sy0">=</span> <span class="kw1">new</span> <span class="kw5">QHBoxLayout</span><span class="br0">&#40;</span> <span class="kw1">this</span> <span class="br0">&#41;</span><span class="sy0">;</span>
 urlLayout<span class="sy0">-&gt;</span><span class="me3">addWidget</span><span class="br0">&#40;</span> labelDatabaseURL <span class="br0">&#41;</span><span class="sy0">;</span>
 urlGroupBox<span class="sy0">-&gt;</span><span class="me3">setLayout</span><span class="br0">&#40;</span> urlLayout <span class="br0">&#41;</span><span class="sy0">;</span>
&#160;
<span class="co1">// nest all layouts together</span>
 verticalLayout<span class="sy0">-&gt;</span><span class="me3">addWidget</span><span class="br0">&#40;</span> gridGroupBox <span class="br0">&#41;</span><span class="sy0">;</span>
 verticalLayout<span class="sy0">-&gt;</span><span class="me3">addStretch</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
 verticalLayout<span class="sy0">-&gt;</span><span class="me3">addWidget</span><span class="br0">&#40;</span> urlGroupBox <span class="br0">&#41;</span><span class="sy0">;</span>
 verticalLayout<span class="sy0">-&gt;</span><span class="me3">addWidget</span><span class="br0">&#40;</span> buttons <span class="br0">&#41;</span><span class="sy0">;</span>
&#160;
comboDatabaseDriverName<span class="sy0">-&gt;</span><span class="me3">setFocus</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
<span class="br0">&#125;</span>
&#160;
<span class="kw4">void</span> DatabaseConnectionDialog<span class="sy0">::</span><span class="me2">findAvailableDrivers</span><span class="br0">&#40;</span><span class="br0">&#41;</span>
<span class="br0">&#123;</span>
 <span class="co1">// remove all items</span>
 comboDatabaseDriverName<span class="sy0">-&gt;</span><span class="me3">clear</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
&#160;
<span class="co1">// populate the combo box with all available drivers</span>
 <span class="kw2">foreach</span><span class="br0">&#40;</span> <span class="kw5">QString</span> driverName<span class="sy0">,</span> <span class="kw5">QSqlDatabase</span><span class="sy0">::</span><span class="me2">drivers</span><span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#41;</span>
 comboDatabaseDriverName<span class="sy0">-&gt;</span><span class="me3">addItem</span><span class="br0">&#40;</span> driverName <span class="br0">&#41;</span><span class="sy0">;</span>
<span class="br0">&#125;</span>
&#160;
<span class="kw4">bool</span> DatabaseConnectionDialog<span class="sy0">::</span><span class="me2">slotCheckFormData</span><span class="br0">&#40;</span><span class="br0">&#41;</span>
<span class="br0">&#123;</span>
 <span class="kw1">return</span> checkFormData<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
<span class="br0">&#125;</span>
&#160;
<span class="kw4">bool</span> DatabaseConnectionDialog<span class="sy0">::</span><span class="me2">checkFormData</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#123;</span>
 <span class="kw1">if</span><span class="br0">&#40;</span> editDatabaseName<span class="sy0">-&gt;</span><span class="me3">text</span><span class="br0">&#40;</span><span class="br0">&#41;</span>.<span class="me1">isEmpty</span><span class="br0">&#40;</span><span class="br0">&#41;</span>
 <span class="sy0">||</span> editDatabaseHostName<span class="sy0">-&gt;</span><span class="me3">text</span><span class="br0">&#40;</span><span class="br0">&#41;</span>.<span class="me1">isEmpty</span><span class="br0">&#40;</span><span class="br0">&#41;</span>
 <span class="sy0">||</span> editDatabaseUsername<span class="sy0">-&gt;</span><span class="me3">text</span><span class="br0">&#40;</span><span class="br0">&#41;</span>.<span class="me1">isEmpty</span><span class="br0">&#40;</span><span class="br0">&#41;</span>
 <span class="sy0">||</span> editDatabasePassword<span class="sy0">-&gt;</span><span class="me3">text</span><span class="br0">&#40;</span><span class="br0">&#41;</span>.<span class="me1">isEmpty</span><span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#41;</span>
 buttons<span class="sy0">-&gt;</span><span class="me3">button</span><span class="br0">&#40;</span> <span class="kw5">QDialogButtonBox</span><span class="sy0">::</span><span class="me2">Ok</span> <span class="br0">&#41;</span><span class="sy0">-&gt;</span><span class="me3">setEnabled</span><span class="br0">&#40;</span> <span class="kw2">false</span> <span class="br0">&#41;</span><span class="sy0">;</span>
 <span class="kw1">else</span><span class="br0">&#123;</span>
 <span class="co1">// enable the connect button and give focus</span>
 buttons<span class="sy0">-&gt;</span><span class="me3">button</span><span class="br0">&#40;</span> <span class="kw5">QDialogButtonBox</span><span class="sy0">::</span><span class="me2">Ok</span> <span class="br0">&#41;</span><span class="sy0">-&gt;</span><span class="me3">setEnabled</span><span class="br0">&#40;</span> <span class="kw2">true</span> <span class="br0">&#41;</span><span class="sy0">;</span>
 buttons<span class="sy0">-&gt;</span><span class="me3">button</span><span class="br0">&#40;</span> <span class="kw5">QDialogButtonBox</span><span class="sy0">::</span><span class="me2">Ok</span> <span class="br0">&#41;</span><span class="sy0">-&gt;</span><span class="me3">setFocus</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
 <span class="br0">&#125;</span>
&#160;
&#160;
 <span class="co1">// if the connection can be established (or at least tried)</span>
 <span class="co1">// display the URL</span>
 <span class="kw1">if</span><span class="br0">&#40;</span> buttons<span class="sy0">-&gt;</span><span class="me3">button</span><span class="br0">&#40;</span> <span class="kw5">QDialogButtonBox</span><span class="sy0">::</span><span class="me2">Ok</span> <span class="br0">&#41;</span><span class="sy0">-&gt;</span><span class="me3">isEnabled</span><span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#41;</span>
 labelDatabaseURL<span class="sy0">-&gt;</span><span class="me3">setText</span><span class="br0">&#40;</span> comboDatabaseDriverName<span class="sy0">-&gt;</span><span class="me3">currentText</span><span class="br0">&#40;</span><span class="br0">&#41;</span>
 <span class="sy0">+</span> <span class="st0">&quot;://&quot;</span>
 <span class="sy0">+</span> editDatabaseUsername<span class="sy0">-&gt;</span><span class="me3">text</span><span class="br0">&#40;</span><span class="br0">&#41;</span>
 <span class="sy0">+</span> <span class="st0">&quot;@&quot;</span>
 <span class="sy0">+</span> editDatabaseHostName<span class="sy0">-&gt;</span><span class="me3">text</span><span class="br0">&#40;</span><span class="br0">&#41;</span>
 <span class="sy0">+</span> <span class="st0">&quot;/&quot;</span>
 <span class="sy0">+</span> editDatabaseName<span class="sy0">-&gt;</span><span class="me3">text</span><span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#41;</span><span class="sy0">;</span>
 <span class="kw1">else</span>
 labelDatabaseURL<span class="sy0">-&gt;</span><span class="me3">setText</span><span class="br0">&#40;</span> <span class="st0">&quot;&quot;</span> <span class="br0">&#41;</span><span class="sy0">;</span>
&#160;
<span class="kw1">return</span> buttons<span class="sy0">-&gt;</span><span class="me3">button</span><span class="br0">&#40;</span> <span class="kw5">QDialogButtonBox</span><span class="sy0">::</span><span class="me2">Ok</span> <span class="br0">&#41;</span><span class="sy0">-&gt;</span><span class="me3">isEnabled</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
<span class="br0">&#125;</span>
&#160;
<span class="kw4">void</span> DatabaseConnectionDialog<span class="sy0">::</span><span class="me2">doDatabaseConnection</span><span class="br0">&#40;</span><span class="br0">&#41;</span>
<span class="br0">&#123;</span>
 <span class="co1">// check the database driver is really available</span>
 <span class="co1">// (should never happen)</span>
 <span class="kw1">if</span><span class="br0">&#40;</span> <span class="sy0">!</span> <span class="kw5">QSqlDatabase</span><span class="sy0">::</span><span class="me2">isDriverAvailable</span><span class="br0">&#40;</span> comboDatabaseDriverName<span class="sy0">-&gt;</span><span class="me3">currentText</span><span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#41;</span> <span class="br0">&#41;</span><span class="br0">&#123;</span>
 <span class="kw5">QMessageBox</span><span class="sy0">::</span><span class="me2">critical</span><span class="br0">&#40;</span> <span class="kw1">this</span><span class="sy0">,</span>
 tr<span class="br0">&#40;</span><span class="st0">&quot;Database Connection Error&quot;</span><span class="br0">&#41;</span><span class="sy0">,</span>
 tr<span class="br0">&#40;</span><span class="st0">&quot;Database driver not available!&quot;</span><span class="br0">&#41;</span>
 <span class="br0">&#41;</span><span class="sy0">;</span>
&#160;
return<span class="sy0">;</span>
 <span class="br0">&#125;</span>
&#160;
<span class="kw2">qDebug</span><span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="sy0">&lt;&lt;</span> <span class="st0">&quot;Performing the database driver setup..&quot;</span><span class="sy0">;</span>
&#160;
<span class="co1">// set database driver properties</span>
 <span class="kw5">QSqlDatabase</span> databaseConnection <span class="sy0">=</span> <span class="kw5">QSqlDatabase</span><span class="sy0">::</span><span class="me2">addDatabase</span><span class="br0">&#40;</span> comboDatabaseDriverName<span class="sy0">-&gt;</span><span class="me3">currentText</span><span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#41;</span><span class="sy0">;</span>
 databaseConnection.<span class="me1">setDatabaseName</span><span class="br0">&#40;</span> editDatabaseName<span class="sy0">-&gt;</span><span class="me3">text</span><span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#41;</span><span class="sy0">;</span>
 databaseConnection.<span class="me1">setUserName</span><span class="br0">&#40;</span> editDatabaseUsername<span class="sy0">-&gt;</span><span class="me3">text</span><span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#41;</span><span class="sy0">;</span>
 databaseConnection.<span class="me1">setHostName</span><span class="br0">&#40;</span> editDatabaseHostName<span class="sy0">-&gt;</span><span class="me3">text</span><span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#41;</span><span class="sy0">;</span>
 databaseConnection.<span class="me1">setPassword</span><span class="br0">&#40;</span> editDatabasePassword<span class="sy0">-&gt;</span><span class="me3">text</span><span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#41;</span><span class="sy0">;</span>
 databaseConnection.<span class="me1">setPort</span><span class="br0">&#40;</span> spinBoxDatabasePort<span class="sy0">-&gt;</span><span class="me3">text</span><span class="br0">&#40;</span><span class="br0">&#41;</span>.<span class="me1">toInt</span><span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#41;</span><span class="sy0">;</span>
&#160;
<span class="kw1">if</span><span class="br0">&#40;</span> <span class="sy0">!</span> databaseConnection.<span class="me1">open</span><span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#41;</span><span class="br0">&#123;</span>
 <span class="kw5">QMessageBox</span><span class="sy0">::</span><span class="me2">critical</span><span class="br0">&#40;</span> <span class="kw1">this</span><span class="sy0">,</span>
 tr<span class="br0">&#40;</span><span class="st0">&quot;Database Connection Error&quot;</span><span class="br0">&#41;</span><span class="sy0">,</span>
 databaseConnection.<span class="me1">lastError</span><span class="br0">&#40;</span><span class="br0">&#41;</span>.<span class="me1">text</span><span class="br0">&#40;</span><span class="br0">&#41;</span>
 <span class="br0">&#41;</span><span class="sy0">;</span>
&#160;
<span class="co1">// disable the connect button and set the focus again</span>
 <span class="co1">// on the first field</span>
 buttons<span class="sy0">-&gt;</span><span class="me3">button</span><span class="br0">&#40;</span> <span class="kw5">QDialogButtonBox</span><span class="sy0">::</span><span class="me2">Ok</span> <span class="br0">&#41;</span><span class="sy0">-&gt;</span><span class="me3">setEnabled</span><span class="br0">&#40;</span> <span class="kw2">false</span> <span class="br0">&#41;</span><span class="sy0">;</span>
 editDatabaseHostName<span class="sy0">-&gt;</span><span class="me3">setFocus</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
 <span class="br0">&#125;</span>
 <span class="kw1">else</span><span class="br0">&#123;</span>
 <span class="co1">// hide the dialog</span>
 this<span class="sy0">-&gt;</span><span class="me3">hide</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
&#160;
<span class="co1">// emit the signal</span>
 <span class="kw2">qDebug</span><span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="sy0">&lt;&lt;</span> <span class="st0">&quot;Emitting signal since the database is connected!&quot;</span><span class="sy0">;</span>
 emit databaseConnect<span class="br0">&#40;</span> databaseConnection <span class="br0">&#41;</span><span class="sy0">;</span>
 <span class="br0">&#125;</span>
<span class="br0">&#125;</span>
&#160;
<span class="kw4">void</span> DatabaseConnectionDialog<span class="sy0">::</span><span class="me2">slotPerformConnection</span><span class="br0">&#40;</span><span class="br0">&#41;</span>
<span class="br0">&#123;</span>
 <span class="co1">// perform another check against the user data</span>
 <span class="kw1">if</span><span class="br0">&#40;</span> slotCheckFormData<span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#41;</span>
 doDatabaseConnection<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
&#160;
<span class="br0">&#125;</span>
&#160;
<span class="kw4">void</span> DatabaseConnectionDialog<span class="sy0">::</span><span class="me2">setDatabaseName</span><span class="br0">&#40;</span><span class="kw4">const</span> <span class="kw5">QString</span> <span class="sy0">&amp;</span>dbName<span class="br0">&#41;</span>
<span class="br0">&#123;</span>
 editDatabaseName<span class="sy0">-&gt;</span><span class="me3">setText</span><span class="br0">&#40;</span> dbName <span class="br0">&#41;</span><span class="sy0">;</span>
<span class="br0">&#125;</span>
&#160;
<span class="kw4">void</span> DatabaseConnectionDialog<span class="sy0">::</span><span class="me2">setDatabasePortNumber</span><span class="br0">&#40;</span><span class="kw4">int</span> <span class="sy0">&amp;</span>portNumber<span class="br0">&#41;</span>
<span class="br0">&#123;</span>
 spinBoxDatabasePort<span class="sy0">-&gt;</span><span class="me3">setValue</span><span class="br0">&#40;</span> portNumber <span class="br0">&#41;</span><span class="sy0">;</span>
<span class="br0">&#125;</span>
&#160;
<span class="kw4">void</span> DatabaseConnectionDialog<span class="sy0">::</span><span class="me2">setDatabaseHostName</span><span class="br0">&#40;</span><span class="kw4">const</span> <span class="kw5">QString</span> <span class="sy0">&amp;</span>hostname<span class="br0">&#41;</span>
<span class="br0">&#123;</span>
 editDatabaseHostName<span class="sy0">-&gt;</span><span class="me3">setText</span><span class="br0">&#40;</span> hostname <span class="br0">&#41;</span><span class="sy0">;</span>
<span class="br0">&#125;</span>
&#160;
<span class="kw4">void</span> DatabaseConnectionDialog<span class="sy0">::</span><span class="me2">setDatabaseUsername</span><span class="br0">&#40;</span><span class="kw4">const</span> <span class="kw5">QString</span> <span class="sy0">&amp;</span>username<span class="br0">&#41;</span>
<span class="br0">&#123;</span>
 editDatabaseUsername<span class="sy0">-&gt;</span><span class="me3">setText</span><span class="br0">&#40;</span> username <span class="br0">&#41;</span><span class="sy0">;</span>
<span class="br0">&#125;</span>
&#160;
<span class="kw4">void</span> DatabaseConnectionDialog<span class="sy0">::</span><span class="me2">setDatabaseDriverName</span><span class="br0">&#40;</span><span class="kw4">const</span> <span class="kw5">QString</span> <span class="sy0">&amp;</span>drvName<span class="br0">&#41;</span>
<span class="br0">&#123;</span>
 <span class="kw4">int</span> index <span class="sy0">=</span> comboDatabaseDriverName<span class="sy0">-&gt;</span><span class="me3">findText</span><span class="br0">&#40;</span> drvName <span class="br0">&#41;</span><span class="sy0">;</span>
 <span class="kw1">if</span><span class="br0">&#40;</span> index <span class="sy0">&gt;=</span> <span class="nu0">0</span> <span class="br0">&#41;</span>
 comboDatabaseDriverName<span class="sy0">-&gt;</span><span class="me3">setCurrentIndex</span><span class="br0">&#40;</span> index <span class="br0">&#41;</span><span class="sy0">;</span>
<span class="br0">&#125;</span>
&#160;
<span class="kw4">void</span> DatabaseConnectionDialog<span class="sy0">::</span><span class="me2">setDatabasePassword</span><span class="br0">&#40;</span><span class="kw4">const</span> <span class="kw5">QString</span> <span class="sy0">&amp;</span>pwd<span class="br0">&#41;</span>
<span class="br0">&#123;</span>
 editDatabasePassword<span class="sy0">-&gt;</span><span class="me3">setText</span><span class="br0">&#40;</span> pwd <span class="br0">&#41;</span><span class="sy0">;</span>
<span class="br0">&#125;</span>
&#160;
<span class="kw4">void</span> DatabaseConnectionDialog<span class="sy0">::</span><span class="me2">run</span><span class="br0">&#40;</span><span class="kw4">bool</span> autoConnect<span class="br0">&#41;</span>
<span class="br0">&#123;</span>
 <span class="kw4">bool</span> statusOk <span class="sy0">=</span> checkFormData<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
 <span class="kw1">if</span><span class="br0">&#40;</span> <span class="sy0">!</span> autoConnect <span class="sy0">||</span> <span class="sy0">!</span> statusOk <span class="br0">&#41;</span>
 exec<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
 <span class="kw1">else</span>
 doDatabaseConnection<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
<span class="br0">&#125;</span></pre></div></div>

<!-- 
NewPP limit report
CPU time usage: 0.123 seconds
Real time usage: 0.132 seconds
Preprocessor visited node count: 66/1000000
Preprocessor generated node count: 192/1000000
Post‐expand include size: 1316/2097152 bytes
Template argument size: 424/2097152 bytes
Highest expansion depth: 5/40
Expensive parser function count: 0/100
-->

<!-- Saved in parser cache with key qtio_wiki:pcache:idhash:3125-0!*!0!!en!*!* and timestamp 20151105063543 and revision id 14133
 -->
</div>								<div class="printfooter">
				Retrieved from "<a href="http://wiki.qt.io/index.php?title=DatabaseConnectionDialog/de&amp;oldid=14133">http://wiki.qt.io/index.php?title=DatabaseConnectionDialog/de&amp;oldid=14133</a>"				</div>
												<div id='catlinks' class='catlinks'><div id="mw-normal-catlinks" class="mw-normal-catlinks"><a href="http://wiki.qt.io/Special:Categories" title="Special:Categories">Categories</a>: <ul><li><a href="http://wiki.qt.io/Category:Articles_needing_cleanup" title="Category:Articles needing cleanup">Articles needing cleanup</a></li><li><a href="http://wiki.qt.io/Category:HowTo" title="Category:HowTo">HowTo</a></li><li><a href="http://wiki.qt.io/Category:Snippets" title="Category:Snippets">Snippets</a></li><li><a href="http://wiki.qt.io/Category:German" title="Category:German">German</a></li></ul></div></div>												<div class="visualClear"></div>
							</div>
		</div>
		<div id="mw-navigation">
			<h2>Navigation menu</h2>
			<div id="mw-head">
				<div id="p-personal" role="navigation" class="" aria-labelledby="p-personal-label">
	<h3 id="p-personal-label">Personal tools</h3>
	<ul>
<li id="pt-anonuserpage"><a href="http://wiki.qt.io/User:10.0.113.70" class="new" title="The user page for the IP address you are editing as [.]" accesskey=".">10.0.113.70</a></li><li id="pt-anontalk"><a href="http://wiki.qt.io/User_talk:10.0.113.70" class="new" title="Discussion about edits from this IP address [n]" accesskey="n">Talk for this IP address</a></li><li id="pt-login"><a href="http://wiki.qt.io/index.php?title=Special:QtLogin&amp;returnto=DatabaseConnectionDialog%2Fde" title="You are encouraged to log in; however, it is not mandatory [o]" accesskey="o">Sign in</a></li>	</ul>
</div>
				<div id="left-navigation">
					<div id="p-namespaces" role="navigation" class="vectorTabs" aria-labelledby="p-namespaces-label">
	<h3 id="p-namespaces-label">Namespaces</h3>
	<ul>
					<li  id="ca-nstab-main" class="selected"><span><a href="http://wiki.qt.io/DatabaseConnectionDialog/de"  title="View the content page [c]" accesskey="c">Page</a></span></li>
					<li  id="ca-talk" class="new"><span><a href="http://wiki.qt.io/index.php?title=Talk:DatabaseConnectionDialog/de&amp;action=edit&amp;redlink=1"  title="Discussion about the content page [t]" accesskey="t">Discussion</a></span></li>
			</ul>
</div>
<div id="p-variants" role="navigation" class="vectorMenu emptyPortlet" aria-labelledby="p-variants-label">
	<h3 id="mw-vector-current-variant">
		</h3>
	<h3 id="p-variants-label"><span>Variants</span><a href="#"></a></h3>
	<div class="menu">
		<ul>
					</ul>
	</div>
</div>
				</div>
				<div id="right-navigation">
					<div id="p-views" role="navigation" class="vectorTabs" aria-labelledby="p-views-label">
	<h3 id="p-views-label">Views</h3>
	<ul>
					<li id="ca-view" class="selected"><span><a href="http://wiki.qt.io/DatabaseConnectionDialog/de" >Read</a></span></li>
					<li id="ca-viewsource"><span><a href="http://wiki.qt.io/index.php?title=DatabaseConnectionDialog/de&amp;action=edit"  title="This page is protected.&#10;You can view its source [e]" accesskey="e">View source</a></span></li>
					<li id="ca-history" class="collapsible"><span><a href="http://wiki.qt.io/index.php?title=DatabaseConnectionDialog/de&amp;action=history"  title="Past revisions of this page [h]" accesskey="h">View history</a></span></li>
			</ul>
</div>
<div id="p-cactions" role="navigation" class="vectorMenu emptyPortlet" aria-labelledby="p-cactions-label">
	<h3 id="p-cactions-label"><span>Actions</span><a href="#"></a></h3>
	<div class="menu">
		<ul>
					</ul>
	</div>
</div>
<div id="p-search" role="search">
	<h3><label for="searchInput">Search</label></h3>
	<form action="http://wiki.qt.io/index.php" id="searchform">
					<div id="simpleSearch">
					<input type="search" name="search" placeholder="Search" title="Search Qt Wiki [f]" accesskey="f" id="searchInput" /><input type="hidden" value="Special:Search" name="title" /><input type="submit" name="fulltext" value="Search" title="Search the pages for this text" id="mw-searchButton" class="searchButton mw-fallbackSearchButton" /><input type="submit" name="go" value="Go" title="Go to a page with this exact name if exists" id="searchButton" class="searchButton" />		</div>
	</form>
</div>
				</div>
			</div>
			<div id="mw-panel">
					<div id="p-logo" role="banner"><a style="background-image: url(http://wiki.qt.io/skins/common/images/wiki.png);" href="http://wiki.qt.io/Main_Page"  title="Visit the main page"></a></div>
				<div class="portal" role="navigation" id='p-navigation' aria-labelledby='p-navigation-label'>
	<h3 id='p-navigation-label'>Navigation</h3>
	<div class="body">
		<ul>
			<li id="n-mainpage-description"><a href="http://wiki.qt.io/Main_Page" title="Visit the main page [z]" accesskey="z">Main page</a></li>
			<li id="n-recentchanges"><a href="http://wiki.qt.io/Special:RecentChanges" title="A list of recent changes in the wiki [r]" accesskey="r">Recent changes</a></li>
			<li id="n-randompage"><a href="http://wiki.qt.io/Special:Random" title="Load a random page [x]" accesskey="x">Random page</a></li>
			<li id="n-help"><a href="https://www.mediawiki.org/wiki/Special:MyLanguage/Help:Contents" title="The place to find out">Help</a></li>
		</ul>
	</div>
</div>
<div class="portal" role="navigation" id='p-tb' aria-labelledby='p-tb-label'>
	<h3 id='p-tb-label'>Tools</h3>
	<div class="body">
		<ul>
			<li id="t-whatlinkshere"><a href="http://wiki.qt.io/Special:WhatLinksHere/DatabaseConnectionDialog/de" title="A list of all wiki pages that link here [j]" accesskey="j">What links here</a></li>
			<li id="t-recentchangeslinked"><a href="http://wiki.qt.io/Special:RecentChangesLinked/DatabaseConnectionDialog/de" title="Recent changes in pages linked from this page [k]" accesskey="k">Related changes</a></li>
			<li id="t-specialpages"><a href="http://wiki.qt.io/Special:SpecialPages" title="A list of all special pages [q]" accesskey="q">Special pages</a></li>
			<li id="t-print"><a href="http://wiki.qt.io/index.php?title=DatabaseConnectionDialog/de&amp;oldid=14133&amp;printable=yes" rel="alternate" title="Printable version of this page [p]" accesskey="p">Printable version</a></li>
			<li id="t-permalink"><a href="http://wiki.qt.io/index.php?title=DatabaseConnectionDialog/de&amp;oldid=14133" title="Permanent link to this revision of the page">Permanent link</a></li>
			<li id="t-info"><a href="http://wiki.qt.io/index.php?title=DatabaseConnectionDialog/de&amp;action=info">Page information</a></li>
		</ul>
	</div>
</div>
			</div>
		</div>
		<div id="footer" role="contentinfo">
							<ul id="footer-info">
											<li id="footer-info-lastmod"> This page was last modified on 16 March 2015, at 15:58.</li>
											<li id="footer-info-viewcount">This page has been accessed 663 times.</li>
									</ul>
							<ul id="footer-places">
											<li id="footer-places-terms"><a href='https://developer.qtcloudservices.com/legal/terms'>Käyttöehdot</a></li>
									</ul>
										<ul id="footer-icons" class="noprint">
					<li id="footer-poweredbyico">
						<a href="http://www.mediawiki.org/"><img src="http://wiki.qt.io/skins/common/images/poweredby_mediawiki_88x31.png" alt="Powered by MediaWiki" width="88" height="31" /></a>
					</li>
				</ul>
						<div style="clear:both"></div>
		</div>
		<script>/*<![CDATA[*/window.jQuery && jQuery.ready();/*]]>*/</script><script>if(window.mw){
mw.loader.state({"site":"loading","user":"ready","user.groups":"ready"});
}</script>
<script>if(window.mw){
mw.loader.load(["mediawiki.action.view.postEdit","mediawiki.user","mediawiki.hidpi","mediawiki.page.ready","mediawiki.searchSuggest","skins.vector.collapsibleNav"],null,true);
}</script>
<script src="http://wiki.qt.io/load.php?debug=false&amp;lang=en&amp;modules=site&amp;only=scripts&amp;skin=vector&amp;*"></script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','http://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-54043535-2', 'auto');
  ga('send', 'pageview');

</script>
<script>if(window.mw){
mw.config.set({"wgBackendResponseTime":244});
}</script>
	</body>

<!-- Mirrored from wiki.qt.io/index.php?title=DatabaseConnectionDialog/de&oldid=14133 by HTTrack Website Copier/3.x [XR&CO'2013], Thu, 05 Nov 2015 10:57:57 GMT -->
</html>
