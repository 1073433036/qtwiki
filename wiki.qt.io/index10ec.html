<!DOCTYPE html>
<html lang="en" dir="ltr" class="client-nojs">

<!-- Mirrored from wiki.qt.io/index.php?title=Introduction_to_Qt_Quick&printable=yes by HTTrack Website Copier/3.x [XR&CO'2013], Thu, 05 Nov 2015 12:06:01 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<meta charset="UTF-8" />
<title>Introduction to Qt Quick - Qt Wiki</title>
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />
<meta name="generator" content="MediaWiki 1.23.3" />
<meta name="robots" content="noindex,follow" />
<link rel="shortcut icon" href="favicon.ico" />
<link rel="search" type="application/opensearchdescription+xml" href="opensearch_desc.php" title="Qt Wiki (en)" />
<link rel="EditURI" type="application/rsd+xml" href="api251f.php?action=rsd" />
<link rel="alternate" type="application/atom+xml" title="Qt Wiki Atom feed" href="apidf90.php?title=Special:RecentChanges&amp;feed=atom" />
<link rel="stylesheet" href="load6077.css?debug=false&amp;lang=en&amp;modules=mediawiki.legacy.commonPrint%2Cshared%7Cmediawiki.skinning.interface%7Cmediawiki.ui.button%7Cskins.vector.styles&amp;only=styles&amp;printable=1&amp;skin=vector&amp;*" />
<meta name="ResourceLoaderDynamicStyles" content="" />
<link rel="stylesheet" href="load8b5e.css?debug=false&amp;lang=en&amp;modules=site&amp;only=styles&amp;printable=1&amp;skin=vector&amp;*" />
<style>a:lang(ar),a:lang(kk-arab),a:lang(mzn),a:lang(ps),a:lang(ur){text-decoration:none}
/* cache key: qtio_wiki:resourceloader:filter:minify-css:7:e91d7bc946738c8892a88ad5616a59ba */</style>
<script src="load041f.php?debug=false&amp;lang=en&amp;modules=startup&amp;only=scripts&amp;printable=1&amp;skin=vector&amp;*"></script>
<script>if(window.mw){
mw.config.set({"wgCanonicalNamespace":"","wgCanonicalSpecialPageName":false,"wgNamespaceNumber":0,"wgPageName":"Introduction_to_Qt_Quick","wgTitle":"Introduction to Qt Quick","wgCurRevisionId":19255,"wgRevisionId":19255,"wgArticleId":1076,"wgIsArticle":true,"wgIsRedirect":false,"wgAction":"view","wgUserName":null,"wgUserGroups":["*"],"wgCategories":["Developing with Qt::Qt Quick","Learning::Whitepapers"],"wgBreakFrames":false,"wgPageContentLanguage":"en","wgPageContentModel":"wikitext","wgSeparatorTransformTable":["",""],"wgDigitTransformTable":["",""],"wgDefaultDateFormat":"dmy","wgMonthNames":["","January","February","March","April","May","June","July","August","September","October","November","December"],"wgMonthNamesShort":["","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"wgRelevantPageName":"Introduction_to_Qt_Quick","wgIsProbablyEditable":false,"wgRestrictionEdit":[],"wgRestrictionMove":[],"wgWikiEditorEnabledModules":{"toolbar":true,"dialogs":true,"hidesig":true,"preview":true,"previewDialog":false,"publish":true}});
}</script><script>if(window.mw){
mw.loader.implement("user.options",function($,jQuery){mw.user.options.set({"ccmeonemails":0,"cols":80,"date":"default","diffonly":0,"disablemail":0,"editfont":"default","editondblclick":0,"editsectiononrightclick":0,"enotifminoredits":0,"enotifrevealaddr":0,"enotifusertalkpages":1,"enotifwatchlistpages":1,"extendwatchlist":0,"fancysig":0,"forceeditsummary":0,"gender":"unknown","hideminor":0,"hidepatrolled":0,"imagesize":2,"math":1,"minordefault":0,"newpageshidepatrolled":0,"nickname":"","norollbackdiff":0,"numberheadings":0,"previewonfirst":0,"previewontop":1,"rcdays":7,"rclimit":50,"rows":25,"showhiddencats":0,"shownumberswatching":1,"showtoolbar":1,"skin":"vector","stubthreshold":0,"thumbsize":2,"underline":2,"uselivepreview":0,"usenewrc":0,"watchcreations":1,"watchdefault":1,"watchdeletion":0,"watchlistdays":3,"watchlisthideanons":0,"watchlisthidebots":0,"watchlisthideliu":0,"watchlisthideminor":0,"watchlisthideown":0,"watchlisthidepatrolled":0,"watchmoves":0,"wllimit":250,
"useeditwarning":1,"prefershttps":1,"usebetatoolbar":1,"usebetatoolbar-cgd":1,"wikieditor-preview":1,"wikieditor-publish":1,"language":"en","variant-gan":"gan","variant-iu":"iu","variant-kk":"kk","variant-ku":"ku","variant-shi":"shi","variant-sr":"sr","variant-tg":"tg","variant-uz":"uz","variant-zh":"zh","searchNs0":true,"searchNs1":false,"searchNs2":false,"searchNs3":false,"searchNs4":false,"searchNs5":false,"searchNs6":false,"searchNs7":false,"searchNs8":false,"searchNs9":false,"searchNs10":false,"searchNs11":false,"searchNs12":false,"searchNs13":false,"searchNs14":false,"searchNs15":false,"searchNs500":false,"searchNs501":false,"searchNs700":false,"searchNs701":false,"variant":"en"});},{},{});mw.loader.implement("user.tokens",function($,jQuery){mw.user.tokens.set({"editToken":"+\\","patrolToken":false,"watchToken":false});},{},{});
/* cache key: qtio_wiki:resourceloader:filter:minify-js:7:9743cb8b8019d46de5946bfe6dfa04d7 */
}</script>
<script>if(window.mw){
mw.loader.load(["mediawiki.page.startup","mediawiki.legacy.wikibits","mediawiki.legacy.ajax","skins.vector.js"]);
}</script>
<style type="text/css">/*<![CDATA[*/
.source-cpp-qt {line-height: normal;}
.source-cpp-qt li, .source-cpp-qt pre {
	line-height: normal; border: 0px none white;
}
/**
 * GeSHi Dynamically Generated Stylesheet
 * --------------------------------------
 * Dynamically generated stylesheet for cpp-qt
 * CSS class: source-cpp-qt, CSS id: 
 * GeSHi (C) 2004 - 2007 Nigel McNie, 2007 - 2008 Benny Baumann
 * (http://qbnz.com/highlighter/ and http://geshi.org/)
 * --------------------------------------
 */
.cpp-qt.source-cpp-qt .de1, .cpp-qt.source-cpp-qt .de2 {font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;font-family: monospace, monospace;}
.cpp-qt.source-cpp-qt  {font-family:monospace;}
.cpp-qt.source-cpp-qt .imp {font-weight: bold; color: red;}
.cpp-qt.source-cpp-qt li, .cpp-qt.source-cpp-qt .li1 {font-weight: normal; vertical-align:top;}
.cpp-qt.source-cpp-qt .ln {width:1px;text-align:right;margin:0;padding:0 2px;vertical-align:top;}
.cpp-qt.source-cpp-qt .li2 {font-weight: bold; vertical-align:top;}
.cpp-qt.source-cpp-qt .kw1 {color: #000000; font-weight:bold;}
.cpp-qt.source-cpp-qt .kw2 {color: #0057AE;}
.cpp-qt.source-cpp-qt .kw3 {color: #2B74C7;}
.cpp-qt.source-cpp-qt .kw4 {color: #0057AE;}
.cpp-qt.source-cpp-qt .kw5 {color: #22aadd;}
.cpp-qt.source-cpp-qt .co1 {color: #888888;}
.cpp-qt.source-cpp-qt .co2 {color: #006E28;}
.cpp-qt.source-cpp-qt .coMULTI {color: #888888; font-style: italic;}
.cpp-qt.source-cpp-qt .es0 {color: #000099; font-weight: bold;}
.cpp-qt.source-cpp-qt .es1 {color: #000099; font-weight: bold;}
.cpp-qt.source-cpp-qt .es2 {color: #660099; font-weight: bold;}
.cpp-qt.source-cpp-qt .es3 {color: #660099; font-weight: bold;}
.cpp-qt.source-cpp-qt .es4 {color: #660099; font-weight: bold;}
.cpp-qt.source-cpp-qt .es5 {color: #006699; font-weight: bold;}
.cpp-qt.source-cpp-qt .br0 {color: #006E28;}
.cpp-qt.source-cpp-qt .sy0 {color: #006E28;}
.cpp-qt.source-cpp-qt .st0 {color: #BF0303;}
.cpp-qt.source-cpp-qt .nu0 {color: #B08000;}
.cpp-qt.source-cpp-qt .nu6 {color: #208080;}
.cpp-qt.source-cpp-qt .nu8 {color: #208080;}
.cpp-qt.source-cpp-qt .nu12 {color: #208080;}
.cpp-qt.source-cpp-qt .nu16 {color:#800080;}
.cpp-qt.source-cpp-qt .nu17 {color:#800080;}
.cpp-qt.source-cpp-qt .nu18 {color:#800080;}
.cpp-qt.source-cpp-qt .nu19 {color:#800080;}
.cpp-qt.source-cpp-qt .me1 {color: #2B74C7;}
.cpp-qt.source-cpp-qt .me2 {color: #2B74C7;}
.cpp-qt.source-cpp-qt .me3 {color: #2B74C7;}
.cpp-qt.source-cpp-qt .ln-xtra, .cpp-qt.source-cpp-qt li.ln-xtra, .cpp-qt.source-cpp-qt div.ln-xtra {background-color: #ffc;}
.cpp-qt.source-cpp-qt span.xtra { display:block; }

/*]]>*/
</style><!--[if lt IE 7]><style type="text/css">body{behavior:url("/skins/vector/csshover.min.htc")}</style><![endif]--></head>
<body class="mediawiki ltr sitedir-ltr ns-0 ns-subject page-Introduction_to_Qt_Quick skin-vector action-view vector-animateLayout">
		<div id="mw-page-base" class="noprint"></div>
		<div id="mw-head-base" class="noprint"></div>
		<div id="content" class="mw-body" role="main">
			<a id="top"></a>
			<div id="mw-js-message" style="display:none;"></div>
						<h1 id="firstHeading" class="firstHeading" lang="en"><span dir="auto">Introduction to Qt Quick</span></h1>
						<div id="bodyContent">
								<div id="siteSub">From Qt Wiki</div>
								<div id="contentSub"></div>
												<div id="jump-to-nav" class="mw-jump">
					Jump to:					<a href="#mw-navigation">navigation</a>, 					<a href="#p-search">search</a>
				</div>
				<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr"><div style="background:#eeeeee;padding:2px;">
<p><strong class="selflink">En</strong>
<span style="color:#ccc;">Ar</span>
<span style="color:#ccc;">Bg</span>
<span style="color:#ccc;">De</span>
<span style="color:#ccc;">El</span>
<span style="color:#ccc;">Es</span>
<span style="color:#ccc;">Fa</span>
<span style="color:#ccc;">Fi</span>
<span style="color:#ccc;">Fr</span>
<span style="color:#ccc;">Hi</span>
<span style="color:#ccc;">Hu</span>
<span style="color:#ccc;">It</span>
<span style="color:#ccc;">Ja</span>
<span style="color:#ccc;">Kn</span>
<span style="color:#ccc;">Ko</span>
<span style="color:#ccc;">Ms</span>
<span style="color:#ccc;">Nl</span>
<span style="color:#ccc;">Pl</span>
<span style="color:#ccc;">Pt</span>
<span style="color:#ccc;">Ru</span>
<span style="color:#ccc;">Th</span>
<span style="color:#ccc;">Tr</span>
<span style="color:#ccc;">Uk</span>
<span style="color:#ccc;">Zh</span>
</p>
</div>
<p>Today's consumers and enterprise users are tough to please. They grew up using slick UIs on their game consoles and seeing even fancier UIs at the movies. Specifications and feature lists alone are no longer selling points; they are means to an end. Visual impact and experience WOW are the selling points that matter today, and the consumer expects this visual delight whether they are using a powerful corporate notebook computer, a mobile device, a sleek tablet, or a set-top box.
</p><p>Delivering this experience requires designers and developers to work together like never before. Gone are the days where designers could throw pixel maps over the wall and expect developers to implement their vision. So too are the days when developers could code purely for performance without regard to visual appeal. Design/development/test must become an iterative cycle, not a linear path. The Qt framework is known for high runtime performance and small footprint, making it ideal for mobile, embedded, and netbook applications. The Qt 4.7 release extends Qt with QML, a declarative language that codes the way designers think, and Qt Quick elements that are the building blocks for applications, Each frame of a story board is declared as a branch in an element tree; each visual aspect of a frame is declared as a property of elements on the branch; each transition between frames can be decorated with a variety of animations and effects.
</p><p>The Qt Quick runtime implements the UI and provides direct access to native APIs and performance boosts with C++ extensions where appropriate. And because the runtime is implemented in Qt, it delivers cross-platform reach and flexibility.
</p><p>Qt Creator, a development environment built for collaboration between designers and developers, supports Qt Quick. Designers work in a visual environment, developers work in a full-featured IDE, and Qt Creator supports round-trip iteration from design, to code, to test, and back to design.
</p><p>Qt is built for the way product teams work today. Core business logic is coded by developers and optimized for performance, the interface is crafted by designers working with visual tools, and integrated tooling supports round-trip iteration between the disciplines.
</p>
<div id="toc" class="toc"><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Overview"><span class="tocnumber">1</span> <span class="toctext">Overview</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#A_short_introduction_to_QML"><span class="tocnumber">2</span> <span class="toctext">A short introduction to QML</span></a>
<ul>
<li class="toclevel-2 tocsection-3"><a href="#QML_language"><span class="tocnumber">2.1</span> <span class="toctext">QML language</span></a></li>
<li class="toclevel-2 tocsection-6"><a href="#QML_elements"><span class="tocnumber">2.2</span> <span class="toctext">QML elements</span></a></li>
<li class="toclevel-2 tocsection-7"><a href="#Visual_elements:_Hello_World"><span class="tocnumber">2.3</span> <span class="toctext">Visual elements: Hello World</span></a></li>
<li class="toclevel-2 tocsection-10"><a href="#Layering_visual_elements"><span class="tocnumber">2.4</span> <span class="toctext">Layering visual elements</span></a></li>
<li class="toclevel-2 tocsection-12"><a href="#Interaction_elements:_mouse_and_touch"><span class="tocnumber">2.5</span> <span class="toctext">Interaction elements: mouse and touch</span></a></li>
<li class="toclevel-2 tocsection-14"><a href="#State_declarations"><span class="tocnumber">2.6</span> <span class="toctext">State declarations</span></a></li>
<li class="toclevel-2 tocsection-17"><a href="#Animation_elements:_fluid_transitions"><span class="tocnumber">2.7</span> <span class="toctext">Animation elements: fluid transitions</span></a></li>
<li class="toclevel-2 tocsection-20"><a href="#Building_reusable_components"><span class="tocnumber">2.8</span> <span class="toctext">Building reusable components</span></a></li>
<li class="toclevel-2 tocsection-23"><a href="#Using_pre-built_Qt_Components"><span class="tocnumber">2.9</span> <span class="toctext">Using pre-built Qt Components</span></a></li>
<li class="toclevel-2 tocsection-25"><a href="#Model-View_pattern"><span class="tocnumber">2.10</span> <span class="toctext">Model-View pattern</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-29"><a href="#Qt_Creator"><span class="tocnumber">3</span> <span class="toctext">Qt Creator</span></a>
<ul>
<li class="toclevel-2 tocsection-30"><a href="#Qt_Creator_for_Designers"><span class="tocnumber">3.1</span> <span class="toctext">Qt Creator for Designers</span></a></li>
<li class="toclevel-2 tocsection-34"><a href="#Qt_Creator_for_Developers"><span class="tocnumber">3.2</span> <span class="toctext">Qt Creator for Developers</span></a></li>
<li class="toclevel-2 tocsection-39"><a href="#Integration_with_C.2B.2B_applications"><span class="tocnumber">3.3</span> <span class="toctext">Integration with C++ applications</span></a></li>
<li class="toclevel-2 tocsection-42"><a href="#Sharing_data_between_C.2B.2B_and_QML"><span class="tocnumber">3.4</span> <span class="toctext">Sharing data between C++ and QML</span></a></li>
<li class="toclevel-2 tocsection-44"><a href="#QML_views_into_C.2B.2B_models"><span class="tocnumber">3.5</span> <span class="toctext">QML views into C++ models</span></a></li>
<li class="toclevel-2 tocsection-47"><a href="#Qt_signal_-.3E_QML_handler"><span class="tocnumber">3.6</span> <span class="toctext">Qt signal -&gt; QML handler</span></a></li>
<li class="toclevel-2 tocsection-48"><a href="#Extending_QML_from_C.2B.2B"><span class="tocnumber">3.7</span> <span class="toctext">Extending QML from C++</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-51"><a href="#Getting_started"><span class="tocnumber">4</span> <span class="toctext">Getting started</span></a></li>
</ul>
</div>

<h1><span class="mw-headline" id="Overview">Overview</span></h1>
<p>Qt's new user interface technology consists of the QML language, elements that provide basic building blocks of the language, the QtDeclarative (C++) module that provides a runtime for the QML language, and a scripting language based on JavaScript that allows developers to implement logic in their projects with no C++ coding required. This technology set is supported by the Qt Creator tool that now includes a visual designer and other extensions to support creating, testing, debugging, and optimizing projects.
</p><p>QML provides mechanisms to declaratively build an object tree using elements. QML improves the integration between JavaScript and Qt's existing QObject based type system, adds support for automatic property bindings and provides network transparency at the language level.
Elements are a sophisticated set of graphical and behavioral building blocks. There are currently over 80 elements in the language, including visual elements such Rectangle, Gradient, and AnimatedImage; interaction elements including MouseArea and Flickable; state elements including PropertyChanges and StateChangeScript; and transition elements including Transition and SequentialAnimation. There are also elements to handle data, views, position, and other sophisticated aspects of building fluid UIs without C++ code.
</p><p>Elements are combined together in QML documents to build components ranging in complexity from simple buttons and sliders, to complete internet-enabled applications like a Flickr photo browser. Developers and designers are free to build their own or choose from libraries of pre-built components.
</p><p>Qt Quick builds on Qt's existing strengths. QML can be used to incrementally extend an existing application or to build completely new applications. QML is fully extensible from C++.
</p>
<h1><span class="mw-headline" id="A_short_introduction_to_QML">A short introduction to QML</span></h1>
<p>QML is a rich language, and a full treatment is beyond the scope of this paper. This paper will instead provide an introduction to what QML can do and how to integrate QML with C++ to get the best of both worlds: high-performance business logic built in C++ and highly dynamic user interfaces using QML. A full treatment of QML is available in the online documentation.
</p>
<h2><span class="mw-headline" id="QML_language">QML language</span></h2>
<p>QML is a declarative language designed to describe the user interface of a program: both what it looks like, and how it behaves. In QML, a user interface is specified as a tree of objects with properties. JavaScript is used as a scripting language in QML.
</p><p>Snippet 1 shows the basic QML syntax. The first statement imports the QtQuick module version 1.1 which implements the runtime environment in which the application will execute. To prevent elements introduced in later versions from affecting existing documents, the element types available within a document are controlled by the imported Modules. This versioning of QML allows developers to manage compatibility.
</p><p>The snippet creates two objects: a Rectangle object and its child Image object. Objects are specified by their type, followed by a pair of braces in between which additional data can be defined for the object, such as its property values and any child objects.
</p><p>Properties are specified with a property: value syntax. Notice the Image object has a property named source, which has been assigned the value "pics/logo.png". The property and its value are separated by a colon.
</p><p>Commenting in QML is similar to that used in C++
</p>
<ul>
<li> Single line comments start with // and finish at the end of the line.
</li>
<li> Multiline comments start with /* and finish with */
</li>
</ul>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="cpp-qt source-cpp-qt"><pre class="de1">import QtQuick <span class="nu16">1.1</span>
&#160;
Rectangle <span class="br0">&#123;</span>
 width<span class="sy0">:</span> <span class="nu0">200</span> <span class="co1">// this is an inline comment</span>
 height<span class="sy0">:</span> <span class="nu0">200</span>
 color<span class="sy0">:</span> <span class="st0">&quot;blue&quot;</span>
 <span class="coMULTI">/*
 And this is a
 Multi-line comment.
 */</span>
&#160;
 Image <span class="br0">&#123;</span>
 source<span class="sy0">:</span> <span class="st0">&quot;pics/logo.png&quot;</span>
 anchors.<span class="me1">centerIn</span><span class="sy0">:</span> parent
 <span class="br0">&#125;</span>
<span class="br0">&#125;</span></pre></div></div>
<h3><span class="mw-headline" id="Snippet_1:_Basic_QML_syntax">Snippet 1: Basic QML syntax</span></h3>
<p>Within objects, properties are bound to values using the property&#160;: expression statement. There are two aspects of this statement that bear explanation. 
</p><p>Firstly, expression is a JavaScript expression, which means you could set the properties based on a calculation, a condition, or other complex JavaScript manipulations. 
</p><p>You can use JavaScript expressions in most places where constants are allowed. For example, Snippet 2 binds the width and height of a rectangle to the result of a JavaScript expression. Admittedly this trivial expression is no more useful than the constants used in Snippet 1, but this same capability allows you to bind the width of the rectangle to some fraction of the width of a parent element.
</p><p>Secondly, binding is different from assignment. In an assignment, the value of a property is set when the assignment statement is executed and is fixed thereafter until and unless the statement is executed again. In a binding, a property is set when the binding statement is first executed, but will change if and when the result of the expression used to set the property changes. (If desired, you could assign a value to the property using property = expression inside a JavaScript block.)
</p>
<ul>
<li> <b>Tech note:</b> Property binding is achieved by a NOTIFY signal being declared from within a Qt C++ object using the Q_PROPERTY() macro in a class that inherits QObject. If you do not know what that means, don't worry. If you plan to build your application purely in QML, you do not need to know this as it is merely part of the plumbing that Qt Quick handles for you. If you plan to include some C++ in your application, the Qt C++ developers on the team will already know what this means.
</li>
</ul>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="cpp-qt source-cpp-qt"><pre class="de1">import QtQuick <span class="nu16">1.1</span>
&#160;
Rectangle <span class="br0">&#123;</span>
 width<span class="sy0">:</span> <span class="nu0">2</span> <span class="sy0">*</span> <span class="nu0">100</span>
 height<span class="sy0">:</span> <span class="nu0">40</span> <span class="sy0">*</span> <span class="nu0">5</span>
 color<span class="sy0">:</span> <span class="st0">&quot;blue&quot;</span>
&#160;
Image <span class="br0">&#123;</span>
 source<span class="sy0">:</span> <span class="st0">&quot;pics/logo.png&quot;</span>
 anchors.<span class="me1">centerIn</span><span class="sy0">:</span> parent
 <span class="br0">&#125;</span>
<span class="br0">&#125;</span></pre></div></div>
<h3><span class="mw-headline" id="Snippet_2:_JavaScript_expressions">Snippet 2: JavaScript expressions</span></h3>
<p>The full QML language supports object identifiers, type-safe properties, signal handlers, and a lot of other details that we don't want to distract you with here. When you are ready for that level of detail, check out the Introduction to the QML Language.
</p>
<h2><span class="mw-headline" id="QML_elements">QML elements</span></h2>
<p>Once you understand the basic underpinnings of the QML language, it's time to dig into the real meat of the technology: Elements. An Element is a template for a basic building block out of which a QML program will be built. QML supports for example visual elements of types Rectangle and Text, interaction elements of type MouseArea and Flipable, and animation elements of type RotationAnimation and Transition. There are also complex element types that allow the developer to work with data, implement views in model-view architectures, and other housekeeping element types that will just add confusion at this point.
</p><p>All elements include one or more properties (for example color) that can be controlled by the developer and many elements include signal handlers (for example onClicked) that can be used to react to events or changes in state.
</p>
<h2><span class="mw-headline" id="Visual_elements:_Hello_World">Visual elements: Hello World</span></h2>
<p>We have progressed quite far enough without presenting the obligatory Hello World example. Here is the code required to place the text Hello World! on top of a simple background rectangle:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="cpp-qt source-cpp-qt"><pre class="de1">import QtQuick <span class="nu16">1.1</span>
&#160;
Rectangle <span class="br0">&#123;</span>
 width<span class="sy0">:</span> <span class="nu0">300</span>
 height<span class="sy0">:</span> <span class="nu0">200</span>
 Text <span class="br0">&#123;</span>
 anchors.<span class="me1">horizontalCenter</span><span class="sy0">:</span> parent.<span class="me1">horizontalCenter</span>
 anchors.<span class="me1">verticalCenter</span><span class="sy0">:</span> parent.<span class="me1">verticalCenter</span>
 text<span class="sy0">:</span> <span class="st0">&quot;Hello World&quot;</span>
 <span class="br0">&#125;</span>
<span class="br0">&#125;</span></pre></div></div>
<h3><span class="mw-headline" id="Snippet_3:_Hello_World">Snippet 3: Hello World</span></h3>
<p>Let's dissect this simple code. The Hello World example in Snippet 3 is a QML document, meaning it is a complete block of QML source code, ready to run. QML documents generally correspond to plain text files stored on a disk or network resource, but can also be constructed directly from text data.
</p><p>A QML document always begins with one or more import statements. Here you see the import of Qt Quick 1.1.
</p><p>Next you see the Rectangle element template used to create an active object. Objects can contain other objects, creating parent-child relationships. In the code above, the Rectangle object is parent to the Text object. The Rectangle element also defines a top-level window for managing the visual bounds and focus segmentation of the full UI.
</p><p>Tech Note: The children property of elements contains a list of all visual children of the element; the resources property contains an equivalent list of all non-visual objects. Both lists are populated implicitly by default, or you can explicitly populate them if convenient. A third property, data, is a list containing objects in either the children or resources lists. You cannot explicitly populate the data property but it may be useful if you need to iterate through a list of visual and non-visual objects.
</p><p>So you can write:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="cpp-qt source-cpp-qt"><pre class="de1"> Item <span class="br0">&#123;</span>
 Text <span class="br0">&#123;</span><span class="br0">&#125;</span>
 Rectangle <span class="br0">&#123;</span><span class="br0">&#125;</span>
 Timer <span class="br0">&#123;</span><span class="br0">&#125;</span>
 <span class="br0">&#125;</span></pre></div></div>
<p>instead of:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="cpp-qt source-cpp-qt"><pre class="de1"> Item <span class="br0">&#123;</span>
 children<span class="sy0">:</span> <span class="br0">&#91;</span> <span class="co1">//default property and implicitly assigned</span>
 Text <span class="br0">&#123;</span><span class="br0">&#125;</span><span class="sy0">,</span>
 Rectangle <span class="br0">&#123;</span><span class="br0">&#125;</span>
 <span class="br0">&#93;</span>
 resources<span class="sy0">:</span> <span class="br0">&#91;</span> <span class="co1">//default property and implicitly assigned</span>
 Timer <span class="br0">&#123;</span><span class="br0">&#125;</span>
 <span class="br0">&#93;</span>
 <span class="br0">&#125;</span></pre></div></div>
<p>The anchors.horizontalCenter: parent.horizontalCenter statement aligns the center of the text with the center of the parent rectangle. Anchors provide a way to position an item by specifying its relationship with parent or sibling items. (Note – if you check the online documentation for the Rectangle element you will not see the anchors.horizontalCenter property listed. Look closely and you will see the Rectangle element inherits all the properties of the Qt Quick Item element; the Item element provides the anchors.horizontalCenter property.)
</p><p>There are currently seventeen anchor properties available, allowing you to align, center, and fill elements relative to each other and to set margins and offsets. For example, Snippet 4 shows a Text element anchored to an Image element, horizontally centered and vertically below, with a margin.
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="cpp-qt source-cpp-qt"><pre class="de1">Image <span class="br0">&#123;</span> id<span class="sy0">:</span> pic<span class="sy0">;</span> … <span class="br0">&#125;</span>
 Text <span class="br0">&#123;</span>
 id<span class="sy0">:</span> label
 anchors.<span class="me1">horizontalCenter</span><span class="sy0">:</span> pic.<span class="me1">horizontalCenter</span>
 anchors.<span class="me1">top</span><span class="sy0">:</span> pic.<span class="me1">bottom</span>
 anchors.<span class="me1">topMargin</span><span class="sy0">:</span> <span class="nu0">5</span>
 …
 <span class="br0">&#125;</span></pre></div></div>
<h3><span class="mw-headline" id="Snippet_4:_Use_anchors_to_align_elements">Snippet 4: Use anchors to align elements</span></h3>
<h2><span class="mw-headline" id="Layering_visual_elements">Layering visual elements</span></h2>
<p>Visual elements can be layered on top of each other with transparency using opacity&#160;: real where real varies from 0 (transparent) to 1 (opaque). For performance reasons this should be used sparingly, especially in animations as each layer in the scene will need to be rendered at runtime for each frame of the animation. This may be fine for rapid prototyping, but before final deployment it is best to pre-render as much of the scene as possible, then simply load pixel maps at runtime.
</p><p>Snippet 5 produces two offset and overlapping rectangles, one red and one blue, with transparency invoked such that the overlapping square will be purple. Notice how the child (blue) rectangle inherits the 50% opacity from its parent (red) rectangle.
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="cpp-qt source-cpp-qt"><pre class="de1"> Rectangle <span class="br0">&#123;</span>
 id<span class="sy0">:</span> parentRectangle
 opacity<span class="sy0">:</span> <span class="nu16">0.5</span>
 color<span class="sy0">:</span> <span class="st0">&quot;red&quot;</span>
 width<span class="sy0">:</span> <span class="nu0">100</span><span class="sy0">;</span> height<span class="sy0">:</span> <span class="nu0">100</span>
 Rectangle <span class="br0">&#123;</span>
 id<span class="sy0">:</span> childRectangle
 color<span class="sy0">:</span> <span class="st0">&quot;blue&quot;</span>
 x<span class="sy0">:</span> <span class="nu0">50</span><span class="sy0">;</span> y<span class="sy0">:</span> <span class="nu0">50</span><span class="sy0">;</span> width<span class="sy0">:</span> <span class="nu0">100</span><span class="sy0">;</span> height<span class="sy0">:</span> <span class="nu0">100</span>
 <span class="br0">&#125;</span>
 <span class="br0">&#125;</span></pre></div></div>
<h3><span class="mw-headline" id="Snippet_5:_Use_transparency_sparingly">Snippet 5: Use transparency sparingly</span></h3>
<p>Tech Note: Inherited Elements always inherit their base Element properties. For example a Rectangle is an Item, so all properties of an Item will always be present in a Rectangle Element. Child objects can sometimes inherit the properties of their parents due to how QGraphicsView works. This means that when you embed an element within another element certain properties have an effect on its children. For example in Snippet 5 the childRectangle element is affected by the 50% opacity of the parentRectangle element. Similarly, if the parentRectangle was rotated, the childRectangle would keep its rotation relative to parentRectangle but would be rotated relative to the scene.
</p>
<h2><span class="mw-headline" id="Interaction_elements:_mouse_and_touch">Interaction elements: mouse and touch</span></h2>
<p>To add mouse or touch interaction you need to add a MouseArea object. The MouseArea object lets the user click and drag the mouse (or touch point). Other available interaction elements include Flickable, Flipable, and FocusScope.
</p><p>Note that the MouseArea object can be separate from any visually apparent objects, providing the designer flexibility. It is quite possible, for example, to create a visual representation of button for a user to click and then surround the visual representation with a larger mouse area that allows the user to "miss" the visible element by a few pixels.
</p><p>To introduce a mouse region to the Hello World example, the rectangle containing the text is made a child of a new rectangle that will define the mouse area.
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="cpp-qt source-cpp-qt"><pre class="de1">import <span class="kw5">Qt</span> <span class="nu16">4.7</span>
&#160;
Rectangle <span class="br0">&#123;</span>
 color<span class="sy0">:</span> <span class="st0">&quot;#ff0000&quot;</span>
 width<span class="sy0">:</span> <span class="nu0">310</span>
 height<span class="sy0">:</span> <span class="nu0">210</span>
 MouseArea <span class="br0">&#123;</span>
 anchors.<span class="me1">fill</span><span class="sy0">:</span> parent
 onClicked<span class="sy0">:</span> <span class="br0">&#123;</span>
 <span class="kw1">if</span><span class="br0">&#40;</span>parent.<span class="me1">color</span> <span class="sy0">==</span> <span class="st0">&quot;#ff0000&quot;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
 parent.<span class="me1">color</span> <span class="sy0">=</span> <span class="st0">&quot;#ff9900&quot;</span><span class="sy0">;</span>
 <span class="br0">&#125;</span> <span class="kw1">else</span> <span class="br0">&#123;</span>
 parent.<span class="me1">color</span> <span class="sy0">=</span> <span class="st0">&quot;#ff0000&quot;</span><span class="sy0">;</span>
 <span class="br0">&#125;</span>
 <span class="br0">&#125;</span>
 <span class="br0">&#125;</span>
 Rectangle <span class="br0">&#123;</span>
 width<span class="sy0">:</span> <span class="nu0">300</span>
 height<span class="sy0">:</span> <span class="nu0">200</span>
 anchors.<span class="me1">horizontalCenter</span><span class="sy0">:</span> parent.<span class="me1">horizontalCenter</span>
 anchors.<span class="me1">verticalCenter</span><span class="sy0">:</span> parent.<span class="me1">verticalCenter</span>
&#160;
Text <span class="br0">&#123;</span>
 anchors.<span class="me1">horizontalCenter</span><span class="sy0">:</span> parent.<span class="me1">horizontalCenter</span>
 anchors.<span class="me1">verticalCenter</span><span class="sy0">:</span> parent.<span class="me1">verticalCenter</span>
 text<span class="sy0">:</span> <span class="st0">&quot;Hello World&quot;</span>
 <span class="br0">&#125;</span>
 <span class="br0">&#125;</span>
<span class="br0">&#125;</span></pre></div></div>
<h3><span class="mw-headline" id="Snippet_6:_Mouse-touch_interaction">Snippet 6: Mouse-touch interaction</span></h3>
<p>The MouseArea element includes signal handlers that allow you to write JavaScript expressions that will be called upon certain events or changes in state. Available handlers include onClicked, onEntered, onExited, onPressed and onReleased. In the example above, the onClicked signal handler toggles the color of the rectangle.
</p><p>This example changes the color of the rectangle in response to any valid click. A click is defined as a press followed by a release, both inside the MouseArea (pressing, moving outside the MouseArea, and then moving back inside and releasing is also considered a click). The full syntax for the handler is MouseArea::onClicked ( mouse ) where the mouse parameter provides information about the click, including the x and y position of the release of the click, and whether the click was held. Our example does not care where the click occurred.
</p><p>Snippet 6 shows a simple case of visualizing state by changing one value in response to one event. The onClicked statement will quickly become ugly if you try to change multiple values in response to multiple states. That's where Qt Quick state declarations come in.
</p>
<h2><span class="mw-headline" id="State_declarations">State declarations</span></h2>
<p>Qt Quick State declarations define a set of property value changes from the base state. The base state is the initial declaration of property values, and is expressed by using an empty string as the state name. After a state change you can always revert to the base state by assigning state="" .
</p><p>In Snippet 7, states for two colors are implemented. In the definition of the red rectangle, the id property is set. Named objects can be referenced by siblings or descendants. Two states are also defined: red and orange. The state property is assigned to give the element an initial state.
</p><p>State elements include a when condition that can be used to determine when a state should be applied. Here you see the red state applied when the Mouse Area is currently being pressed.
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="cpp-qt source-cpp-qt"><pre class="de1"> id<span class="sy0">:</span> buttonRect<span class="sy0">;</span>
&#160;
state<span class="sy0">:</span> <span class="st0">&quot;red&quot;</span>
 states<span class="sy0">:</span> <span class="br0">&#91;</span>
 State <span class="br0">&#123;</span>
 name<span class="sy0">:</span> <span class="st0">&quot;red&quot;</span>
 when<span class="sy0">:</span> mouseArea.<span class="me1">pressed</span>  <span class="kw2">true</span>
                PropertyChanges <span class="br0">&#123;</span> 
                    target<span class="sy0">:</span> buttonRect<span class="sy0">;</span> 
                    color<span class="sy0">:</span> <span class="st0">&quot;red&quot;</span><span class="sy0">;</span> 
                    width<span class="sy0">:</span> <span class="nu0">80</span><span class="sy0">;</span> height<span class="sy0">:</span> <span class="nu0">40</span> 
                <span class="br0">&#125;</span>
            <span class="br0">&#125;</span><span class="sy0">,</span>
            State <span class="br0">&#123;</span>
                name<span class="sy0">:</span> <span class="st0">&quot;orange&quot;</span>
                when<span class="sy0">:</span> mouseArea.<span class="me1">pressed</span>  <span class="kw2">false</span>
 PropertyChanges <span class="br0">&#123;</span>
 target<span class="sy0">:</span> buttonRect<span class="sy0">;</span>
 color<span class="sy0">:</span> <span class="st0">&quot;#ff9900&quot;</span><span class="sy0">;</span>
 width<span class="sy0">:</span> <span class="nu0">120</span><span class="sy0">;</span> height<span class="sy0">:</span> <span class="nu0">80</span>
 <span class="br0">&#125;</span>
 <span class="br0">&#125;</span>
 <span class="br0">&#93;</span></pre></div></div>
<h3><span class="mw-headline" id="Snippet_7:_Define_states">Snippet 7: Define states</span></h3>
<p>The defined state not only sets the color for each state, but also the width and height of the rectangle. The orange state provides a larger button. To utilize the states, the mouse region onClicked JavaScript is updated.
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="cpp-qt source-cpp-qt"><pre class="de1"> MouseArea <span class="br0">&#123;</span>
 anchors.<span class="me1">fill</span><span class="sy0">:</span> parent
 onClicked<span class="sy0">:</span> <span class="br0">&#123;</span>
 <span class="kw1">if</span><span class="br0">&#40;</span>parent.<span class="me1">state</span> <span class="sy0">==</span> <span class="st0">&quot;red&quot;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
 parent.<span class="me1">state</span> <span class="sy0">=</span> <span class="st0">&quot;orange&quot;</span>
 <span class="br0">&#125;</span> <span class="kw1">else</span> <span class="br0">&#123;</span>
 parent.<span class="me1">state</span> <span class="sy0">=</span> <span class="st0">&quot;red&quot;</span><span class="sy0">;</span>
 <span class="br0">&#125;</span>
 <span class="br0">&#125;</span>
 <span class="br0">&#125;</span></pre></div></div>
<h3><span class="mw-headline" id="Snippet_8:_Simple_state_transitions">Snippet 8: Simple state transitions</span></h3>
<p>It is possible to define a set of states using code, as in this example, or using the graphical Qt Quick Designer built into the Qt Creator IDE.
</p>
<h2><span class="mw-headline" id="Animation_elements:_fluid_transitions">Animation elements: fluid transitions</span></h2>
<p>Transition elements make it easy to create fluid animation effects between states of a UI. Transition elements can use the information from the base state and the target state to interpolate property changes using Animation elements. Animation elements in turn can use a number of different parametized easing curves and grouping techniques, giving the developer and designer a high degree of control over how and when properties change during a state transition.
</p><p>Transitions between states are only one animation possibility in Qt Quick. Suppose a Rectangle's movement - that is, changes in its x or y property values - should be animated. The semantics of the animation differ depending on whether you want to create:
</p>
<ul>
<li> An animation that moves the Rectangle as soon as it is created, to a known position
</li>
<li> An animation that only triggers when the Rectangle is moved by external sources - for example, when the mouse is clicked, animate the movement to the mouse position
</li>
<li> An animation that triggers when a particular signal is received
</li>
<li> A standalone animation that is not bound to the Rectangle's movement, but instead can be started and stopped from script as required
</li>
<li> An animation that only triggers during state changes
</li>
</ul>
<p>There is a detailed treatment of these possibilities in the animation in Qt Quick article in the online documentation. As an introduction, let's consider the case where transitions provide animations between state changes.
</p><p>The code in Snippet 9 animates the movement of a rectangle. The snippet creates a Rectangle object with two states: the default state, and an added moved state. In the moved state, the rectangle's position changes to (50, 50). The Transition object specifies that when the rectangle changes between the default and the moved state, any changes to the x and y properties should be animated, using an Easing.InOutQuad.
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="cpp-qt source-cpp-qt"><pre class="de1">import QtQuick <span class="nu16">1.1</span>
&#160;
Rectangle <span class="br0">&#123;</span>
 id<span class="sy0">:</span> rect
 width<span class="sy0">:</span> <span class="nu0">100</span><span class="sy0">;</span> height<span class="sy0">:</span> <span class="nu0">100</span>
 color<span class="sy0">:</span> <span class="st0">&quot;red&quot;</span>
&#160;
states<span class="sy0">:</span> State <span class="br0">&#123;</span>
 name<span class="sy0">:</span> <span class="st0">&quot;moved&quot;</span>
 PropertyChanges <span class="br0">&#123;</span> target<span class="sy0">:</span> rect<span class="sy0">;</span> x<span class="sy0">:</span> <span class="nu0">50</span><span class="sy0">;</span> y<span class="sy0">:</span> <span class="nu0">50</span> <span class="br0">&#125;</span>
 <span class="br0">&#125;</span>
&#160;
transitions<span class="sy0">:</span> Transition <span class="br0">&#123;</span>
 PropertyAnimation <span class="br0">&#123;</span>
 properties<span class="sy0">:</span> <span class="st0">&quot;x,y&quot;</span><span class="sy0">;</span>
 easing.<span class="me1">type</span><span class="sy0">:</span> Easing.<span class="me1">InOutQuad</span>
 <span class="br0">&#125;</span>
 <span class="br0">&#125;</span>
 <span class="br0">&#125;</span></pre></div></div>
<h3><span class="mw-headline" id="Snippet_9:_Animated_state_transitions">Snippet 9: Animated state transitions</span></h3>
<p>You can apply multiple transitions to an item as in Snippet 10: Multiple transitions. (Remember anything you can do to an item you can do to a Rectangle). By default a transition is applied to all state changes. For greater control you can set the from and to properties to apply a transition only when changing from a given state, to a given state, or between given states.
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="cpp-qt source-cpp-qt"><pre class="de1">Item <span class="br0">&#123;</span>
 …
 transitions<span class="sy0">:</span> <span class="br0">&#91;</span>
 Transition <span class="br0">&#123;</span> … <span class="br0">&#125;</span>
 Transition <span class="br0">&#123;</span> … <span class="br0">&#125;</span>
 <span class="br0">&#93;</span>
 <span class="br0">&#125;</span></pre></div></div>
<h3><span class="mw-headline" id="Snippet_10:_Multiple_transitions">Snippet 10: Multiple transitions</span></h3>
<h2><span class="mw-headline" id="Building_reusable_components">Building reusable components</span></h2>
<p>The discussion of Snippet 1: Hello World described the contents of a QML document. How a QML document is named matters. A QML document name that begins with an uppercase case letter defines a single, reusable, top-level component. A component is a template that is interpreted by the QML runtime to create an object with some predefined behavior. As it is a template, a single component can be "run" multiple times to produce several objects, each of which are said to be instances of the component.
</p><p>Once created, instances are not dependent on the component that created them, so they can operate on independent data. Here is an example of a simple Button component (defined in a Button.qml file) that is instantiated four times by application.qml. Each instance is created with a different value for its text property:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="cpp-qt source-cpp-qt"><pre class="de1">import QtQuick <span class="nu16">1.1</span>
&#160;
Rectangle <span class="br0">&#123;</span>
 property alias text<span class="sy0">:</span> textItem.<span class="me1">text</span>
&#160;
width<span class="sy0">:</span> <span class="nu0">100</span><span class="sy0">;</span> height<span class="sy0">:</span> <span class="nu0">30</span>
 border.<span class="me1">width</span><span class="sy0">:</span> <span class="nu0">1</span>
 radius<span class="sy0">:</span> <span class="nu0">5</span>
 smooth<span class="sy0">:</span> <span class="kw2">true</span>
&#160;
gradient<span class="sy0">:</span> Gradient <span class="br0">&#123;</span>
 GradientStop <span class="br0">&#123;</span> position<span class="sy0">:</span> <span class="nu16">0.0</span><span class="sy0">;</span> color<span class="sy0">:</span> <span class="st0">&quot;darkGray&quot;</span> <span class="br0">&#125;</span>
 GradientStop <span class="br0">&#123;</span> position<span class="sy0">:</span> <span class="nu16">0.5</span><span class="sy0">;</span> color<span class="sy0">:</span> <span class="st0">&quot;black&quot;</span> <span class="br0">&#125;</span>
 GradientStop <span class="br0">&#123;</span> position<span class="sy0">:</span> <span class="nu16">1.0</span><span class="sy0">;</span> color<span class="sy0">:</span> <span class="st0">&quot;darkGray&quot;</span> <span class="br0">&#125;</span>
 <span class="br0">&#125;</span>
&#160;
Text <span class="br0">&#123;</span>
 id<span class="sy0">:</span> textItem
 anchors.<span class="me1">centerIn</span><span class="sy0">:</span> parent
 font.<span class="me1">pointSize</span><span class="sy0">:</span> <span class="nu0">20</span>
 color<span class="sy0">:</span> <span class="st0">&quot;white&quot;</span>
 <span class="br0">&#125;</span>
&#160;
<span class="br0">&#125;</span></pre></div></div>
<h3><span class="mw-headline" id="Snippet_11:_The_Button.qml_file_creates_a_button_component">Snippet 11: The Button.qml file creates a button component</span></h3>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="cpp-qt source-cpp-qt"><pre class="de1">import QtQuick <span class="nu16">1.1</span>
&#160;
Column <span class="br0">&#123;</span>
 spacing<span class="sy0">:</span> <span class="nu0">10</span>
&#160;
Button <span class="br0">&#123;</span> text<span class="sy0">:</span> <span class="st0">&quot;Apple&quot;</span> <span class="br0">&#125;</span>
 Button <span class="br0">&#123;</span> text<span class="sy0">:</span> <span class="st0">&quot;Orange&quot;</span> <span class="br0">&#125;</span>
 Button <span class="br0">&#123;</span> text<span class="sy0">:</span> <span class="st0">&quot;Pear&quot;</span> <span class="br0">&#125;</span>
 Button <span class="br0">&#123;</span> text<span class="sy0">:</span> <span class="st0">&quot;Grape&quot;</span> <span class="br0">&#125;</span>
<span class="br0">&#125;</span></pre></div></div>
<h3><span class="mw-headline" id="Snippet_12:_Use_the_button_four_times_with_different_text_properties.">Snippet 12: Use the button four times with different text properties.</span></h3>
<p>Note that QML documents may also create components inline using the Component element.
</p>
<h2><span class="mw-headline" id="Using_pre-built_Qt_Components">Using pre-built Qt Components</span></h2>
<p>You don't necessarily have to build components yourself; there are several sources of pre-built components you can use.
</p><p>Qt Components from Nokia is a library developed using the same open processes of the rest of the Qt framework. You can find the latest builds on gitorious, and the latest stable releases in the SDK and official documentation. Qt Quick Components are built on top of Qt Quick and provide native-look user interface elements for your application. They are bundled together as a module that you can import into your QML file. Once you have imported the components module, you can use the components just as you would use standard Qt elements such as Rectangle and Text. You may then implement the business logic of your application with JavaScript or Qt C++.
</p><p>The components are implemented separately for both Symbian and MeeGo to match the native look and feel of each platform. Components from both sets have similar interfaces and many components share a common interface. The compatible interfaces allow the developers to share some common code but give the freedom to customize their applications to each platform.
</p><p>There are also many open source projects that offer Qt Quick Components for free use. The Qt Quick Open Components article offers a comprehensive list of available libraries. 
</p><p>Snippet 13 illustrates the Button from the Qt Components library. When the user presses the button, it sends a clicked signal.
You can set a button to be a toggle button by enabling the checkable property. 
</p><p>On Symbian platforms, the button can also respond to a long-press. The button sends platformPressAndHold signal once when the user presses the button for a long period of time. If the button's platformAutoRepeat property is true, the button sends the clicked signal repeatedly as long as the user presses the button.
</p><p>The snippet and screen shot illustrates the case where the user has set the 'Signals' button's platformAutoRepeat property to true. When the user presses the 'Signals' button it sends a clicked signal repeatedly as long as the user keeps the button pressed. When the user releases the button it sends in Symbian environment a platformReleased signal.
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="cpp-qt source-cpp-qt"><pre class="de1"> Button <span class="br0">&#123;</span>
 id<span class="sy0">:</span> btnSignals
 anchors.<span class="me1">left</span><span class="sy0">:</span> parent.<span class="me1">left</span>
 anchors.<span class="me1">right</span><span class="sy0">:</span> parent.<span class="me1">right</span>
 text<span class="sy0">:</span> <span class="st0">&quot;Signals&quot;</span>
&#160;
 <span class="co1">// bind platformAutoRepeat to the &quot;checked&quot; checkbox</span>
 platformAutoRepeat<span class="sy0">:</span> chkPlatformAutoRepeat.<span class="me1">checked</span>
&#160;
 <span class="co1">// bind checkable to the &quot;checkable&quot; checkbox</span>
 checkable<span class="sy0">:</span> chkCheckable.<span class="me1">checked</span>
 onPlatformReleased<span class="sy0">:</span> <span class="br0">&#123;</span>
 txtLog.<span class="me1">text</span> <span class="sy0">=</span>
 txtLog.<span class="me1">text</span>
<span class="st0">''</span> <span class="st0">&quot;The 'platformReleased' signal. &lt;br&gt;&quot;</span>
 <span class="br0">&#125;</span>
 onClicked<span class="sy0">:</span> <span class="br0">&#123;</span>
 txtLog.<span class="me1">text</span> <span class="sy0">=</span>
 txtLog.<span class="me1">text</span>
 <span class="sy0">+</span> <span class="st0">&quot;The 'clicked' signal. &lt;br&gt;&quot;</span>
 <span class="br0">&#125;</span>
 onPlatformPressAndHold<span class="sy0">:</span> <span class="br0">&#123;</span>
 txtLog.<span class="me1">text</span> <span class="sy0">=</span>
 txtLog.<span class="me1">text</span>
 <span class="sy0">+</span> <span class="st0">&quot;The 'platformPressAndHold' signal. &lt;br&gt;&quot;</span>
 <span class="br0">&#125;</span>
 <span class="br0">&#125;</span></pre></div></div>
<h3><span class="mw-headline" id="Snippet_13:_Using_the_Button_from_Qt_Component_library.">Snippet 13: Using the Button from Qt Component library.</span></h3>
<h2><span class="mw-headline" id="Model-View_pattern">Model-View pattern</span></h2>
<p>Using QML in a model-view design pattern is a natural. QML can create fluid, visually appealing views into models whether the models are created in C++ or directly in QML.
</p><p>Qt Quick currently provides three elements devoted to creating views into models. The ListView and GridView elements create list and grid views respectively. The PathView element lays out model-provided items on a path, for example a loop path that allows you to create a carousel interface into a list.
</p><p>Let's create two different views into the same model – a basic contact list.
</p><p>You can build models directly in QML using the ListModel element among others. Snippet 14 shows how to create a contacts model where each contact record includes a name, a phone number, and an icon. Each element in the list is defined by a ListElement element; each entry includes two data roles, name and icon. Save the document in the file ContactModel.qml for access later. (Notice the initial cap that makes this file an accessible component.)
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="cpp-qt source-cpp-qt"><pre class="de1">import QtQuick <span class="nu16">1.1</span>
&#160;
ListModel <span class="br0">&#123;</span>
 ListElement <span class="br0">&#123;</span>
 name<span class="sy0">:</span> <span class="st0">&quot;Bill Jones&quot;</span>
 number<span class="sy0">:</span> <span class="st0">&quot;+1 800 555 1212&quot;</span>
 icon<span class="sy0">:</span> <span class="st0">&quot;pics/qtlogo.png&quot;</span>
 <span class="br0">&#125;</span>
 ListElement <span class="br0">&#123;</span>
 name<span class="sy0">:</span> <span class="st0">&quot;Jane Doe&quot;</span>
 number<span class="sy0">:</span> <span class="st0">&quot;+1 800 555 3434&quot;</span>
 icon<span class="sy0">:</span> <span class="st0">&quot;pics/qtlogo.png&quot;</span>
 <span class="br0">&#125;</span>
 ListElement <span class="br0">&#123;</span>
 name<span class="sy0">:</span> <span class="st0">&quot;John Smith&quot;</span>
 number<span class="sy0">:</span> <span class="st0">&quot;''1 800 555 5656&quot;</span>
 icon<span class="sy0">:</span> <span class="st0">&quot;pics/qtlogo.png&quot;</span>
 <span class="br0">&#125;</span>
 <span class="br0">&#125;</span></pre></div></div>
<h3><span class="mw-headline" id="Snippet_14:_Defining_a_List_Model_in_QML">Snippet 14: Defining a List Model in QML</span></h3>
<p>Snippet 15 uses the ListView element to lay out items horizontally or vertically. The snippet sets the model property to the ContactModel component just created. The delegate property provides a template defining each item instantiated by the view. In this case, the template shows the name and number roles using the built-in Text component. If you choose, you can define delegate components the same way you define any other component.
</p><p>Tech note: when using C++ models, the names used to refer to the different roles of the model are set using the QAbstractItemModel::setRoleNames method. More on C++ models later in the Using Qt Quick in C++ applications section.
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="cpp-qt source-cpp-qt"><pre class="de1">import QtQuick <span class="nu16">1.1</span>
&#160;
ListView <span class="br0">&#123;</span>
 width<span class="sy0">:</span> <span class="nu0">180</span><span class="sy0">;</span> height<span class="sy0">:</span> <span class="nu0">200</span>
&#160;
model<span class="sy0">:</span> ContactModel <span class="br0">&#123;</span><span class="br0">&#125;</span>
 delegate<span class="sy0">:</span> Text <span class="br0">&#123;</span>
 text<span class="sy0">:</span> name <span class="sy0">+</span> <span class="st0">&quot;: &quot;</span> <span class="sy0">+</span> number
 <span class="br0">&#125;</span>
 <span class="br0">&#125;</span></pre></div></div>
<h3><span class="mw-headline" id="Snippet_15:_List_view_into_contact_model">Snippet 15: List view into contact model</span></h3>
<p>Now let's get a little fancier and build a view into the contacts model that looks like a 3D carousel and allows the user to flick her way through the list. The resulting view and code is shown in Snippet 16. Note the creation of an inline component for use as the delegate property in the PathView element.
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="cpp-qt source-cpp-qt"><pre class="de1">import QtQuick <span class="nu16">1.1</span>
&#160;
Rectangle <span class="br0">&#123;</span>
 width<span class="sy0">:</span> <span class="nu0">240</span><span class="sy0">;</span> height<span class="sy0">:</span> <span class="nu0">200</span>
&#160;
Component <span class="br0">&#123;</span>
 id<span class="sy0">:</span> delegate
 Column <span class="br0">&#123;</span>
 Image <span class="br0">&#123;</span> anchors.<span class="me1">horizontalCenter</span><span class="sy0">:</span>
 name.<span class="me1">horizontalCenter</span><span class="sy0">;</span>
 width<span class="sy0">:</span> <span class="nu0">64</span><span class="sy0">;</span> height<span class="sy0">:</span> <span class="nu0">64</span><span class="sy0">;</span>
 source<span class="sy0">:</span> icon
 <span class="br0">&#125;</span>
 Text <span class="br0">&#123;</span> text<span class="sy0">:</span> name<span class="sy0">;</span> font.<span class="me1">pointSize</span><span class="sy0">:</span> <span class="nu0">16</span> <span class="br0">&#125;</span>
 <span class="br0">&#125;</span>
 <span class="br0">&#125;</span>
&#160;
PathView <span class="br0">&#123;</span>
 anchors.<span class="me1">fill</span><span class="sy0">:</span> parent
 model<span class="sy0">:</span> ContactModel <span class="br0">&#123;</span><span class="br0">&#125;</span>
 delegate<span class="sy0">:</span> delegate
 path<span class="sy0">:</span> Path <span class="br0">&#123;</span>
 startX<span class="sy0">:</span> <span class="nu0">120</span><span class="sy0">;</span> startY<span class="sy0">:</span> <span class="nu0">100</span>
 PathQuad <span class="br0">&#123;</span> x<span class="sy0">:</span> <span class="nu0">120</span><span class="sy0">;</span> y<span class="sy0">:</span> <span class="nu0">25</span><span class="sy0">;</span> controlX<span class="sy0">:</span> <span class="nu0">260</span><span class="sy0">;</span> controlY<span class="sy0">:</span> <span class="nu0">75</span> <span class="br0">&#125;</span>
 PathQuad <span class="br0">&#123;</span> x<span class="sy0">:</span> <span class="nu0">120</span><span class="sy0">;</span> y<span class="sy0">:</span> <span class="nu0">100</span><span class="sy0">;</span> controlX<span class="sy0">:</span> <span class="sy0">-</span><span class="nu0">20</span><span class="sy0">;</span> controlY<span class="sy0">:</span> <span class="nu0">75</span> <span class="br0">&#125;</span>
 <span class="br0">&#125;</span>
 <span class="br0">&#125;</span>
 <span class="br0">&#125;</span></pre></div></div>
<h3><span class="mw-headline" id="Snippet_16:_Rotating_carousel_view_into_contact_model">Snippet 16: Rotating carousel view into contact model</span></h3>
<h1><span class="mw-headline" id="Qt_Creator">Qt Creator</span></h1>
<p>Qt Creator is a development environment built for collaboration between designers and developers. Designers work in a visual environment, developers work in a full-featured IDE, and Qt Creator supports round-trip iteration from design, to code, to test, and back to design. 
</p><p>A full treatment of Qt Creator is available online. Here we will just introduce key ways the tool allows designers and developers to interact.
Qt Creator for Designers
</p>
<h2><span class="mw-headline" id="Qt_Creator_for_Designers">Qt Creator for Designers</span></h2>
<p>For designers, Qt Creator includes a visual editor for QML files called Qt Quick Designer. It allows you to rapidly design and build Qt Quick applications and components from scratch. It is completely integrated into Qt Creator and works seamlessly with the QML code editor.
</p><p>With Qt Quick Designer you can:
</p>
<ul>
<li> Design Qt Quick user interfaces with drag and drop functionality
</li>
<li> Customize components or choose from library of standard QML elements
</li>
<li> Preview QML files instantly without compilation
</li>
<li> Use Qt Quick components for MeeGo and Symbian
</li>
</ul>
<p><br />
</p>
<h3><span class="mw-headline" id="Figure_1:_Drag_and_drop_QML_elements_into_a_scene">Figure 1: <i>Drag and drop QML elements into a scene</i></span></h3>
<h3><span class="mw-headline" id="Exporting_Designs_from_Adobe_Photoshop_and_other_Graphics_Software">Exporting Designs from Adobe Photoshop and other Graphics Software</span></h3>
<p>The art embedded in QML projects can be imported from popular graphics software including Adobe Photoshop and GIMP. Each scene is converted into a single QML file with an Image or a Text element for each layer and saved on the development PC. Top-level layer groups are converted into merged QML Image elements.
</p><p>You can open the QML file in Qt Creator for editing. If you edit the file in Adobe Photoshop and export it to the same directory again, any changes you made in Qt Creator are overwritten. However, you can re-export graphical assets without recreating the QML code.
</p><p>Figure 2: Export Photoshop projects to QML shows how to use a custom plug-in to export your Photoshop projects. See the documentation for full instructions and a link to the current plug-in.
</p><p><a href="File_Qml-export-photoshop.html" class="image"><img alt="Qml-export-photoshop.png" src="images/1/15/Qml-export-photoshop.png" width="447" height="306" /></a>
</p>
<h3><span class="mw-headline" id="Figure_2:_Export_Photoshop_projects_to_QML">Figure 2: <i>Export Photoshop projects to QML</i></span></h3>
<h2><span class="mw-headline" id="Qt_Creator_for_Developers">Qt Creator for Developers</span></h2>
<p>Qt Creator makes it easy to switch from a visual editor when working with designers and a code editor when fine tuning design or building application logic.
</p><p>In Projects, double-click a .qml file to open it in the code editor. Snippet 17 shows the QML code used to place rectangle between two adjacent elements.
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="cpp-qt source-cpp-qt"><pre class="de1">Rectangle <span class="br0">&#123;</span>
 id<span class="sy0">:</span> rectangle2
 anchors.<span class="me1">right</span><span class="sy0">:</span> rectangle3.<span class="me1">left</span>
 anchors.<span class="me1">rightMargin</span><span class="sy0">:</span> <span class="nu0">15</span>
 anchors.<span class="me1">left</span><span class="sy0">:</span> rectangle1.<span class="me1">right</span>
 anchors.<span class="me1">leftMargin</span><span class="sy0">:</span> <span class="nu0">15</span>
 anchors.<span class="me1">bottom</span><span class="sy0">:</span> parent.<span class="me1">bottom</span>
 anchors.<span class="me1">bottomMargin</span><span class="sy0">:</span> <span class="nu0">15</span>
 <span class="br0">&#125;</span></pre></div></div>
<h3><span class="mw-headline" id="Snippet_17:_Code-level_view_of_anchor_specification_for_a_QML_element">Snippet 17: Code-level view of anchor specification for a QML element</span></h3>
<p>From here you can click Design mode to edit the file in the visual editor. Figure 3: Visual view of anchor specification shows the same specification; changes made in one view are immediately updated in the other. 
</p><p><a href="File_Qmldesigner-anchors.html" class="image"><img alt="Qmldesigner-anchors.png" src="images/5/5b/Qmldesigner-anchors.png" width="710" height="313" /></a>
</p>
<h3><span class="mw-headline" id="Figure_3:_Visual_view_of_anchor_specification">Figure 3: <i>Visual view of anchor specification</i></span></h3>
<h3><span class="mw-headline" id="Implementing_over-sized_MouseArea">Implementing over-sized MouseArea</span></h3>
<p>Much earlier in this paper we mentioned QML provides the flexibility to make an active MouseArea larger than the visual representation of it to increase usability of a design. Here is how you would implement this technique in Qt Creator.
</p><p>When you initially drag a MouseArea element on top of an image, the bounds of the child MouseArea will be within the parent. After placing the element, go into its properties window and exapand it. Figure 4 shows a typical result.
</p><p><a href="File_Qmldesigner-element-size.html" class="image"><img alt="Qmldesigner-element-size.png" src="images/4/4a/Qmldesigner-element-size.png" width="384" height="338" /></a>
</p>
<h3><span class="mw-headline" id="Figure_4:_Implementing_an_over-sized_MouseArea">Figure 4: <i>Implementing an over-sized MouseArea</i></span></h3>
<h2><span class="mw-headline" id="Integration_with_C.2B.2B_applications">Integration with C++ applications</span></h2>
<p>Qt Quick comes with its own runtime and enables loading new functionality via modules, making it possible to develop applications built entirely with QML. However, the real strength of Qt Quick is the ability to integrate it into a C++ application.
</p><p>For the most basic needs, for example integrating a QML view into a C++ project, the QDeclarativeView widget can be used. It is derived from a QGraphicsView but also includes the required components to host a QML view. Alternatively, you can simply make new C++ types available to the QML runtime through plugins, and these types can do anything your C++ application can do.
</p><p>For more complex situations, how you proceed depends on from how the C++ code is built.
</p><p>If you are starting with an application based on C++ widgets, you can reuse all your graphics assets and re-factor the QWidgets to QML. Since you already have the full interaction and design work done, developing and coding the QML is relatively easy. 
</p><p>If you are instead starting with an application based on a QGraphicsView, the conversion process is even easier and can proceed in stages. The entire QML-based application can be inserted into an existing graphics view by instantiating a QML engine. If desired, the QML interface can co-exist with the existing user interface and allow the conversion process to proceed in steps. 
</p><p>Snippet 17 shows the three steps required to add a QML engine and context to an existing QGraphicsView. First create an environment for instantiating QML components using the QDeclarativeEngine class, then encapsulate a QML component definition using QDeclarativeComponent. Finally, the resulting QGraphicsObject can be added to the existing scene and co-exist with the rest of the user interface.
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="cpp-qt source-cpp-qt"><pre class="de1"><span class="kw5">QGraphicsScene</span> <span class="sy0">*</span>scene <span class="sy0">=</span> …<span class="sy0">;</span>
&#160;
QDeclarativeEngine <span class="sy0">*</span>engine <span class="sy0">=</span> <span class="kw1">new</span> QDeclarativeEngine<span class="sy0">;</span>
QDeclarativeComponent component<span class="br0">&#40;</span>engine<span class="sy0">,</span> <span class="kw5">QUrl</span><span class="sy0">::</span><span class="me2">fromLocalFile</span><span class="br0">&#40;</span>…<span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span>
QGraphicsObject <span class="sy0">*</span>object <span class="sy0">=</span>
 qobject_cast<span class="sy0">&lt;</span>QGraphicsObject<span class="sy0">*&gt;</span><span class="br0">&#40;</span>component.<span class="me1">create</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span>
&#160;
scene<span class="sy0">-&gt;</span><span class="me3">addItem</span><span class="br0">&#40;</span>object<span class="br0">&#41;</span><span class="sy0">;</span></pre></div></div>
<h3><span class="mw-headline" id="Snippet_18:_Adding_a_QML_engine_to_QGraphicsView">Snippet 18: Adding a QML engine to QGraphicsView</span></h3>
<p>If the component fails to load the QML file, the error property will be set to true. To output the error messages, the following statement can be placed just after the call to create.
</p><p>qWarning() &lt;&lt; component.errors();
</p><p>Tech note: the syntax above is only available if you include &lt;QtDebug&gt; in your project. See documentation about qWarning() for details.
To align the user interfaces it is possible to transform the QGraphicsObject and adjust the z-value to place it at the right depth in the scene. In order to achieve the optimal performance for the QML part of the user interface, the following options are recommended to be set.
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="cpp-qt source-cpp-qt"><pre class="de1"><span class="kw5">QGraphicsView</span> <span class="sy0">*</span>view <span class="sy0">=</span> …<span class="sy0">;</span>
&#160;
view<span class="sy0">-&gt;</span><span class="me3">setOptimizationFlags</span><span class="br0">&#40;</span><span class="kw5">QGraphicsView</span><span class="sy0">::</span><span class="me2">DontSavePainterState</span><span class="br0">&#41;</span><span class="sy0">;</span>
view<span class="sy0">-&gt;</span><span class="me3">setViewportUpdateMode</span><span class="br0">&#40;</span>
 <span class="kw5">QGraphicsView</span><span class="sy0">::</span><span class="me2">BoundingRectViewportUpdate</span><span class="br0">&#41;</span><span class="sy0">;</span>
view<span class="sy0">-&gt;</span><span class="me3">setItemIndexMethod</span><span class="br0">&#40;</span><span class="kw5">QGraphicsScene</span><span class="sy0">::</span><span class="me2">NoIndex</span><span class="br0">&#41;</span><span class="sy0">;</span></pre></div></div>
<h3><span class="mw-headline" id="Snippet_19:_Optimizing_QML_interface_performance.">Snippet 19: Optimizing QML interface performance.</span></h3>
<p>Although combining an existing graphics view-based user interface with QML is possible, it is recommended to convert the entire experience to Qt Quick.
</p>
<h2><span class="mw-headline" id="Sharing_data_between_C.2B.2B_and_QML">Sharing data between C++ and QML</span></h2>
<p>Qt Quick provides numerous ways to share data between C++ and QML with or without implementing a formal model-view design pattern. It is also possible to trigger calls to QML functions from C++ and vice-versa. In general, exposing a QObject will make all of its signals, slots and properties available to the QML environment.
</p><p>All QML code executes within a context. The context keeps track of what data is available to different leaves and nodes in a QML object tree. Data is shared as context properties or context objects. A context property is simply a way to expose a given QObject through a given name. For example, to expose a QColor property named frameColor to QML, simply use the following snippet.
</p><p>QDeclarativeContext *context = …;
context-&gt;setContextProperty("frameColor", QColor(Qt::red));
This property can then be accessed from within the QML context as a global property, as shown below. Remember property values are bound, not assigned, in QML. This means you can alter the frameColor property from C++ and the change will be reflected in QML.
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="cpp-qt source-cpp-qt"><pre class="de1">Rectangle <span class="br0">&#123;</span>
 border.<span class="me1">color</span><span class="sy0">:</span> frameColor
<span class="br0">&#125;</span></pre></div></div>
<p>It is possible to add multiple context properties to a QDeclarativeContext object, but as the list of properties climbs the readability of the code crumbles. Instead of setting each property individually, it is cleaner to gather all context properties into one QObject and set the single object as the context object instead.
</p><p>Snippet 19 shows how to define the interface object MyInterface using the setContextProperty method. The Q_PROPERTY macro defines the properties available within MyInterface to the Qt property system and sets notification signals, allowing subsequent bindings to work.
Note that all properties added explicitly by QDeclarativeContext::setContextProperty() take precedence over the context object's default properties.
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="cpp-qt source-cpp-qt"><pre class="de1"><span class="kw2">class</span> MyInterface <span class="sy0">:</span> … <span class="br0">&#123;</span>
 …
 Q_PROPERTY<span class="br0">&#40;</span><span class="kw5">QAbstractItemModel</span> <span class="sy0">*</span>myModel READ model NOTIFY modelChanged<span class="br0">&#41;</span>
 …
 <span class="br0">&#125;</span><span class="sy0">;</span>
&#160;
MyInterface <span class="sy0">*</span>myInterface <span class="sy0">=</span> <span class="kw1">new</span> MyInterface<span class="sy0">;</span>
 QDeclarativeEngine engine<span class="sy0">;</span>
 QDeclarativeContext <span class="sy0">*</span>context <span class="sy0">=</span> <span class="kw1">new</span>
 QDeclarativeContext<span class="br0">&#40;</span>engine.<span class="me1">rootContext</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span>
 context<span class="sy0">-&gt;</span><span class="me3">setContextObject</span><span class="br0">&#40;</span>myDataSet<span class="br0">&#41;</span><span class="sy0">;</span>
 QDeclarativeComponent component<span class="br0">&#40;</span><span class="sy0">&amp;</span>engine<span class="br0">&#41;</span><span class="sy0">;</span>
 component.<span class="me1">setData</span><span class="br0">&#40;</span><span class="st0">&quot;import Qt 4.7<span class="es1">\n</span>ListView {
 model: myModel }&quot;</span><span class="sy0">,</span> <span class="kw5">QUrl</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span>
 component.<span class="me1">create</span><span class="br0">&#40;</span>context<span class="br0">&#41;</span><span class="sy0">;</span></pre></div></div>
<h3><span class="mw-headline" id="Snippet_20:_Defining_an_interface_using_setContextProperty">Snippet 20: Defining an interface using setContextProperty</span></h3>
<h2><span class="mw-headline" id="QML_views_into_C.2B.2B_models">QML views into C++ models</span></h2>
<p>Object properties work well when providing a limited set of values to QML, but are difficult to manage when large data sets are involved. In these cases formal models are visualized with formal views. This model/view design pattern allows developers to separate the implementation of user interface from business logic, supporting the model-view design pattern. The model can be implemented in C++ while the view is coded in QML.
</p><p>QML can create views into C++ models that are exposed using the QAbstractItemModel interface.
</p><p>To expose a QAbstractItemModel to QML a context property is used:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="cpp-qt source-cpp-qt"><pre class="de1"><span class="kw5">QAbstractItemModel</span> <span class="sy0">*</span>model <span class="sy0">=</span> …<span class="sy0">;</span>
context<span class="sy0">-&gt;</span><span class="me3">setContextProperty</span><span class="br0">&#40;</span><span class="st0">&quot;dataModel&quot;</span><span class="sy0">,</span> model<span class="br0">&#41;</span><span class="sy0">;</span></pre></div></div>
<p>Tech Note: Within Qt, the QAbstractItemModel class provides the abstract interface for item model classes. The QAbstractItemModel class defines the standard interface that item models must use to be able to interoperate with other components in the model/view architecture. It is not supposed to be instantiated directly. Instead, you should subclass it to create new models.
</p><p>The QAbstractItemModel class is one of the Model/View Classes and is part of Qt's model/view framework.
</p>
<h3><span class="mw-headline" id="QML_.2F_C.2B.2B_program_flow">QML / C++ program flow</span></h3>
<p>Qt Quick allows QML to call C++ methods and allows C++ signals to be handled by JavaScript expressions within the QML context.
</p>
<h3><span class="mw-headline" id="Calling_C.2B.2B_methods_from_QML">Calling C++ methods from QML</span></h3>
<p>In order to feedback data from the user to the business logic, QML must be able to call C++ methods. This is achieved through slots or Q_INVOKABLE methods. By providing QML access to a QObject as a context property, the slots and invokable methods of that class can be called from QML.
</p><p>For example, the following QObject derived class is added to the QML context.
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="cpp-qt source-cpp-qt"><pre class="de1"><span class="kw2">class</span> CallableClass <span class="sy0">:</span> <span class="kw2">public</span> <span class="kw5">QObject</span>
<span class="br0">&#123;</span>
 <span class="kw2">Q_OBJECT</span>
 …
<span class="kw2">public</span> <span class="kw2">slots</span><span class="sy0">:</span>
 <span class="kw4">void</span> cppMethod<span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span> <span class="kw2">qDebug</span><span class="br0">&#40;</span><span class="st0">&quot;C++ method called!&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span> <span class="br0">&#125;</span>
<span class="br0">&#125;</span><span class="sy0">;</span>
&#160;
…
&#160;
context<span class="sy0">-&gt;</span><span class="me3">setContextProperty</span><span class="br0">&#40;</span><span class="st0">&quot;cppObject&quot;</span><span class="sy0">,</span> <span class="kw1">new</span> CallableClass<span class="br0">&#41;</span><span class="sy0">;</span></pre></div></div>
<p>The QML code then can refer to the cppMethod method using the cppObject global object. In this example the method in question returns no value nor accepts any arguments, but that is not a limitation of QML. Both return values and arguments of the types supported by QML are supported.
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="cpp-qt source-cpp-qt"><pre class="de1">MouseArea <span class="br0">&#123;</span>
 …
 onClicked<span class="sy0">:</span> <span class="br0">&#123;</span>
 cppObject.<span class="me1">cppMethod</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
 <span class="br0">&#125;</span>
<span class="br0">&#125;</span></pre></div></div>
<h2><span class="mw-headline" id="Qt_signal_-.3E_QML_handler">Qt signal -&gt; QML handler</span></h2>
<p>Qt C++ signals can be handled by JavaScript executing in a QML context. For instance, the CallableClass class from the previous example also declares a signal, cppSignal.
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="cpp-qt source-cpp-qt"><pre class="de1"><span class="kw2">class</span> CallableClass <span class="sy0">:</span> <span class="kw2">public</span> <span class="kw5">QObject</span>
<span class="br0">&#123;</span>
 <span class="kw2">Q_OBJECT</span>
 …
<span class="kw2">signals</span><span class="sy0">:</span>
 <span class="kw4">void</span> cppSignal<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
<span class="br0">&#125;</span><span class="sy0">;</span></pre></div></div>
<p>Using a Connections Qt Quick element, a signal handler can be implemented in QML. The connections element can be used to handle signals for any target object, including other Qt Quick elements. The signal handler is called onSignalName, where the first letter of the signal name is capitalized.
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="cpp-qt source-cpp-qt"><pre class="de1">Connections <span class="br0">&#123;</span>
 target<span class="sy0">:</span> cppObject
 onCppSignal<span class="sy0">:</span> <span class="br0">&#123;</span> console.<span class="kw3">log</span><span class="br0">&#40;</span><span class="st0">&quot;QML function called!&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span> <span class="br0">&#125;</span>
<span class="br0">&#125;</span></pre></div></div>
<h2><span class="mw-headline" id="Extending_QML_from_C.2B.2B">Extending QML from C++</span></h2>
<p>Qt Quick has built-in support for an extensive set of element types, but when application-specific needs pop up it is possible to extend QML with custom element types built in C++. For example, let's say you have a burning desire for a Qt Quick element called Person with properties name and shoeSize.
</p><p>All Qt Quick elements map to C++ types. Snippet 20 declares a basic C++ class Person with the two properties we want accessible on the QML type- name and shoeSize. Although in this example we use the same name for the C++ class as the Qt Quick element, the C++ class can be named differently, or appear in a namespace. ==
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="cpp-qt source-cpp-qt"><pre class="de1"> <span class="kw2">class</span> Person <span class="sy0">:</span> <span class="kw2">public</span> <span class="kw5">QObject</span>
 <span class="br0">&#123;</span>
 <span class="kw2">Q_OBJECT</span>
 Q_PROPERTY<span class="br0">&#40;</span><span class="kw5">QString</span> name READ name WRITE setName<span class="br0">&#41;</span>
 Q_PROPERTY<span class="br0">&#40;</span><span class="kw4">int</span> shoeSize READ shoeSize WRITE setShoeSize<span class="br0">&#41;</span>
 <span class="kw2">public</span><span class="sy0">:</span>
 Person<span class="br0">&#40;</span><span class="kw5">QObject</span> <span class="sy0">*</span>parent <span class="sy0">=</span> <span class="nu0">0</span><span class="br0">&#41;</span><span class="sy0">;</span>
&#160;
<span class="kw5">QString</span> name<span class="br0">&#40;</span><span class="br0">&#41;</span> const<span class="sy0">;</span>
 <span class="kw4">void</span> setName<span class="br0">&#40;</span><span class="kw4">const</span> <span class="kw5">QString</span> <span class="sy0">&amp;</span><span class="br0">&#41;</span><span class="sy0">;</span>
&#160;
<span class="kw4">int</span> shoeSize<span class="br0">&#40;</span><span class="br0">&#41;</span> const<span class="sy0">;</span>
 <span class="kw4">void</span> setShoeSize<span class="br0">&#40;</span><span class="kw4">int</span><span class="br0">&#41;</span><span class="sy0">;</span>
&#160;
<span class="kw2">private</span><span class="sy0">:</span>
 <span class="kw5">QString</span> m_name<span class="sy0">;</span>
 <span class="kw4">int</span> m_shoeSize<span class="sy0">;</span>
 <span class="br0">&#125;</span><span class="sy0">;</span></pre></div></div>
<h3><span class="mw-headline" id="Snippet_21:_Declare_a_Person_class">Snippet 21: Declare a Person class</span></h3>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="cpp-qt source-cpp-qt"><pre class="de1">Person<span class="sy0">::</span><span class="me2">Person</span><span class="br0">&#40;</span><span class="kw5">QObject</span> <span class="sy0">*</span>parent<span class="br0">&#41;</span>
 <span class="sy0">:</span> <span class="kw5">QObject</span><span class="br0">&#40;</span>parent<span class="br0">&#41;</span><span class="sy0">,</span> m_shoeSize<span class="br0">&#40;</span><span class="nu0">0</span><span class="br0">&#41;</span>
 <span class="br0">&#123;</span>
 <span class="br0">&#125;</span>
&#160;
 <span class="kw5">QString</span> Person<span class="sy0">::</span><span class="me2">name</span><span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="kw4">const</span>
 <span class="br0">&#123;</span>
 <span class="kw1">return</span> m_name<span class="sy0">;</span>
 <span class="br0">&#125;</span>
&#160;
 <span class="kw4">void</span> Person<span class="sy0">::</span><span class="me2">setName</span><span class="br0">&#40;</span><span class="kw4">const</span> <span class="kw5">QString</span> <span class="sy0">&amp;</span>n<span class="br0">&#41;</span>
 <span class="br0">&#123;</span>
 m_name <span class="sy0">=</span> n<span class="sy0">;</span>
 <span class="br0">&#125;</span>
&#160;
 <span class="kw4">int</span> Person<span class="sy0">::</span><span class="me2">shoeSize</span><span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="kw4">const</span>
 <span class="br0">&#123;</span>
 <span class="kw1">return</span> m_shoeSize<span class="sy0">;</span>
 <span class="br0">&#125;</span>
&#160;
 <span class="kw4">void</span> Person<span class="sy0">::</span><span class="me2">setShoeSize</span><span class="br0">&#40;</span><span class="kw4">int</span> s<span class="br0">&#41;</span>
 <span class="br0">&#123;</span>
 m_shoeSize <span class="sy0">=</span> s<span class="sy0">;</span>
 <span class="br0">&#125;</span></pre></div></div>
<h3><span class="mw-headline" id="Snippet_22:_Define_the_Person_class">Snippet 22: Define the Person class</span></h3>
<p>The Person class implementation is quite basic. The property accessors simply return members of the object instance.
</p><p>The main.cpp file also calls the qmlRegisterType() function to register the Person type with QML as a type in the People library version 1.0, and defines the mapping between the C++ and Qt Quick class names.
</p><p>The Person type can now be used from QML:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="cpp-qt source-cpp-qt"><pre class="de1"> import People <span class="nu16">1.0</span>
&#160;
 Person <span class="br0">&#123;</span>
 name<span class="sy0">:</span> <span class="st0">&quot;Bob Jones&quot;</span>
 shoeSize<span class="sy0">:</span> <span class="nu0">12</span>
 <span class="br0">&#125;</span></pre></div></div>
<p> 
</p>
<h1><span class="mw-headline" id="Getting_started">Getting started</span></h1>
<p>This paper provided a brief introduction to Qt Quick. There is plenty more information, tutorials, and code examples for you to explore.
</p><p>For additional information about Qt Quick:
</p>
<ul>
<li> Try the QML Tutorial at <a rel="nofollow" class="external free" href="http://doc.trolltech.com/4.7/qml-tutorial.html">http://doc.trolltech.com/4.7/qml-tutorial.html</a>
</li>
<li> Full documentation of Qt Quick elements is online at <a rel="nofollow" class="external free" href="http://doc.trolltech.com/4.7/qdeclarativeelements.html">http://doc.trolltech.com/4.7/qdeclarativeelements.html</a>
</li>
</ul>
<p>To begin working with Qt Quick:
</p>
<ul>
<li> Download and install the latest Qt Creator IDE 2.3, which now includes a QML Text Editor with code completion, syntax highlighting and context-sensitive help; a Qt Quick designer that was built from the ground up using QML; and a QML Debugger that allows you to inspect the QML item tree and its properties at runtime, to check frame rates, to evaluate JavaScript expressions and so on inside QtCreator.
</li>
<li> Once you install Qt Creator, check out the included examples installed in the YourInstalledRoot/examples/declarative directory and exposed through the IDE.
</li>
<li> You will find an online discussions and wikis covering Qt Quick at www.forum.nokia.com/Community and at <a rel="nofollow" class="external free" href="http://developer.qt.nokia.com/">http://developer.qt.nokia.com/</a>
</li>
</ul>

<!-- 
NewPP limit report
CPU time usage: 0.676 seconds
Real time usage: 1.408 seconds
Preprocessor visited node count: 579/1000000
Preprocessor generated node count: 1419/1000000
Post‐expand include size: 2293/2097152 bytes
Template argument size: 0/2097152 bytes
Highest expansion depth: 3/40
Expensive parser function count: 23/100
-->

<!-- Saved in parser cache with key qtio_wiki:pcache:idhash:1076-0!*!*!!en!2!* and timestamp 20151104171929 and revision id 19255
 -->
</div>								<div class="printfooter">
				Retrieved from "<a href="index1014.html?title=Introduction_to_Qt_Quick&amp;oldid=19255">http://wiki.qt.io/index.php?title=Introduction_to_Qt_Quick&amp;oldid=19255</a>"				</div>
												<div id='catlinks' class='catlinks'><div id="mw-normal-catlinks" class="mw-normal-catlinks"><a href="Special_Categories.html" title="Special:Categories">Categories</a>: <ul><li><a href="Category_Developing_with_Qt__Qt_Quick.html" title="Category:Developing with Qt::Qt Quick">Developing with Qt::Qt Quick</a></li><li><a href="Category_Learning__Whitepapers.html" title="Category:Learning::Whitepapers">Learning::Whitepapers</a></li></ul></div></div>												<div class="visualClear"></div>
							</div>
		</div>
		<div id="mw-navigation">
			<h2>Navigation menu</h2>
			<div id="mw-head">
				<div id="p-personal" role="navigation" class="" aria-labelledby="p-personal-label">
	<h3 id="p-personal-label">Personal tools</h3>
	<ul>
<li id="pt-anonuserpage"><a href="User_10.0.113.html" class="new" title="The user page for the IP address you are editing as [.]" accesskey=".">10.0.113.70</a></li><li id="pt-anontalk"><a href="User_talk_10.0.113.html" class="new" title="Discussion about edits from this IP address [n]" accesskey="n">Talk for this IP address</a></li><li id="pt-login"><a href="https://login.qt.io/authorize?client_id=one-qt-server-003&amp;response_type=code&amp;state=0f89ef8f37a6d4dd&amp;scope=authorizations&amp;redirect_uri=https%3A%2F%2Fwiki.qt.io%2FSpecial%3AQtLogin%2Fcallback" title="You are encouraged to log in; however, it is not mandatory [o]" accesskey="o">Sign in</a></li>	</ul>
</div>
				<div id="left-navigation">
					<div id="p-namespaces" role="navigation" class="vectorTabs" aria-labelledby="p-namespaces-label">
	<h3 id="p-namespaces-label">Namespaces</h3>
	<ul>
					<li  id="ca-nstab-main" class="selected"><span><a href="Introduction_to_Qt_Quick.html"  title="View the content page [c]" accesskey="c">Page</a></span></li>
					<li  id="ca-talk" class="new"><span><a href="Talk_Introduction_to_Qt_Quick.html?title=Talk:Introduction_to_Qt_Quick&amp;action=edit&amp;redlink=1"  title="Discussion about the content page [t]" accesskey="t">Discussion</a></span></li>
			</ul>
</div>
<div id="p-variants" role="navigation" class="vectorMenu emptyPortlet" aria-labelledby="p-variants-label">
	<h3 id="mw-vector-current-variant">
		</h3>
	<h3 id="p-variants-label"><span>Variants</span><a href="#"></a></h3>
	<div class="menu">
		<ul>
					</ul>
	</div>
</div>
				</div>
				<div id="right-navigation">
					<div id="p-views" role="navigation" class="vectorTabs" aria-labelledby="p-views-label">
	<h3 id="p-views-label">Views</h3>
	<ul>
					<li id="ca-view" class="selected"><span><a href="Introduction_to_Qt_Quick.html" >Read</a></span></li>
					<li id="ca-viewsource"><span><a href="index6f8c.html?title=Introduction_to_Qt_Quick&amp;action=edit"  title="This page is protected.&#10;You can view its source [e]" accesskey="e">View source</a></span></li>
					<li id="ca-history" class="collapsible"><span><a href="index0e94.html?title=Introduction_to_Qt_Quick&amp;action=history"  title="Past revisions of this page [h]" accesskey="h">View history</a></span></li>
			</ul>
</div>
<div id="p-cactions" role="navigation" class="vectorMenu emptyPortlet" aria-labelledby="p-cactions-label">
	<h3 id="p-cactions-label"><span>Actions</span><a href="#"></a></h3>
	<div class="menu">
		<ul>
					</ul>
	</div>
</div>
<div id="p-search" role="search">
	<h3><label for="searchInput">Search</label></h3>
	<form action="http://wiki.qt.io/index.php" id="searchform">
					<div id="simpleSearch">
					<input type="search" name="search" placeholder="Search" title="Search Qt Wiki [f]" accesskey="f" id="searchInput" /><input type="hidden" value="Special:Search" name="title" /><input type="submit" name="fulltext" value="Search" title="Search the pages for this text" id="mw-searchButton" class="searchButton mw-fallbackSearchButton" /><input type="submit" name="go" value="Go" title="Go to a page with this exact name if exists" id="searchButton" class="searchButton" />		</div>
	</form>
</div>
				</div>
			</div>
			<div id="mw-panel">
					<div id="p-logo" role="banner"><a style="background-image: url(skins/common/images/wiki.png);" href="Main_Page.html"  title="Visit the main page"></a></div>
				<div class="portal" role="navigation" id='p-navigation' aria-labelledby='p-navigation-label'>
	<h3 id='p-navigation-label'>Navigation</h3>
	<div class="body">
		<ul>
			<li id="n-mainpage-description"><a href="Main_Page.html" title="Visit the main page [z]" accesskey="z">Main page</a></li>
			<li id="n-recentchanges"><a href="Special_RecentChanges.html" title="A list of recent changes in the wiki [r]" accesskey="r">Recent changes</a></li>
			<li id="n-randompage"><a href="How_to_create_columns_in_a_QML_ListView.html" title="Load a random page [x]" accesskey="x">Random page</a></li>
			<li id="n-help"><a href="https://www.mediawiki.org/wiki/Special:MyLanguage/Help:Contents" title="The place to find out">Help</a></li>
		</ul>
	</div>
</div>
<div class="portal" role="navigation" id='p-tb' aria-labelledby='p-tb-label'>
	<h3 id='p-tb-label'>Tools</h3>
	<div class="body">
		<ul>
			<li id="t-whatlinkshere"><a href="Special_WhatLinksHere/Introduction_to_Qt_Quick.html" title="A list of all wiki pages that link here [j]" accesskey="j">What links here</a></li>
			<li id="t-recentchangeslinked"><a href="Special_RecentChangesLinked/Introduction_to_Qt_Quick.html" title="Recent changes in pages linked from this page [k]" accesskey="k">Related changes</a></li>
			<li id="t-specialpages"><a href="Special_SpecialPages.html" title="A list of all special pages [q]" accesskey="q">Special pages</a></li>
			<li id="t-permalink"><a href="index1014.html?title=Introduction_to_Qt_Quick&amp;oldid=19255" title="Permanent link to this revision of the page">Permanent link</a></li>
			<li id="t-info"><a href="index92ff.html?title=Introduction_to_Qt_Quick&amp;action=info">Page information</a></li>
		</ul>
	</div>
</div>
			</div>
		</div>
		<div id="footer" role="contentinfo">
							<ul id="footer-info">
											<li id="footer-info-lastmod"> This page was last modified on 23 August 2015, at 13:22.</li>
											<li id="footer-info-viewcount">This page has been accessed 3,769 times.</li>
									</ul>
							<ul id="footer-places">
											<li id="footer-places-terms"><a href='https://developer.qtcloudservices.com/legal/terms'>Käyttöehdot</a></li>
									</ul>
										<ul id="footer-icons" class="noprint">
					<li id="footer-poweredbyico">
						<a href="http://www.mediawiki.org/"><img src="skins/common/images/poweredby_mediawiki_88x31.png" alt="Powered by MediaWiki" width="88" height="31" /></a>
					</li>
				</ul>
						<div style="clear:both"></div>
		</div>
		<script>/*<![CDATA[*/window.jQuery && jQuery.ready();/*]]>*/</script><script>if(window.mw){
mw.loader.state({"site":"loading","user":"ready","user.groups":"ready"});
}</script>
<script>if(window.mw){
mw.loader.load(["mediawiki.action.view.postEdit","mediawiki.user","mediawiki.hidpi","mediawiki.page.ready","mediawiki.searchSuggest","skins.vector.collapsibleNav"],null,true);
}</script>
<script src="load2f85.php?debug=false&amp;lang=en&amp;modules=site&amp;only=scripts&amp;printable=1&amp;skin=vector&amp;*"></script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','http://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-54043535-2', 'auto');
  ga('send', 'pageview');

</script>
<script>if(window.mw){
mw.config.set({"wgBackendResponseTime":218});
}</script>
	</body>

<!-- Mirrored from wiki.qt.io/index.php?title=Introduction_to_Qt_Quick&printable=yes by HTTrack Website Copier/3.x [XR&CO'2013], Thu, 05 Nov 2015 12:06:01 GMT -->
</html>
