<!DOCTYPE html>
<html lang="en" dir="ltr" class="client-nojs">

<!-- Mirrored from wiki.qt.io/Einstieg_in_die_Programmierung_mit_Qt by HTTrack Website Copier/3.x [XR&CO'2013], Thu, 05 Nov 2015 09:37:04 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<meta charset="UTF-8" />
<title>Einstieg in die Programmierung mit Qt - Qt Wiki</title>
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />
<meta name="generator" content="MediaWiki 1.23.3" />
<link rel="shortcut icon" href="favicon.ico" />
<link rel="search" type="application/opensearchdescription+xml" href="opensearch_desc.php" title="Qt Wiki (en)" />
<link rel="EditURI" type="application/rsd+xml" href="api251f.php?action=rsd" />
<link rel="alternate" type="application/atom+xml" title="Qt Wiki Atom feed" href="apidf90.php?title=Special:RecentChanges&amp;feed=atom" />
<link rel="stylesheet" href="load771b.css?debug=false&amp;lang=en&amp;modules=mediawiki.legacy.commonPrint%2Cshared%7Cmediawiki.skinning.interface%7Cmediawiki.ui.button%7Cskins.vector.styles&amp;only=styles&amp;skin=vector&amp;*" />
<meta name="ResourceLoaderDynamicStyles" content="" />
<link rel="stylesheet" href="loadc6d2.css?debug=false&amp;lang=en&amp;modules=site&amp;only=styles&amp;skin=vector&amp;*" />
<style>a:lang(ar),a:lang(kk-arab),a:lang(mzn),a:lang(ps),a:lang(ur){text-decoration:none}
/* cache key: qtio_wiki:resourceloader:filter:minify-css:7:e91d7bc946738c8892a88ad5616a59ba */</style>
<script src="load8478.php?debug=false&amp;lang=en&amp;modules=startup&amp;only=scripts&amp;skin=vector&amp;*"></script>
<script>if(window.mw){
mw.config.set({"wgCanonicalNamespace":"","wgCanonicalSpecialPageName":false,"wgNamespaceNumber":0,"wgPageName":"Einstieg_in_die_Programmierung_mit_Qt","wgTitle":"Einstieg in die Programmierung mit Qt","wgCurRevisionId":17860,"wgRevisionId":17860,"wgArticleId":773,"wgIsArticle":true,"wgIsRedirect":false,"wgAction":"view","wgUserName":null,"wgUserGroups":["*"],"wgCategories":["Pages with broken file links","Learning"],"wgBreakFrames":false,"wgPageContentLanguage":"en","wgPageContentModel":"wikitext","wgSeparatorTransformTable":["",""],"wgDigitTransformTable":["",""],"wgDefaultDateFormat":"dmy","wgMonthNames":["","January","February","March","April","May","June","July","August","September","October","November","December"],"wgMonthNamesShort":["","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"wgRelevantPageName":"Einstieg_in_die_Programmierung_mit_Qt","wgIsProbablyEditable":false,"wgRestrictionEdit":[],"wgRestrictionMove":[],"wgWikiEditorEnabledModules":{"toolbar":true,"dialogs":true,"hidesig":true,"preview":true,"previewDialog":false,"publish":true}});
}</script><script>if(window.mw){
mw.loader.implement("user.options",function($,jQuery){mw.user.options.set({"ccmeonemails":0,"cols":80,"date":"default","diffonly":0,"disablemail":0,"editfont":"default","editondblclick":0,"editsectiononrightclick":0,"enotifminoredits":0,"enotifrevealaddr":0,"enotifusertalkpages":1,"enotifwatchlistpages":1,"extendwatchlist":0,"fancysig":0,"forceeditsummary":0,"gender":"unknown","hideminor":0,"hidepatrolled":0,"imagesize":2,"math":1,"minordefault":0,"newpageshidepatrolled":0,"nickname":"","norollbackdiff":0,"numberheadings":0,"previewonfirst":0,"previewontop":1,"rcdays":7,"rclimit":50,"rows":25,"showhiddencats":0,"shownumberswatching":1,"showtoolbar":1,"skin":"vector","stubthreshold":0,"thumbsize":2,"underline":2,"uselivepreview":0,"usenewrc":0,"watchcreations":1,"watchdefault":1,"watchdeletion":0,"watchlistdays":3,"watchlisthideanons":0,"watchlisthidebots":0,"watchlisthideliu":0,"watchlisthideminor":0,"watchlisthideown":0,"watchlisthidepatrolled":0,"watchmoves":0,"wllimit":250,
"useeditwarning":1,"prefershttps":1,"usebetatoolbar":1,"usebetatoolbar-cgd":1,"wikieditor-preview":1,"wikieditor-publish":1,"language":"en","variant-gan":"gan","variant-iu":"iu","variant-kk":"kk","variant-ku":"ku","variant-shi":"shi","variant-sr":"sr","variant-tg":"tg","variant-uz":"uz","variant-zh":"zh","searchNs0":true,"searchNs1":false,"searchNs2":false,"searchNs3":false,"searchNs4":false,"searchNs5":false,"searchNs6":false,"searchNs7":false,"searchNs8":false,"searchNs9":false,"searchNs10":false,"searchNs11":false,"searchNs12":false,"searchNs13":false,"searchNs14":false,"searchNs15":false,"searchNs500":false,"searchNs501":false,"searchNs700":false,"searchNs701":false,"variant":"en"});},{},{});mw.loader.implement("user.tokens",function($,jQuery){mw.user.tokens.set({"editToken":"+\\","patrolToken":false,"watchToken":false});},{},{});
/* cache key: qtio_wiki:resourceloader:filter:minify-js:7:9743cb8b8019d46de5946bfe6dfa04d7 */
}</script>
<script>if(window.mw){
mw.loader.load(["mediawiki.page.startup","mediawiki.legacy.wikibits","mediawiki.legacy.ajax","skins.vector.js"]);
}</script>
<style type="text/css">/*<![CDATA[*/
.source-cpp-qt {line-height: normal;}
.source-cpp-qt li, .source-cpp-qt pre {
	line-height: normal; border: 0px none white;
}
/**
 * GeSHi Dynamically Generated Stylesheet
 * --------------------------------------
 * Dynamically generated stylesheet for cpp-qt
 * CSS class: source-cpp-qt, CSS id: 
 * GeSHi (C) 2004 - 2007 Nigel McNie, 2007 - 2008 Benny Baumann
 * (http://qbnz.com/highlighter/ and http://geshi.org/)
 * --------------------------------------
 */
.cpp-qt.source-cpp-qt .de1, .cpp-qt.source-cpp-qt .de2 {font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;font-family: monospace, monospace;}
.cpp-qt.source-cpp-qt  {font-family:monospace;}
.cpp-qt.source-cpp-qt .imp {font-weight: bold; color: red;}
.cpp-qt.source-cpp-qt li, .cpp-qt.source-cpp-qt .li1 {font-weight: normal; vertical-align:top;}
.cpp-qt.source-cpp-qt .ln {width:1px;text-align:right;margin:0;padding:0 2px;vertical-align:top;}
.cpp-qt.source-cpp-qt .li2 {font-weight: bold; vertical-align:top;}
.cpp-qt.source-cpp-qt .kw1 {color: #000000; font-weight:bold;}
.cpp-qt.source-cpp-qt .kw2 {color: #0057AE;}
.cpp-qt.source-cpp-qt .kw3 {color: #2B74C7;}
.cpp-qt.source-cpp-qt .kw4 {color: #0057AE;}
.cpp-qt.source-cpp-qt .kw5 {color: #22aadd;}
.cpp-qt.source-cpp-qt .co1 {color: #888888;}
.cpp-qt.source-cpp-qt .co2 {color: #006E28;}
.cpp-qt.source-cpp-qt .coMULTI {color: #888888; font-style: italic;}
.cpp-qt.source-cpp-qt .es0 {color: #000099; font-weight: bold;}
.cpp-qt.source-cpp-qt .es1 {color: #000099; font-weight: bold;}
.cpp-qt.source-cpp-qt .es2 {color: #660099; font-weight: bold;}
.cpp-qt.source-cpp-qt .es3 {color: #660099; font-weight: bold;}
.cpp-qt.source-cpp-qt .es4 {color: #660099; font-weight: bold;}
.cpp-qt.source-cpp-qt .es5 {color: #006699; font-weight: bold;}
.cpp-qt.source-cpp-qt .br0 {color: #006E28;}
.cpp-qt.source-cpp-qt .sy0 {color: #006E28;}
.cpp-qt.source-cpp-qt .st0 {color: #BF0303;}
.cpp-qt.source-cpp-qt .nu0 {color: #B08000;}
.cpp-qt.source-cpp-qt .nu6 {color: #208080;}
.cpp-qt.source-cpp-qt .nu8 {color: #208080;}
.cpp-qt.source-cpp-qt .nu12 {color: #208080;}
.cpp-qt.source-cpp-qt .nu16 {color:#800080;}
.cpp-qt.source-cpp-qt .nu17 {color:#800080;}
.cpp-qt.source-cpp-qt .nu18 {color:#800080;}
.cpp-qt.source-cpp-qt .nu19 {color:#800080;}
.cpp-qt.source-cpp-qt .me1 {color: #2B74C7;}
.cpp-qt.source-cpp-qt .me2 {color: #2B74C7;}
.cpp-qt.source-cpp-qt .me3 {color: #2B74C7;}
.cpp-qt.source-cpp-qt .ln-xtra, .cpp-qt.source-cpp-qt li.ln-xtra, .cpp-qt.source-cpp-qt div.ln-xtra {background-color: #ffc;}
.cpp-qt.source-cpp-qt span.xtra { display:block; }

/*]]>*/
</style><!--[if lt IE 7]><style type="text/css">body{behavior:url("/skins/vector/csshover.min.htc")}</style><![endif]--></head>
<body class="mediawiki ltr sitedir-ltr ns-0 ns-subject page-Einstieg_in_die_Programmierung_mit_Qt skin-vector action-view vector-animateLayout">
		<div id="mw-page-base" class="noprint"></div>
		<div id="mw-head-base" class="noprint"></div>
		<div id="content" class="mw-body" role="main">
			<a id="top"></a>
			<div id="mw-js-message" style="display:none;"></div>
						<h1 id="firstHeading" class="firstHeading" lang="en"><span dir="auto">Einstieg in die Programmierung mit Qt</span></h1>
						<div id="bodyContent">
								<div id="siteSub">From Qt Wiki</div>
								<div id="contentSub"></div>
												<div id="jump-to-nav" class="mw-jump">
					Jump to:					<a href="#mw-navigation">navigation</a>, 					<a href="#p-search">search</a>
				</div>
				<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr"><p><br />
</p>
<div id="toc" class="toc"><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Einstieg_in_die_Programmierung_mit_Qt"><span class="tocnumber">1</span> <span class="toctext">Einstieg in die Programmierung mit Qt</span></a>
<ul>
<li class="toclevel-2 tocsection-2"><a href="#Hallo_Notizzettel"><span class="tocnumber">1.1</span> <span class="toctext">Hallo Notizzettel</span></a></li>
<li class="toclevel-2 tocsection-4"><a href="#Einen_Knopf_zum_Beenden_hinzuf.C3.BCgen"><span class="tocnumber">1.2</span> <span class="toctext">Einen Knopf zum Beenden hinzufügen</span></a></li>
<li class="toclevel-2 tocsection-6"><a href="#Von_QWidget_abgeleitete_Klassen"><span class="tocnumber">1.3</span> <span class="toctext">Von QWidget abgeleitete Klassen</span></a></li>
<li class="toclevel-2 tocsection-9"><a href="#Ein_QMainWindow_verwenden"><span class="tocnumber">1.4</span> <span class="toctext">Ein QMainWindow verwenden</span></a></li>
<li class="toclevel-2 tocsection-11"><a href="#Speichern_und_einlesen"><span class="tocnumber">1.5</span> <span class="toctext">Speichern und einlesen</span></a></li>
</ul>
</li>
</ul>
</div>

<h1><span class="mw-headline" id="Einstieg_in_die_Programmierung_mit_Qt">Einstieg in die Programmierung mit Qt</span></h1>
<p>Willkommen in der Welt von Qt — dem Cross-Plattform-Werkzeug für graphische Benutzeroberflächen (Graphical User Interface = GUI). In dieser Einführung vermitteln wir grundlegende Kenntnisse zu Qt und entwicklen dazu eine einfache Notizzettel-Anwendung. Nach dem Studium dieser Anleitung sollten Sie in der Lage sein, sich eingehend mit unseren Übersichten und der Dokumentation unserer Programmierschnittstellen (APIs) zu beschäftigen, um die benötigten Informationen für die Entwicklung Ihrer Anwendung zu finden.
</p><p>Den englischen Originaltext zu dieser Übersetzung finden Sie unter der URL <a rel="nofollow" class="external free" href="http://doc.qt.io/qt-4.8/gettingstartedqt.html">http://doc.qt.io/qt-4.8/gettingstartedqt.html</a> bzw. <a rel="nofollow" class="external text" href="http://doc.qt.io/qt-5/gettingstartedqt.html">http://doc.qt.io/gettingstartedqt.html</a>.
</p>
<h2><span class="mw-headline" id="Hallo_Notizzettel">Hallo Notizzettel</span></h2>
<p>In diesem ersten Beispiel werden wir einen einfachen Notizzettel (Notepad) erzeugen und als Fenster auf dem Schreibtisch anzeigen. Das stellt das einfachste Qt-Programm mit grafischer Oberfläche dar.
</p><p><br />
</p>
<ul class="gallery mw-gallery-traditional">
		<li class="gallerybox" style="width: 155px"><div style="width: 155px">
			<div class="thumb" style="height: 150px;">/qt-4.8/images/gs1.png</div>
			<div class="gallerytext">
<p><img src="http://doc.qt.io/qt-4.8/images/gs1.png" alt="gs1.png" />
</p>
			</div>
		</div></li>
</ul>
<p>Der Quelltext dazu:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="cpp-qt source-cpp-qt"><pre class="de1"><span class="co2">#include &lt;QApplication&gt;</span>
<span class="co2">#include &lt;QTextEdit&gt;</span>
&#160;
<span class="kw4">int</span> main<span class="br0">&#40;</span><span class="kw4">int</span> argc<span class="sy0">,</span> <span class="kw4">char</span> <span class="sy0">*</span>argv<span class="br0">&#91;</span><span class="br0">&#93;</span><span class="br0">&#41;</span>
<span class="br0">&#123;</span>
 <span class="kw5">QApplication</span> app<span class="br0">&#40;</span>argc<span class="sy0">,</span> argv<span class="br0">&#41;</span><span class="sy0">;</span>
&#160;
 <span class="kw5">QTextEdit</span> textEdit<span class="sy0">;</span>
 textEdit.<span class="me1">show</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
&#160;
 <span class="kw1">return</span> app.<span class="me1">exec</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
<span class="br0">&#125;</span></pre></div></div>
<p>Wir werden den Code Zeile für Zeile analysieren. In den ersten zwei Zeilen binden wir die Header-Dateien für <a rel="nofollow" class="external text" href="http://doc.qt.io/qt-5/qapplication.html">QApplication</a> und <a rel="nofollow" class="external text" href="http://doc.qt.io/qt-5/qtextedit.html">QTextEdit</a> ein, die zwei für dieses Beispiel benötigten Klassen. Für alle Qt-Klassen gibt es Header-Dateien, die genauso benannt sind wie die Klasse selbst.
</p><p>Zeile 6 erzeugt ein <a rel="nofollow" class="external text" href="http://doc.qt.io/qt-5/qapplication.html">QApplication</a>-Objekt. Es verwaltet die Ressourcen für die gesamte Anwendung und wird immer für eine Qt-Anwendung mit GUI benötigt. Das Objekt benötigt argc und argv, weil Qt-Anwendungen einige Kommandozeilen-Optionen auswerten können.
</p><p>Zeile 8 erzeugt ein <a rel="nofollow" class="external text" href="http://doc.qt.io/qt-5/qtextedit.html">QTextEdit</a>-Objekt. Ein Texteditor ist ein sichtbares Element der GUI. In Qt werden diese Elemente "Widgets" genannt (ein Kunstwort aus Window (Fenster) und Gadget (Vorrichtung)). Beispiele für weitere Widgets sind "scroll bars" (Rollbalken), "Labels" (Beschriftungen/Markierungen) und "radio buttons" (eine Auswahl von Optionen, von denen nur eine ausgewählt werden kann). Ein Widget kann als Container für andere Widgets benutzt werden, beispielsweise ein Dialog oder das Hauptfenster einer Anwendung.
</p><p>Zeile 9 zeigt den Texteditor als eigenständiges Fenster auf dem Bildschirm an. Da Widgets auch als Container fungieren können (z.B. ein <a rel="nofollow" class="external text" href="http://doc.qt.io/qt-5/qmainwindow.html">QMainWindow</a>, das Werkzeugleisten, Menüs, eine Statuszeile und einige andere Widgets enthält), kann ein einzelnes Widget auch als einzelnes Fenster auf dem Bildschirm dargestellt werden. Ein Widget ist von Haus aus nicht sichtbar, erst die Funktion <a rel="nofollow" class="external text" href="http://doc.qt.io/qt-5/qwidget.html#show">show()</a> macht es sichtbar.
</p><p>In Zeile 11 startet <a rel="nofollow" class="external text" href="http://doc.qt.io/qt-5/qapplication.html">QApplication</a> seine Ereignis-Schleife ("event loop"). Wenn eine Qt-Anwendung läuft, werden verschiedene Ereignisse ("events") erzeugt und an die Widgets der Anwendung weitergereicht. Dabei handelt es sich z.B. um das Drücken einer Maustaste oder einen Tastaturanschlag. Wenn Sie in einem Texteditor Text eingeben, erhält er verschiedene "Taste gedrückt"-Ereignisse und reagiert darauf, indem er den eingegebenen Text auf dem Bildschirm darstellt.
</p><p>Um die Anwendung auszuführen, öffnen Sie eine Kommanndozeilen-Umgebung (shell) und wechseln Sie in das Verzeichnis, in dem sich die .cpp-Datei ihres Programms befindet. Folgende Befehle erzeugen das Programm:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="cpp-qt source-cpp-qt"><pre class="de1">qmake <span class="sy0">-</span>project
qmake
make</pre></div></div>
<p>Damit wird eine ausführbare Datei im Verzeichnis teil1 erzeugt (bitte beachten Sie: unter Windows müssen Sie ggf. nmake anstelle von make verwenden. Außerdem wird die ausführbare Datei in teil1\debug oder teil1\release erzeugt). qmake ist das Erstellungs-Werkzeug von Qt und benötigt eine Konfigurationsdatei. qmake erzeugt diese Datei für uns, wenn wir es mit dem Argument -project aufrufen. Zusammen mit der Konfigurationsdatei (mit der Endung .pro) generiert qmake ein Makefile, mit dem das Programm erstellt werden kann. Wir sehen uns später an, wie man .pro-Dateien selbst schreibt.
</p>
<h3><span class="mw-headline" id="Weitere_Informationen">Weitere Informationen</span></h3>
<p>|<i>. Über… |</i>. Hier… |
|Widgets und Fenster-Geometrie | <a rel="nofollow" class="external text" href="http://doc.qt.io/qt-5/application-windows.html">Window and Dialog Widget</a> |
|Ereignisse und ihre Behandlung | <a rel="nofollow" class="external text" href="http://doc.qt.io/qt-5/eventsandfilters.html">The Event System</a> |
</p>
<h2><span class="mw-headline" id="Einen_Knopf_zum_Beenden_hinzuf.C3.BCgen">Einen Knopf zum Beenden hinzufügen</span></h2>
<p>Eine richtige Anwendung benötigt üblicherweise mehr als ein Widget. Wir werden jetzt einen <a rel="nofollow" class="external text" href="http://doc.qt.io/qt-5/qpushbutton.html">QPushButton</a> unterhalb des Notizzettels einfügen. Die Anwendung wird beendet, wenn der Knopf gedrückt wird, d.h. mit der Maus auf ihn geklickt wird.
</p>
<ul class="gallery mw-gallery-traditional">
		<li class="gallerybox" style="width: 155px"><div style="width: 155px">
			<div class="thumb" style="height: 150px;">/qt-4.8/images/gs2.png</div>
			<div class="gallerytext">
<p><img src="http://doc.qt.io/qt-4.8/images/gs2.png" alt="gs2.png" />
</p>
			</div>
		</div></li>
</ul>
<p>Sehen wir uns den Code dazu an:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="cpp-qt source-cpp-qt"><pre class="de1"><span class="co2">#include &lt;QApplication&gt;</span>
<span class="co2">#include &lt;QLayout&gt;</span>
<span class="co2">#include &lt;QTextEdit&gt;</span>
<span class="co2">#include &lt;QPushButton&gt;</span>
&#160;
<span class="kw4">int</span> main<span class="br0">&#40;</span><span class="kw4">int</span> argc<span class="sy0">,</span> <span class="kw4">char</span> <span class="sy0">*</span>argv<span class="br0">&#91;</span><span class="br0">&#93;</span><span class="br0">&#41;</span>
<span class="br0">&#123;</span>
 <span class="kw5">QApplication</span> app<span class="br0">&#40;</span>argc<span class="sy0">,</span> argv<span class="br0">&#41;</span><span class="sy0">;</span>
&#160;
 <span class="kw5">QTextEdit</span> <span class="sy0">*</span>textEdit <span class="sy0">=</span> <span class="kw1">new</span> QTextEdit<span class="sy0">;</span>
 <span class="kw5">QPushButton</span> <span class="sy0">*</span>quitButton <span class="sy0">=</span> <span class="kw1">new</span> <span class="kw5">QPushButton</span><span class="br0">&#40;</span><span class="st0">&quot;&amp;Quit&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span>
&#160;
 <span class="kw5">QObject</span><span class="sy0">::</span><span class="kw2">connect</span><span class="br0">&#40;</span>quitButton<span class="sy0">,</span> SIGNAL <span class="br0">&#40;</span>clicked<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">,</span> qApp<span class="sy0">,</span> SLOT <span class="br0">&#40;</span>quit<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span>
&#160;
 <span class="kw5">QVBoxLayout</span> <span class="sy0">*</span>layout <span class="sy0">=</span> <span class="kw1">new</span> QVBoxLayout<span class="sy0">;</span>
 layout<span class="sy0">-&gt;</span><span class="me3">addWidget</span><span class="br0">&#40;</span>textEdit<span class="br0">&#41;</span><span class="sy0">;</span>
 layout<span class="sy0">-&gt;</span><span class="me3">addWidget</span><span class="br0">&#40;</span>quitButton<span class="br0">&#41;</span><span class="sy0">;</span>
&#160;
 <span class="kw5">QWidget</span> window<span class="sy0">;</span>
 window.<span class="me1">setLayout</span><span class="br0">&#40;</span>layout<span class="br0">&#41;</span><span class="sy0">;</span>
&#160;
 window.<span class="me1">show</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
&#160;
 <span class="kw1">return</span> app.<span class="me1">exec</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
<span class="br0">&#125;</span></pre></div></div>
<p>In Zeile 13 verwenden wir den Signal-Slot-Mechanismus von Qt, um die Anwendung zu beenden sobald der Beenden-Knopf gedrückt wurde. Ein "Slot" ist eine spezielle Funktion, die zur Laufzeit über ihren Namen (als reine Zeichenkette) aufgerufen werden kann. Ein "Signal" ist ebenfalls eine spezielle Funktion. Wird sie aufgerufen, werden wiederum die bei ihr registrierten Slots ausgeführt. Wir nennen das "den Slot mit dem Signal verbinden" ("connect") bzw. das Signal aussenden ("emit").
</p><p><a rel="nofollow" class="external text" href="http://doc.qt.io/qt-5/qcoreapplication.html#quit">quit()</a> ist ein Slot in <a rel="nofollow" class="external text" href="http://doc.qt.io/qt-5/qapplication.html">QApplication</a> und beendet die Anwendung. <a rel="nofollow" class="external text" href="http://doc.qt.io/qt-5/qabstractbutton.html#clicked">clicked()</a> ist ein Signal, das von <a rel="nofollow" class="external text" href="http://doc.qt.io/qt-5/qpushbutton.html">QPushButton</a> ausgesendet wird, wenn er gedrückt wird. Die statische Funktion <a rel="nofollow" class="external text" href="http://doc.qt.io/qt-5/qobject.html#connect">QObject::connect()</a> dient dazu, den Slot mit dem Signal zu verbinden. SIGNAL () und SLOT() sind zwei Makros, die die Funktions-Signaturen für die zu verbindenden Signale und Slots erhalten. Außerdem müssen Zeiger auf die Objekte angegeben werden, die das Signal aussenden und empfangen. 
</p><p>In Zeile 15 wird ein <a rel="nofollow" class="external text" href="http://doc.qt.io/qt-5/qvboxlayout.html">QVBoxLayout</a> erzeugt. Wie bereits erwähnt, können Widgets andere Widgets enthalten. Es ist möglich, die Geometrie (Größe und Position) eines Unter-Widgets (Kind-Widget) direkt zu setzen. Üblicherweise ist es aber einfacher, eine Layout-Klasse zu verwenden, die die Geometrie der Kinder eines Widgets verwaltet. Ein <a rel="nofollow" class="external text" href="http://doc.qt.io/qt-5/qvboxlayout.html">QVBoxLayout</a> beispielsweise ordnet die Kinder in einer Zeile nebeneinander an.
</p><p>In Zeile 16 und 17 wird der Editor und der Knopf in das Layout eingefügt. In Zeile 20 weisen wir das Layout einem Widget zu.
</p>
<h3><span class="mw-headline" id="Weitere_Informationen_2">Weitere Informationen</span></h3>
<p>|<i>. Über… |</i>. Hier… |
|Signale und Slots | <a rel="nofollow" class="external text" href="http://doc.qt.io/qt-5/signalsandslots.html%7C">Signals &amp; Slots</a>
|Layouts | <a rel="nofollow" class="external text" href="http://doc.qt.io/qt-5/layout.html">Layout Management</a>, <a rel="nofollow" class="external text" href="http://doc.qt.io/qt-5/widgets-and-layouts.html">Widgets and Layouts</a>, <a rel="nofollow" class="external text" href="http://doc.qt.io/qt-5/examples-layouts.html">Layout Examples</a> |
|Die von Qt mitgelieferten Widgets | <a rel="nofollow" class="external text" href="http://doc.qt.io/qt-5/gallery.html">Qt Widget Gallery</a>, <a rel="nofollow" class="external text" href="http://doc.qt.io/qt-5/examples-widgets.html">Widget Examples</a> |
</p>
<h2><span class="mw-headline" id="Von_QWidget_abgeleitete_Klassen">Von QWidget abgeleitete Klassen</span></h2>
<p>Wenn der Benutzer die Anwendung beenden möchte, wollen Sie ihn möglicherweise vorher fragen, ob er/sie das wirklich will. In diesem Beispiel erstellen wir eine von <a rel="nofollow" class="external text" href="http://doc.qt.io/qt-5/qwidget.html">QWidget</a> abgeleitete Klasse und fügen einen Slot hinzu, der mit dem Beenden-Knopf verbunden wird.
</p>
<ul class="gallery mw-gallery-traditional">
		<li class="gallerybox" style="width: 155px"><div style="width: 155px">
			<div class="thumb" style="height: 150px;">/qt-4.8/images/gs3.png</div>
			<div class="gallerytext">
<p><img src="http://doc.qt.io/qt-4.8/images/gs3.png" alt="gs3.png" />
</p>
			</div>
		</div></li>
</ul>
<p>Sehen wir uns den Quelltext an:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="cpp-qt source-cpp-qt"><pre class="de1"><span class="co2">#include &lt;QWidget&gt;</span>
<span class="co2">#include &lt;QTextEdit&gt;</span>
<span class="co2">#include &lt;QPushButton&gt;</span>
&#160;
<span class="kw2">class</span> Notepad <span class="sy0">:</span> <span class="kw2">public</span> <span class="kw5">QWidget</span>
<span class="br0">&#123;</span>
 <span class="kw2">Q_OBJECT</span>
&#160;
<span class="kw2">public</span><span class="sy0">:</span>
 Notepad<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
&#160;
<span class="kw2">private</span> <span class="kw2">slots</span><span class="sy0">:</span>
 <span class="kw4">void</span> quit<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
&#160;
<span class="kw2">private</span><span class="sy0">:</span>
 <span class="kw5">QTextEdit</span>   <span class="sy0">*</span>textEdit<span class="sy0">;</span>
 <span class="kw5">QPushButton</span> <span class="sy0">*</span>quitButton<span class="sy0">;</span>
<span class="br0">&#125;</span><span class="sy0">;</span></pre></div></div>
<p>Das Makro <a rel="nofollow" class="external text" href="http://doc.qt.io/qt-5/qobject.html#Q_OBJECT">Q_OBJECT</a> muss als erstes in der Definition der Klasse auftauchen. Es markiert unsere Klasse als <a rel="nofollow" class="external text" href="http://doc.qt.io/qt-5/qobject.html">QObject</a>- sie muss natürlich auch von <a rel="nofollow" class="external text" href="http://doc.qt.io/qt-5/qobject.html">QObject</a> (oder einer davon abgeleiteten Klasse) erben. <a rel="nofollow" class="external text" href="http://doc.qt.io/qt-5/qobject.html">QObject</a> fügt einer normalen C++-Klasse noch einige weitere Fähigkeiten hinzu. Insbesondere können die Namen der Klasse und der Slots zur Laufzeit abgefragt werden. Außerdem ist es möglich, die Parameter eines Slots abzufragen und die dazugehörige Funktion aufzurufen.
</p><p>In Zeile 13 wird der Slot quit() deklariert. Das geht mit dem Makro slots ganz einfach. Der Slot quit() kann nun mit einem Signal mit passender Signatur (jedes Signal, das keinen Parameter hat) verbunden werden.
</p><p>Die Benutzeroberfläche erzeugen wir nicht mehr in der Funktion main(), sondern im Konstruktor von Notepad. Dort verbinden wir auch den Slot.
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="cpp-qt source-cpp-qt"><pre class="de1"><span class="co2">#include &quot;notepad.h&quot;</span>
<span class="co2">#include &lt;QApplication&gt;</span>
&#160;
Notepad<span class="sy0">::</span><span class="me2">Notepad</span><span class="br0">&#40;</span><span class="br0">&#41;</span>
<span class="br0">&#123;</span>
 textEdit   <span class="sy0">=</span> <span class="kw1">new</span> QTextEdit<span class="sy0">;</span>
 quitButton <span class="sy0">=</span> <span class="kw1">new</span> <span class="kw5">QPushButton</span><span class="br0">&#40;</span>tr<span class="br0">&#40;</span><span class="st0">&quot;Quit&quot;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span>
&#160;
 <span class="kw2">connect</span><span class="br0">&#40;</span>quitButton<span class="sy0">,</span> SIGNAL <span class="br0">&#40;</span>clicked<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">,</span> <span class="kw1">this</span><span class="sy0">,</span> SLOT <span class="br0">&#40;</span>quit<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span>
&#160;
 <span class="kw5">QVBoxLayout</span> <span class="sy0">*</span>layout <span class="sy0">=</span> <span class="kw1">new</span> QVBoxLayout<span class="sy0">;</span>
 layout<span class="sy0">-&gt;</span><span class="me3">addWidget</span><span class="br0">&#40;</span>textEdit<span class="br0">&#41;</span><span class="sy0">;</span>
 layout<span class="sy0">-&gt;</span><span class="me3">addWidget</span><span class="br0">&#40;</span>quitButton<span class="br0">&#41;</span><span class="sy0">;</span>
&#160;
 setLayout<span class="br0">&#40;</span>layout<span class="br0">&#41;</span><span class="sy0">;</span>
&#160;
 setWindowTitle<span class="br0">&#40;</span>tr<span class="br0">&#40;</span><span class="st0">&quot;Notepad&quot;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span>
<span class="br0">&#125;</span>
&#160;
<span class="kw4">void</span> Notepad<span class="sy0">::</span><span class="me2">quit</span><span class="br0">&#40;</span><span class="br0">&#41;</span>
<span class="br0">&#123;</span>
 qApp<span class="sy0">-&gt;</span><span class="me3">quit</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
<span class="br0">&#125;</span></pre></div></div>
<p>Wie sie in der Definition der Klasse gesehen haben, benutzen wir Zeiger auf unsere <a rel="nofollow" class="external text" href="http://doc.qt.io/qt-5/qobject.html-Objekte">QObject</a> (textEdit und quitButton). Grundsätzlich gilt, dass Sie Instanzen von <a rel="nofollow" class="external text" href="http://doc.qt.io/qt-5/qobject.html">QObject</a> (und davon abgeleiteten Klassen) auf dem Heap erzeugen und sie niemals kopieren sollten.
</p><p>Von jetzt an kapseln wir die für den Benutzer sichtbaren Zeichenketten in der Funktion <a rel="nofollow" class="external text" href="http://doc.qt.io/qt-5/qobject.html#tr">tr()</a>. Das ist notwendig, wenn Sie die Anwendung in mehreren Sprachen (z.B. Deutsch und Englisch) zur Verfügung stellen möchten. Auf Einzelheiten gehen wir an dieser Stelle nicht ein. Mehr erfahren Sie über den Link zu Qt Linguist in der Tabelle mit weiteren Informationen.
</p>
<h3><span class="mw-headline" id="Weitere_Informationen_3">Weitere Informationen</span></h3>
<p>|<i>. Über… |</i>. Hier… |
|tr() und "Internationalisierung" |<a rel="nofollow" class="external text" href="http://doc.qt.io/qt-5/linguist-manual.html">Qt Linguist Manual</a>, <a rel="nofollow" class="external text" href="http://doc.qt.io/qt-5/i18n-source-translation.html">Writing Source Code for Translation</a>, <a rel="nofollow" class="external text" href="http://doc.qt.io/qt-5/linguist-hellotr.html">Hello tr() Example</a>, <a rel="nofollow" class="external text" href="http://doc.qt.io/qt-5/internationalization.html">Internationalization with Qt</a> |
|<a rel="nofollow" class="external text" href="http://doc.qt.io/qt-5/qtwebkit-bridge.html#qobjects">QObjects</a> und das Objekt-Model von Qt |[hhttp://doc.qt.io/qt-5//object.html Object Model] |
|qmake und das Erstellungs-System von Qt|<a rel="nofollow" class="external text" href="http://doc.qt.io/qt-5/qmake-manual.html">qmake Manual</a> |
</p>
<h3><span class="mw-headline" id="Eine_.pro-Datei_erzeugen">Eine .pro-Datei erzeugen</span></h3>
<p>Für dieses Beispiel werden wir eine eigene .pro-Datei erstellen, und nicht die Option -project von qmake.
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="cpp-qt source-cpp-qt"><pre class="de1">HEADERS <span class="sy0">=</span> notepad.<span class="me1">h</span>
SOURCES <span class="sy0">=</span> notepad.<span class="me1">cpp</span>  main.<span class="me1">cpp</span></pre></div></div>
<p>Folgende Befehle erzeugen das Programm
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="cpp-qt source-cpp-qt"><pre class="de1">qmake
make</pre></div></div>
<h2><span class="mw-headline" id="Ein_QMainWindow_verwenden">Ein QMainWindow verwenden</span></h2>
<p>Viele Anwendungen werden vom Einsatz eines <a rel="nofollow" class="external text" href="http://doc.qt.io/qt-5/qmainwindow.html">QMainWindow</a> (Hauptfenster) profitieren. Es hat sein eigenes Layout, dem Sie eine Menüzeile, Dock Widgets (es gibt keine vernünftige deutsche Übersetzung hierfür), Werkzeugleisten und eine Status-Zeile hinzufügen können. <a rel="nofollow" class="external text" href="http://doc.qt.io/qt-5/qmainwindow.html">QMainWindow</a> hat einen zentralen Bereich, der von jeder Art von Widget ausgefüllt werden kann. In unserem Beispiel werden wir hier den Texteditor platzieren.
</p>
<ul class="gallery mw-gallery-traditional">
		<li class="gallerybox" style="width: 155px"><div style="width: 155px">
			<div class="thumb" style="height: 150px;">/qt-4.8/images/gs4.png</div>
			<div class="gallerytext">
<p><img src="http://doc.qt.io/qt-4.8/images/gs4.png" alt="gs4.png" />
</p>
			</div>
		</div></li>
</ul>
<p>Sehen wir uns die neue Definition der Klasse Notepad an.
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="cpp-qt source-cpp-qt"><pre class="de1"><span class="co2">#include &lt;QMainWindow&gt;</span>
<span class="co2">#include &lt;QTextEdit&gt;</span>
<span class="co2">#include &lt;QAction&gt;</span>
<span class="co2">#include &lt;QMenu&gt;</span>
&#160;
<span class="kw2">class</span> Notepad <span class="sy0">:</span> <span class="kw2">public</span> <span class="kw5">QMainWindow</span>
<span class="br0">&#123;</span>
 <span class="kw2">Q_OBJECT</span>
&#160;
<span class="kw2">public</span><span class="sy0">:</span>
 Notepad<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
&#160;
<span class="kw2">private</span> <span class="kw2">slots</span><span class="sy0">:</span>
 <span class="kw4">void</span> open<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
 <span class="kw4">void</span> save<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
 <span class="kw4">void</span> quit<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
&#160;
<span class="kw2">private</span><span class="sy0">:</span>
 <span class="kw5">QTextEdit</span> <span class="sy0">*</span>textEdit<span class="sy0">;</span>
&#160;
 <span class="kw5">QAction</span> <span class="sy0">*</span>openAction<span class="sy0">;</span>
 <span class="kw5">QAction</span> <span class="sy0">*</span>saveAction<span class="sy0">;</span>
 <span class="kw5">QAction</span> <span class="sy0">*</span>exitAction<span class="sy0">;</span>
&#160;
 <span class="kw5">QMenu</span> <span class="sy0">*</span>fileMenu<span class="sy0">;</span>
<span class="br0">&#125;</span><span class="sy0">;</span></pre></div></div>
<p>Wir fügen zwei weitere Slots hinzu, mit denen ein Dokument gelesen und gespeichert werden kann. Wir werden sie im folgenden Abschnitt implementieren.
</p><p>In einem Hauptfenster muss der selbe Slot oftmals von mehreren verschiedenen Widgets aus aufgerufen werden. Dazu gehören beispielsweise Menüpunkte und Knöpfe in einer Werkzeugleiste. Um diese Aufgabe zu erleichtern, gibt es in Qt die Klasse <a rel="nofollow" class="external text" href="http://doc.qt.io/qt-5/qaction.html">QAction</a>, die mit mehreren Widgets verknüpft und mit einem Slot verbunden werden kann. So erzeugen beispielsweise sowohl <a rel="nofollow" class="external text" href="http://doc.qt.io/qt-5/qmenu.html">QMenu</a> als auch <a rel="nofollow" class="external text" href="http://doc.qt.io/qt-5/qtoolbar.html">QToolBar</a> Menüpunkte und Werkzeug-Knöpfe aus den selben <a rel="nofollow" class="external text" href="http://doc.qt.io/qt-5/qaction.html">QActions</a>. Wie das funktioniert werden wir in Kürze sehen.
</p><p>Wie vorhin bauen wir die Benutzeroberfläche im Konstruktor von Notepad zusammen.
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="cpp-qt source-cpp-qt"><pre class="de1"><span class="co2">#include &quot;notepad.h&quot;</span>
<span class="co2">#include &lt;QMenuBar&gt;</span>
&#160;
Notepad<span class="sy0">::</span><span class="me2">Notepad</span><span class="br0">&#40;</span><span class="br0">&#41;</span>
<span class="br0">&#123;</span>
 openAction <span class="sy0">=</span> <span class="kw1">new</span> <span class="kw5">QAction</span><span class="br0">&#40;</span>tr<span class="br0">&#40;</span><span class="st0">&quot;&amp;Open&quot;</span><span class="br0">&#41;</span><span class="sy0">,</span> <span class="kw1">this</span><span class="br0">&#41;</span><span class="sy0">;</span>
 saveAction <span class="sy0">=</span> <span class="kw1">new</span> <span class="kw5">QAction</span><span class="br0">&#40;</span>tr<span class="br0">&#40;</span><span class="st0">&quot;&amp;Save&quot;</span><span class="br0">&#41;</span><span class="sy0">,</span> <span class="kw1">this</span><span class="br0">&#41;</span><span class="sy0">;</span>
 exitAction <span class="sy0">=</span> <span class="kw1">new</span> <span class="kw5">QAction</span><span class="br0">&#40;</span>tr<span class="br0">&#40;</span><span class="st0">&quot;E&amp;xit&quot;</span><span class="br0">&#41;</span><span class="sy0">,</span> <span class="kw1">this</span><span class="br0">&#41;</span><span class="sy0">;</span>
&#160;
 <span class="kw2">connect</span><span class="br0">&#40;</span>openAction<span class="sy0">,</span> SIGNAL <span class="br0">&#40;</span>triggered<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">,</span> <span class="kw1">this</span><span class="sy0">,</span> SLOT <span class="br0">&#40;</span>open<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span>
 <span class="kw2">connect</span><span class="br0">&#40;</span>saveAction<span class="sy0">,</span> SIGNAL <span class="br0">&#40;</span>triggered<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">,</span> <span class="kw1">this</span><span class="sy0">,</span> SLOT <span class="br0">&#40;</span>save<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span>
 <span class="kw2">connect</span><span class="br0">&#40;</span>exitAction<span class="sy0">,</span> SIGNAL <span class="br0">&#40;</span>triggered<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">,</span> <span class="kw1">this</span><span class="sy0">,</span> SLOT <span class="br0">&#40;</span>quit<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span>
&#160;
 fileMenu <span class="sy0">=</span> menuBar<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">-&gt;</span><span class="me3">addMenu</span><span class="br0">&#40;</span>tr<span class="br0">&#40;</span><span class="st0">&quot;&amp;File&quot;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span>
 fileMenu<span class="sy0">-&gt;</span><span class="me3">addAction</span><span class="br0">&#40;</span>openAction<span class="br0">&#41;</span><span class="sy0">;</span>
 fileMenu<span class="sy0">-&gt;</span><span class="me3">addAction</span><span class="br0">&#40;</span>saveAction<span class="br0">&#41;</span><span class="sy0">;</span>
 fileMenu<span class="sy0">-&gt;</span><span class="me3">addSeparator</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
 fileMenu<span class="sy0">-&gt;</span><span class="me3">addAction</span><span class="br0">&#40;</span>exitAction<span class="br0">&#41;</span><span class="sy0">;</span>
&#160;
 textEdit <span class="sy0">=</span> <span class="kw1">new</span> QTextEdit<span class="sy0">;</span>
 setCentralWidget<span class="br0">&#40;</span>textEdit<span class="br0">&#41;</span><span class="sy0">;</span>
&#160;
 setWindowTitle<span class="br0">&#40;</span>tr<span class="br0">&#40;</span><span class="st0">&quot;Notepad&quot;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span>
<span class="br0">&#125;</span></pre></div></div>
<p><a rel="nofollow" class="external text" href="http://doc.qt.io/qt-5/qaction.html">QActions</a> werden mit einem Text erzeugt, der auf/mit den Widgets dargestellt werden soll, denen wir sie zuordnen (in unserem Fall Menüpunkte). Wenn wir sie auch in einer Werkzeugleiste verwenden wollen, könnten wir ihnen noch <a rel="nofollow" class="external text" href="http://doc.qt.io/qt-5/qicon.html">Icons</a> (kleine Bilder) zuweisen.
</p><p>Wenn jetzt ein Menüpunkt aufgerufen wird, so wird die dazugehörige Aktion getriggert und der mit ihr verbundene Slot wird aufgerufen.
</p>
<h3><span class="mw-headline" id="Weitere_Informationen_4">Weitere Informationen</span></h3>
<p>|<i>. Über… |</i>. Hier… |
| Hauptfenster und die zugehörigen Klassen | <a rel="nofollow" class="external text" href="http://doc.qt.io/qt-5/mainwindow.html">Application Main Window</a>, <a rel="nofollow" class="external text" href="http://doc.qt.io/qt-5/examples-mainwindow.html">Main Window Examples</a> |
| MDI-Anwendungen | <a rel="nofollow" class="external text" href="http://doc.qt.io/qt-5/qmdiarea.html">QMdiArea</a>, <a rel="nofollow" class="external text" href="http://doc.qt.io/qt-5/mainwindows-mdi.html">MDI Example</a> |
</p>
<h2><span class="mw-headline" id="Speichern_und_einlesen">Speichern und einlesen</span></h2>
<p>In diesem Beispiel implementieren wir die beiden Slots open() und save(), die wir zuvor ergänzt haben.
</p>
<ul class="gallery mw-gallery-traditional">
		<li class="gallerybox" style="width: 155px"><div style="width: 155px">
			<div class="thumb" style="height: 150px;">/qt-4.8/images/gs5.png</div>
			<div class="gallerytext">
<p><img src="http://doc.qt.io/qt-4.8/images/gs5.png" alt="gs5.png" />
</p>
			</div>
		</div></li>
</ul>
<p>Wir kümmern uns zuerst um den Slot open() zum öffnen eines Dokuments:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="cpp-qt source-cpp-qt"><pre class="de1"><span class="co2">#include &lt;QFileDialog&gt;</span>
<span class="co2">#include &lt;QMessageBox&gt;</span>
&#160;
<span class="kw4">void</span> Notepad<span class="sy0">::</span><span class="me2">open</span><span class="br0">&#40;</span><span class="br0">&#41;</span>
<span class="br0">&#123;</span>
 <span class="kw5">QString</span> fileName <span class="sy0">=</span> <span class="kw5">QFileDialog</span><span class="sy0">::</span><span class="me2">getOpenFileName</span><span class="br0">&#40;</span><span class="kw1">this</span><span class="sy0">,</span> tr<span class="br0">&#40;</span><span class="st0">&quot;Open File&quot;</span><span class="br0">&#41;</span><span class="sy0">,</span> <span class="st0">&quot;&quot;</span><span class="sy0">,</span>
  tr<span class="br0">&#40;</span><span class="st0">&quot;Text Files (*.txt);;C++ Files (*.cpp *.h)&quot;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span>
&#160;
 <span class="kw1">if</span> <span class="br0">&#40;</span>fileName <span class="sy0">!=</span> <span class="st0">&quot;&quot;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
  <span class="kw5">QFile</span> file<span class="br0">&#40;</span>fileName<span class="br0">&#41;</span><span class="sy0">;</span>
&#160;
  <span class="kw1">if</span> <span class="br0">&#40;</span><span class="sy0">!</span>file.<span class="me1">open</span><span class="br0">&#40;</span><span class="kw5">QIODevice</span><span class="sy0">::</span><span class="me2">ReadOnly</span><span class="br0">&#41;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
   <span class="kw5">QMessageBox</span><span class="sy0">::</span><span class="me2">critical</span><span class="br0">&#40;</span><span class="kw1">this</span><span class="sy0">,</span> tr<span class="br0">&#40;</span><span class="st0">&quot;Error&quot;</span><span class="br0">&#41;</span><span class="sy0">,</span>
   tr<span class="br0">&#40;</span><span class="st0">&quot;Could not open file&quot;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span>
   return<span class="sy0">;</span>
  <span class="br0">&#125;</span>
&#160;
  <span class="kw5">QString</span> contents <span class="sy0">=</span> file.<span class="me1">readAll</span><span class="br0">&#40;</span><span class="br0">&#41;</span>.<span class="me1">constData</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
  textEdit<span class="sy0">-&gt;</span><span class="me3">setPlainText</span><span class="br0">&#40;</span>contents<span class="br0">&#41;</span><span class="sy0">;</span>
  file.<span class="me1">close</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
 <span class="br0">&#125;</span>
<span class="br0">&#125;</span></pre></div></div>
<p>Als erstes müssen wir den Benutzer nach der zu öffnenden Datei fragen. Qt stellt einen <a rel="nofollow" class="external text" href="http://doc.qt.io/qt-5/qfiledialog.html">QFileDialog</a> zur Verfügung, mit dem ein Benutzer eine Datei auswählen kann. Die Abbildung oben zeigt den Dialog wie er unter Kubuntu aussieht. Die statische Funktion <a rel="nofollow" class="external text" href="http://doc.qt.io/qt-5/qfiledialog.html#getOpenFileName">getOpenFileName()</a> zeigt einen modalen Dialog zur Dateiauswahl und kehrt erst zurück, wenn der Benutzer eine Datei ausgewählt oder die Aktion abgebrochen hat. Sie liefert den Pfad zur ausgwählten Datei zurück, oder eine leere Zeichenkette, falls der Benutzer die Auswahl abgebrochen hat.
</p><p>Haben wir einen Dateinamen erhalten, versuchen wir die Datei mit <a rel="nofollow" class="external text" href="http://doc.qt.io/qt-5/qiodevice.html#open">open()</a> zu öffnen. Die Funktion liefert true zurück, wenn das erfolgreich war. Die Fehlerbehandlung wollen wir an dieser Stelle nicht weiter vertiefen, mehr erfahren Sie in den Links im Kasten "Weitere Informationen". Falls die Datei nicht geöffnet werden kann, benutzen wir eine <a rel="nofollow" class="external text" href="http://doc.qt.io/qt-5/qmessagebox.html">QMessageBox</a> um einen Dialog mit Fehlermeldung anzuzeigen (Weitere Details finden Sie in der Klassenbeschreibung von <a rel="nofollow" class="external text" href="http://doc.qt.io/qt-5/qmessagebox.html">QMessageBox</a>).
</p><p>Das eigentliche Einlesen der Daten ist einfach, wir benutzen die Funktion <a rel="nofollow" class="external text" href="http://doc.qt.io/qt-5/qiodevice.html#readAll">readAll()</a>, die den gesamten Inhalt der Datei in einem <a rel="nofollow" class="external text" href="http://doc.qt.io/qt-5/qbytearray.html">QByteArray</a> zurückliefert. Die Funktion <a rel="nofollow" class="external text" href="http://doc.qt.io/qt-5/qbytearray.html#constData">constData()</a> liefert die Daten des Arrays als const char<b> zurück, was wiederum zur Initialisierung im Konstruktor eines <a rel="nofollow" class="external text" href="http://doc.qt.io/qt-5/qstring.html">QString</a> verwendet werden kann. Der Inhalt kann damit im Texteditor dargestellt werden. Wir schließen die Datei mit <a rel="nofollow" class="external text" href="http://doc.qt.io/qt-5/qiodevice.html#close">close()</a>, um die belegten Ressourcen (z.B. den File-Descriptor) an das Betriebssystem zurückzugeben.</b>
</p><p>Sehen wir uns nun den Slot save() zum abspeichern des Textes an:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="cpp-qt source-cpp-qt"><pre class="de1"><span class="co2">#include &lt;QFileDialog&gt;</span>
<span class="co2">#include &lt;QTextStream&gt;</span>
&#160;
<span class="kw4">void</span> Notepad<span class="sy0">::</span><span class="me2">save</span><span class="br0">&#40;</span><span class="br0">&#41;</span>
<span class="br0">&#123;</span>
 <span class="kw5">QString</span> fileName <span class="sy0">=</span> <span class="kw5">QFileDialog</span><span class="sy0">::</span><span class="me2">getSaveFileName</span><span class="br0">&#40;</span><span class="kw1">this</span><span class="sy0">,</span> tr<span class="br0">&#40;</span><span class="st0">&quot;Save File&quot;</span><span class="br0">&#41;</span><span class="sy0">,</span> <span class="st0">&quot;&quot;</span><span class="sy0">,</span>
  tr<span class="br0">&#40;</span><span class="st0">&quot;Text Files (*.txt);;C++ Files (*.cpp *.h)&quot;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span>
&#160;
 <span class="kw1">if</span> <span class="br0">&#40;</span>fileName <span class="sy0">!=</span> <span class="st0">&quot;&quot;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
  <span class="kw5">QFile</span> file<span class="br0">&#40;</span>fileName<span class="br0">&#41;</span><span class="sy0">;</span>
&#160;
  <span class="kw1">if</span> <span class="br0">&#40;</span><span class="sy0">!</span>file.<span class="me1">open</span><span class="br0">&#40;</span><span class="kw5">QIODevice</span><span class="sy0">::</span><span class="me2">WriteOnly</span><span class="br0">&#41;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
   <span class="co1">// error message</span>
  <span class="br0">&#125;</span> <span class="kw1">else</span> <span class="br0">&#123;</span>
   <span class="kw5">QTextStream</span> stream<span class="br0">&#40;</span><span class="sy0">&amp;</span>file<span class="br0">&#41;</span><span class="sy0">;</span>
   stream <span class="sy0">&lt;&lt;</span> textEdit<span class="sy0">-&gt;</span><span class="me3">toPlainText</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
   stream.<span class="me1">flush</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
   file.<span class="me1">close</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
  <span class="br0">&#125;</span>
 <span class="br0">&#125;</span>
<span class="br0">&#125;</span></pre></div></div>
<p>Zum Schreiben des Textes in eine Datei benutzen wir die Klasse <a rel="nofollow" class="external text" href="http://doc.qt.io/qt-5/qtextstream.html">QTextStream</a>, ein Aufsatz (Wrapper) für <a rel="nofollow" class="external text" href="http://doc.qt.io/qt-5/qfile.html-Objekte">QFile</a>. Der <a rel="nofollow" class="external text" href="http://doc.qt.io/qt-5/qtextstream.html">QTextStream</a> kann QStrings direkt in eine Datei schreiben; <a rel="nofollow" class="external text" href="http://doc.qt.io/qt-5/qfile.html">QFile</a> hingegen kann nur einfache Zeichenketten (char<b>) über die Funktion <a rel="nofollow" class="external text" href="http://doc.qt.io/qt-5/qiodevice.html#write">write()</a> von <a rel="nofollow" class="external text" href="http://doc.qt.io/qt-5/qiodevice.html">QIODevice</a> schreiben.</b>
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="cpp-qt source-cpp-qt"><pre class="de1"><span class="co2">#include &lt;QApplication&gt;</span>
<span class="co2">#include &lt;QMessageBox&gt;</span>
&#160;
<span class="kw4">void</span> Notepad<span class="sy0">::</span><span class="me2">quit</span><span class="br0">&#40;</span><span class="br0">&#41;</span>
<span class="br0">&#123;</span>
 <span class="kw5">QMessageBox</span> messageBox<span class="sy0">;</span>
 messageBox.<span class="me1">setWindowTitle</span><span class="br0">&#40;</span>tr<span class="br0">&#40;</span><span class="st0">&quot;Notepad&quot;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span>
 messageBox.<span class="me1">setText</span><span class="br0">&#40;</span>tr<span class="br0">&#40;</span><span class="st0">&quot;Do you really want to quit?&quot;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span>
 messageBox.<span class="me1">setStandardButtons</span><span class="br0">&#40;</span><span class="kw5">QMessageBox</span><span class="sy0">::</span><span class="me2">Yes</span> <span class="sy0">|</span> <span class="kw5">QMessageBox</span><span class="sy0">::</span><span class="me2">No</span><span class="br0">&#41;</span><span class="sy0">;</span>
 messageBox.<span class="me1">setDefaultButton</span><span class="br0">&#40;</span><span class="kw5">QMessageBox</span><span class="sy0">::</span><span class="me2">No</span><span class="br0">&#41;</span><span class="sy0">;</span>
&#160;
 <span class="kw1">if</span> <span class="br0">&#40;</span>messageBox.<span class="me1">exec</span><span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="sy0">==</span> <span class="kw5">QMessageBox</span><span class="sy0">::</span><span class="me2">Yes</span><span class="br0">&#41;</span>
  qApp<span class="sy0">-&gt;</span><span class="me3">quit</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
<span class="br0">&#125;</span></pre></div></div>
<p><br />
main.cpp
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="cpp-qt source-cpp-qt"><pre class="de1"><span class="co2">#include &quot;notepad.h&quot;</span>
<span class="co2">#include &lt;QApplication&gt;</span>
&#160;
<span class="kw4">int</span> main<span class="br0">&#40;</span><span class="kw4">int</span> argc<span class="sy0">,</span> <span class="kw4">char</span> <span class="sy0">*</span>argv<span class="br0">&#91;</span><span class="br0">&#93;</span><span class="br0">&#41;</span>
<span class="br0">&#123;</span>
 <span class="kw5">QApplication</span> app<span class="br0">&#40;</span>argc<span class="sy0">,</span> argv<span class="br0">&#41;</span><span class="sy0">;</span>
&#160;
 Notepad notepad<span class="sy0">;</span>
 notepad.<span class="me1">show</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
&#160;
 <span class="kw1">return</span> app.<span class="me1">exec</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
<span class="br0">&#125;</span></pre></div></div>
<p><br />
</p>
<h3><span class="mw-headline" id="Weitere_Informationen_5">Weitere Informationen</span></h3>
<p>|<i>. Über… |</i>. Hier… |
|Dateien und Ein-Ausgabe-Geräte
|<a rel="nofollow" class="external text" href="http://doc.qt.io/qt-5/qfile.html">QFile</a>, <a rel="nofollow" class="external text" href="http://doc.qt.io/qt-5/qiodevice.html">QIODevice</a>
|
</p>
<!-- 
NewPP limit report
CPU time usage: 0.286 seconds
Real time usage: 0.298 seconds
Preprocessor visited node count: 214/1000000
Preprocessor generated node count: 432/1000000
Post‐expand include size: 0/2097152 bytes
Template argument size: 0/2097152 bytes
Highest expansion depth: 2/40
Expensive parser function count: 0/100
-->

<!-- Saved in parser cache with key qtio_wiki:pcache:idhash:773-0!*!*!!en!*!* and timestamp 20151104133237 and revision id 17860
 -->
</div>								<div class="printfooter">
				Retrieved from "<a href="index211e.html?title=Einstieg_in_die_Programmierung_mit_Qt&amp;oldid=17860">http://wiki.qt.io/index.php?title=Einstieg_in_die_Programmierung_mit_Qt&amp;oldid=17860</a>"				</div>
												<div id='catlinks' class='catlinks'><div id="mw-normal-catlinks" class="mw-normal-catlinks"><a href="Special_Categories.html" title="Special:Categories">Categories</a>: <ul><li><a href="Category_Pages_with_broken_file_links.html?title=Category:Pages_with_broken_file_links&amp;action=edit&amp;redlink=1" class="new" title="Category:Pages with broken file links (page does not exist)">Pages with broken file links</a></li><li><a href="Category_Learning.html" title="Category:Learning">Learning</a></li></ul></div></div>												<div class="visualClear"></div>
							</div>
		</div>
		<div id="mw-navigation">
			<h2>Navigation menu</h2>
			<div id="mw-head">
				<div id="p-personal" role="navigation" class="" aria-labelledby="p-personal-label">
	<h3 id="p-personal-label">Personal tools</h3>
	<ul>
<li id="pt-anonuserpage"><a href="User_10.0.113.html" class="new" title="The user page for the IP address you are editing as [.]" accesskey=".">10.0.113.70</a></li><li id="pt-anontalk"><a href="User_talk_10.0.113.html" class="new" title="Discussion about edits from this IP address [n]" accesskey="n">Talk for this IP address</a></li><li id="pt-login"><a href="https://login.qt.io/authorize?client_id=one-qt-server-003&amp;response_type=code&amp;state=d3cf86daccae1033&amp;scope=authorizations&amp;redirect_uri=https%3A%2F%2Fwiki.qt.io%2FSpecial%3AQtLogin%2Fcallback" title="You are encouraged to log in; however, it is not mandatory [o]" accesskey="o">Sign in</a></li>	</ul>
</div>
				<div id="left-navigation">
					<div id="p-namespaces" role="navigation" class="vectorTabs" aria-labelledby="p-namespaces-label">
	<h3 id="p-namespaces-label">Namespaces</h3>
	<ul>
					<li  id="ca-nstab-main" class="selected"><span><a href="Einstieg_in_die_Programmierung_mit_Qt.html"  title="View the content page [c]" accesskey="c">Page</a></span></li>
					<li  id="ca-talk" class="new"><span><a href="Talk_Einstieg_in_die_Programmierung_mit_Qt.html?title=Talk:Einstieg_in_die_Programmierung_mit_Qt&amp;action=edit&amp;redlink=1"  title="Discussion about the content page [t]" accesskey="t">Discussion</a></span></li>
			</ul>
</div>
<div id="p-variants" role="navigation" class="vectorMenu emptyPortlet" aria-labelledby="p-variants-label">
	<h3 id="mw-vector-current-variant">
		</h3>
	<h3 id="p-variants-label"><span>Variants</span><a href="#"></a></h3>
	<div class="menu">
		<ul>
					</ul>
	</div>
</div>
				</div>
				<div id="right-navigation">
					<div id="p-views" role="navigation" class="vectorTabs" aria-labelledby="p-views-label">
	<h3 id="p-views-label">Views</h3>
	<ul>
					<li id="ca-view" class="selected"><span><a href="Einstieg_in_die_Programmierung_mit_Qt.html" >Read</a></span></li>
					<li id="ca-viewsource"><span><a href="index71d8.html?title=Einstieg_in_die_Programmierung_mit_Qt&amp;action=edit"  title="This page is protected.&#10;You can view its source [e]" accesskey="e">View source</a></span></li>
					<li id="ca-history" class="collapsible"><span><a href="index1ff9.html?title=Einstieg_in_die_Programmierung_mit_Qt&amp;action=history"  title="Past revisions of this page [h]" accesskey="h">View history</a></span></li>
			</ul>
</div>
<div id="p-cactions" role="navigation" class="vectorMenu emptyPortlet" aria-labelledby="p-cactions-label">
	<h3 id="p-cactions-label"><span>Actions</span><a href="#"></a></h3>
	<div class="menu">
		<ul>
					</ul>
	</div>
</div>
<div id="p-search" role="search">
	<h3><label for="searchInput">Search</label></h3>
	<form action="http://wiki.qt.io/index.php" id="searchform">
					<div id="simpleSearch">
					<input type="search" name="search" placeholder="Search" title="Search Qt Wiki [f]" accesskey="f" id="searchInput" /><input type="hidden" value="Special:Search" name="title" /><input type="submit" name="fulltext" value="Search" title="Search the pages for this text" id="mw-searchButton" class="searchButton mw-fallbackSearchButton" /><input type="submit" name="go" value="Go" title="Go to a page with this exact name if exists" id="searchButton" class="searchButton" />		</div>
	</form>
</div>
				</div>
			</div>
			<div id="mw-panel">
					<div id="p-logo" role="banner"><a style="background-image: url(skins/common/images/wiki.png);" href="Main_Page.html"  title="Visit the main page"></a></div>
				<div class="portal" role="navigation" id='p-navigation' aria-labelledby='p-navigation-label'>
	<h3 id='p-navigation-label'>Navigation</h3>
	<div class="body">
		<ul>
			<li id="n-mainpage-description"><a href="Main_Page.html" title="Visit the main page [z]" accesskey="z">Main page</a></li>
			<li id="n-recentchanges"><a href="Special_RecentChanges.html" title="A list of recent changes in the wiki [r]" accesskey="r">Recent changes</a></li>
			<li id="n-randompage"><a href="How_to_create_columns_in_a_QML_ListView.html" title="Load a random page [x]" accesskey="x">Random page</a></li>
			<li id="n-help"><a href="https://www.mediawiki.org/wiki/Special:MyLanguage/Help:Contents" title="The place to find out">Help</a></li>
		</ul>
	</div>
</div>
<div class="portal" role="navigation" id='p-tb' aria-labelledby='p-tb-label'>
	<h3 id='p-tb-label'>Tools</h3>
	<div class="body">
		<ul>
			<li id="t-whatlinkshere"><a href="Special_WhatLinksHere/Einstieg_in_die_Programmierung_mit_Qt.html" title="A list of all wiki pages that link here [j]" accesskey="j">What links here</a></li>
			<li id="t-recentchangeslinked"><a href="Special_RecentChangesLinked/Einstieg_in_die_Programmierung_mit_Qt.html" title="Recent changes in pages linked from this page [k]" accesskey="k">Related changes</a></li>
			<li id="t-specialpages"><a href="Special_SpecialPages.html" title="A list of all special pages [q]" accesskey="q">Special pages</a></li>
			<li id="t-print"><a href="indexfa4a.html?title=Einstieg_in_die_Programmierung_mit_Qt&amp;printable=yes" rel="alternate" title="Printable version of this page [p]" accesskey="p">Printable version</a></li>
			<li id="t-permalink"><a href="index211e.html?title=Einstieg_in_die_Programmierung_mit_Qt&amp;oldid=17860" title="Permanent link to this revision of the page">Permanent link</a></li>
			<li id="t-info"><a href="index8047-2.html?title=Einstieg_in_die_Programmierung_mit_Qt&amp;action=info">Page information</a></li>
		</ul>
	</div>
</div>
			</div>
		</div>
		<div id="footer" role="contentinfo">
							<ul id="footer-info">
											<li id="footer-info-lastmod"> This page was last modified on 7 June 2015, at 13:20.</li>
											<li id="footer-info-viewcount">This page has been accessed 5,354 times.</li>
									</ul>
							<ul id="footer-places">
											<li id="footer-places-terms"><a href='https://developer.qtcloudservices.com/legal/terms'>Käyttöehdot</a></li>
									</ul>
										<ul id="footer-icons" class="noprint">
					<li id="footer-poweredbyico">
						<a href="http://www.mediawiki.org/"><img src="skins/common/images/poweredby_mediawiki_88x31.png" alt="Powered by MediaWiki" width="88" height="31" /></a>
					</li>
				</ul>
						<div style="clear:both"></div>
		</div>
		<script>/*<![CDATA[*/window.jQuery && jQuery.ready();/*]]>*/</script><script>if(window.mw){
mw.loader.state({"site":"loading","user":"ready","user.groups":"ready"});
}</script>
<script>if(window.mw){
mw.loader.load(["mediawiki.action.view.postEdit","mediawiki.user","mediawiki.hidpi","mediawiki.page.ready","mediawiki.searchSuggest","skins.vector.collapsibleNav"],null,true);
}</script>
<script src="load55ad.php?debug=false&amp;lang=en&amp;modules=site&amp;only=scripts&amp;skin=vector&amp;*"></script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','http://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-54043535-2', 'auto');
  ga('send', 'pageview');

</script>
<script>if(window.mw){
mw.config.set({"wgBackendResponseTime":538});
}</script>
	</body>

<!-- Mirrored from wiki.qt.io/Einstieg_in_die_Programmierung_mit_Qt by HTTrack Website Copier/3.x [XR&CO'2013], Thu, 05 Nov 2015 09:37:11 GMT -->
</html>
